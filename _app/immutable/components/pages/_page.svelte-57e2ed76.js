import{I as Zu,S as St,i as At,s as Nt,k as H,l as G,m as V,h as E,n as k,p as Xt,J as dr,b as it,B as K,K as Oc,L as Tt,M as xt,D as L,g as Be,t as et,d as $e,f as J,w as pt,x as mt,y as gt,z as _t,a as Ht,c as Gt,N as pe,q as _e,r as ve,u as hn,O as sa,o as Jr,j as Yu,P as ra,Q as Qu,R as Ku,T as Dc,U as ia,V as oa,W as Ju,X as aa}from"../../chunks/index-14ed9311.js";const Rc="14.7.77",ca=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),la=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),Oi=(e,t)=>({startTime:t,type:"setValue",value:e}),Vc=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),Pc=(e,t,{startTime:n,target:s,timeConstant:r})=>s+(t-s)*Math.exp((n-e)/r),In=e=>e.type==="exponentialRampToValue",pr=e=>e.type==="linearRampToValue",Ye=e=>In(e)||pr(e),ho=e=>e.type==="setValue",Pe=e=>e.type==="setValueCurve",mr=(e,t,n,s)=>{const r=e[t];return r===void 0?s:Ye(r)||ho(r)?r.value:Pe(r)?r.values[r.values.length-1]:Pc(n,mr(e,t-1,r.startTime,s),r)},ua=(e,t,n,s,r)=>n===void 0?[s.insertTime,r]:Ye(n)?[n.endTime,n.value]:ho(n)?[n.startTime,n.value]:Pe(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,mr(e,t-1,n.startTime,r)],Di=e=>e.type==="cancelAndHold",Ri=e=>e.type==="cancelScheduledValues",Ze=e=>Di(e)||Ri(e)?e.cancelTime:In(e)||pr(e)?e.endTime:e.startTime,ha=(e,t,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((e-t)/(s-t)):0,fa=(e,t,n,{endTime:s,value:r})=>n+(e-t)/(s-t)*(r-n),th=(e,t)=>{const n=Math.floor(t),s=Math.ceil(t);return n===s?e[n]:(1-(t-n))*e[n]+(1-(s-t))*e[s]},eh=(e,{duration:t,startTime:n,values:s})=>{const r=(e-n)/t*(s.length-1);return th(s,r)},Ks=e=>e.type==="setTarget";class nh{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=Ze(t);if(Di(t)||Ri(t)){const s=this._automationEvents.findIndex(i=>Ri(t)&&Pe(i)?i.startTime+i.duration>=n:Ze(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Di(t)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ye(r)){if(Ks(i))throw new Error("The internal list is malformed.");const o=Pe(i)?i.startTime+i.duration:Ze(i),a=Pe(i)?i.values[i.values.length-1]:i.value,c=In(r)?ha(n,o,a,r):fa(n,o,a,r),l=In(r)?ca(c,n,this._currenTime):la(c,n,this._currenTime);this._automationEvents.push(l)}i!==void 0&&Ks(i)&&this._automationEvents.push(Oi(this.getValue(n),n)),i!==void 0&&Pe(i)&&i.startTime+i.duration>n&&(this._automationEvents[this._automationEvents.length-1]=Vc(new Float32Array([6,7]),i.startTime,n-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>Ze(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Pe(r)&&Ze(r)+r.duration>n)return!1;const i=In(t)?ca(t.value,t.endTime,this._currenTime):pr(t)?la(t.value,n,this._currenTime):t;if(s===-1)this._automationEvents.push(i);else{if(Pe(t)&&n+t.duration>Ze(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(t){const n=this._automationEvents.findIndex(s=>Ze(s)>t);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];Ks(r)&&s.unshift(Oi(mr(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Ze(o)>t),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&Ks(i)&&(s===void 0||!Ye(s)||s.insertTime>t))return Pc(t,mr(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&ho(i)&&(s===void 0||!Ye(s)))return i.value;if(i!==void 0&&Pe(i)&&(s===void 0||!Ye(s)||i.startTime+i.duration>t))return t<i.startTime+i.duration?eh(t,i):i.values[i.values.length-1];if(i!==void 0&&Ye(i)&&(s===void 0||!Ye(s)))return i.value;if(s!==void 0&&In(s)){const[o,a]=ua(this._automationEvents,r,i,s,this._defaultValue);return ha(t,o,a,s)}if(s!==void 0&&pr(s)){const[o,a]=ua(this._automationEvents,r,i,s,this._defaultValue);return fa(t,o,a,s)}return this._defaultValue}}const sh=e=>({cancelTime:e,type:"cancelAndHold"}),rh=e=>({cancelTime:e,type:"cancelScheduledValues"}),ih=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),oh=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),ah=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),ch=()=>new DOMException("","AbortError"),lh=e=>(t,n,[s,r,i],o)=>{e(t[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},uh=e=>(t,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);e.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},hh=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Wn=new WeakSet,Fc=new WeakMap,fo=new WeakMap,Lc=new WeakMap,po=new WeakMap,ti=new WeakMap,qc=new WeakMap,Vi=new WeakMap,Pi=new WeakMap,Fi=new WeakMap,zc={construct(){return zc}},fh=e=>{try{const t=new Proxy(e,zc);new t}catch{return!1}return!0},da=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,pa=(e,t)=>{const n=[];let s=e.replace(/^[\s]+/,""),r=s.match(da);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(da)}return[n.join(";"),s]},ma=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ga=e=>{if(!fh(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},dh=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>{let d=0;return(p,m,g={credentials:"omit"})=>{const _=u.get(p);if(_!==void 0&&_.has(m))return Promise.resolve();const w=l.get(p);if(w!==void 0){const v=w.get(m);if(v!==void 0)return v}const y=i(p),x=y.audioWorklet===void 0?r(m).then(([v,b])=>{const[C,S]=pa(v,b),M=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return n(M)}).then(()=>{const v=f._AWGS.pop();if(v===void 0)throw new SyntaxError;s(y.currentTime,y.sampleRate,()=>v(class{},void 0,(b,C)=>{if(b.trim()==="")throw t();const S=Pi.get(y);if(S!==void 0){if(S.has(b))throw t();ga(C),ma(C.parameterDescriptors),S.set(b,C)}else ga(C),ma(C.parameterDescriptors),Pi.set(y,new Map([[b,C]]))},y.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(e(h,h))]).then(([[v,b],C])=>{const S=d+1;d=S;const[M,N]=pa(v,b),O=`${M};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,z=new Blob([O],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(z);return y.audioWorklet.addModule(R,g).then(()=>{if(a(y))return y;const P=o(y);return P.audioWorklet.addModule(R,g).then(()=>P)}).then(P=>{if(c===null)throw new SyntaxError;try{new c(P,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return w===void 0?l.set(p,new Map([[m,x]])):w.set(m,x),x.then(()=>{const v=u.get(p);v===void 0?u.set(p,new Set([m])):v.add(m)}).finally(()=>{const v=l.get(p);v!==void 0&&v.delete(m)}),x}},Te=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},ei=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return e.delete(s),s},Wc=(e,t,n,s)=>{const r=Te(e,t),i=ei(r,o=>o[0]===n&&o[1]===s);return r.size===0&&e.delete(t),i},Ls=e=>Te(qc,e),Bn=e=>{if(Wn.has(e))throw new Error("The AudioNode is already stored.");Wn.add(e),Ls(e).forEach(t=>t(!0))},Bc=e=>"port"in e,qs=e=>{if(!Wn.has(e))throw new Error("The AudioNode is not stored.");Wn.delete(e),Ls(e).forEach(t=>t(!1))},Li=(e,t)=>{!Bc(e)&&t.every(n=>n.size===0)&&qs(e)},ph=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>{const d=new WeakMap;return(p,m,g,_,w)=>{const{activeInputs:y,passiveInputs:x}=i(m),{outputs:v}=i(p),b=a(p),C=S=>{const M=c(m),N=c(p);if(S){const A=Wc(x,p,g,_);e(y,p,A,!1),!w&&!h(p)&&n(N,M,g,_),f(m)&&Bn(m)}else{const A=s(y,p,g,_);t(x,_,A,!1),!w&&!h(p)&&r(N,M,g,_);const T=o(m);if(T===0)u(m)&&Li(m,y);else{const I=d.get(m);I!==void 0&&clearTimeout(I),d.set(m,setTimeout(()=>{u(m)&&Li(m,y)},T*1e3))}}};return l(v,[m,g,_],S=>S[0]===m&&S[1]===g&&S[2]===_,!0)?(b.add(C),u(p)?e(y,p,[g,_,C],!0):t(x,_,[p,g,C],!0),!0):!1}},mh=e=>(t,n,[s,r,i],o)=>{const a=t.get(s);a===void 0?t.set(s,new Set([[r,n,i]])):e(a,[r,n,i],c=>c[0]===r&&c[1]===n,o)},gh=e=>(t,n)=>{const s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(t.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},_h=e=>(t,n)=>{e(t).add(n)},vh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},yh=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...vh,...c},h=s(l,u),f=i(l)?t():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},jt=(e,t)=>e.context===t,wh=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},gr=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Oe=()=>new DOMException("","IndexSizeError"),mo=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(s){throw s.code===12?Oe():s}})(e.getChannelData)},bh={numberOfChannels:1},Th=(e,t,n,s,r,i,o,a)=>{let c=null;return class $c{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...bh,...u};c===null&&(c=new r(1,1,44100));const p=s!==null&&t(i,i)?new s({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),mo(p)):t(gr,()=>gr(p))||a(p),e.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===$c.prototype||e.has(u)}}},Jt=-34028234663852886e22,Zt=-Jt,Le=e=>Wn.has(e),xh={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ch=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...xh,...u},d=r(h,f),p=o(h),m=p?t():null;super(l,!1,d,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,Zt,Jt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){Bn(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Le(this)&&qs(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},kh=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=jt(h,u);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(u,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),f?await e(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},Sh=e=>"playbackRate"in e,Ah=e=>"frequency"in e&&"gain"in e,Nh=e=>"offset"in e,Mh=e=>!("frequency"in e)&&"gain"in e,Ih=e=>"detune"in e&&"frequency"in e,Eh=e=>"pan"in e,Yt=e=>Te(Fc,e),zs=e=>Te(Lc,e),qi=(e,t)=>{const{activeInputs:n}=Yt(e);n.forEach(r=>r.forEach(([i])=>{t.includes(e)||qi(i,[...t,e])}));const s=Sh(e)?[e.playbackRate]:Bc(e)?Array.from(e.parameters.values()):Ah(e)?[e.Q,e.detune,e.frequency,e.gain]:Nh(e)?[e.offset]:Mh(e)?[e.gain]:Ih(e)?[e.detune,e.frequency]:Eh(e)?[e.pan]:[];for(const r of s){const i=zs(r);i!==void 0&&i.activeInputs.forEach(([o])=>qi(o,t))}Le(e)&&qs(e)},Uc=e=>{qi(e.destination,[])},Oh=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),Dh=(e,t,n,s,r,i,o,a,c)=>class extends e{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw s();if(!Oh(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:f}=u,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Uc(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?t():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?t():u})}},Rh=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f=o(h),d=r(h,u,f),p=f?t(a):null;super(l,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Vh=e=>{const t=new WeakMap,n=async(s,r)=>{const i=r.destination;return t.set(r,i),await e(s,r,i),i};return{render(s,r){const i=t.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},Ph=(e,t,n,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const v=new Float32Array(1),b=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(l);let S=!1,M=[0,0,-1,0,1,0],N=[0,0,0];const A=()=>{if(S)return;S=!0;const z=s(l,256,9,0);z.onaudioprocess=({inputBuffer:R})=>{const P=[i(R,v,0),i(R,v,1),i(R,v,2),i(R,v,3),i(R,v,4),i(R,v,5)];P.some((q,F)=>q!==M[F])&&(u.setOrientation(...P),M=P);const U=[i(R,v,6),i(R,v,7),i(R,v,8)];U.some((q,F)=>q!==N[F])&&(u.setPosition(...U),N=U)},b.connect(z)},T=z=>R=>{R!==M[z]&&(M[z]=R,u.setOrientation(...M))},I=z=>R=>{R!==N[z]&&(N[z]=R,u.setPosition(...N))},O=(z,R,P)=>{const U=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:R});U.connect(b,0,z),U.start(),Object.defineProperty(U.offset,"defaultValue",{get(){return R}});const q=e({context:c},C,U.offset,Zt,Jt);return a(q,"value",F=>()=>F.call(q),F=>B=>{try{F.call(q,B)}catch(Q){if(Q.code!==9)throw Q}A(),C&&P(B)}),q.cancelAndHoldAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.cancelAndHoldAtTime),q.cancelScheduledValues=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.cancelScheduledValues),q.exponentialRampToValueAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.exponentialRampToValueAtTime),q.linearRampToValueAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.linearRampToValueAtTime),q.setTargetAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.setTargetAtTime),q.setValueAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.setValueAtTime),q.setValueCurveAtTime=(F=>C?()=>{throw r()}:(...B)=>{const Q=F.apply(q,B);return A(),Q})(q.setValueCurveAtTime),q};return{forwardX:O(0,0,T(0)),forwardY:O(1,0,T(1)),forwardZ:O(2,-1,T(2)),positionX:O(6,0,I(0)),positionY:O(7,0,I(1)),positionZ:O(8,0,I(2)),upX:O(3,0,T(3)),upY:O(4,1,T(4)),upZ:O(5,0,T(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:m,positionY:g,positionZ:_,upX:w,upY:y,upZ:x}=u.forwardX===void 0?h():u;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return _},get upX(){return w},get upY(){return y},get upZ(){return x}}},_r=e=>"context"in e,Ws=e=>_r(e[0]),xn=(e,t,n,s)=>{for(const r of e)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},_a=(e,t,[n,s],r)=>{xn(e,[t,n,s],i=>i[0]===t&&i[1]===n,r)},va=(e,[t,n,s],r)=>{const i=e.get(t);i===void 0?e.set(t,new Set([[n,s]])):xn(i,[n,s],o=>o[0]===n,r)},Yn=e=>"inputs"in e,vr=(e,t,n,s)=>{if(Yn(t)){const r=t.inputs[s];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,s),[t,n,s]},jc=(e,t,n)=>{for(const s of e)if(s[0]===t&&s[1]===n)return e.delete(s),s;return null},Fh=(e,t,n)=>ei(e,s=>s[0]===t&&s[1]===n),Hc=(e,t)=>{if(!Ls(e).delete(t))throw new Error("Missing the expected event listener.")},Gc=(e,t,n)=>{const s=Te(e,t),r=ei(s,i=>i[0]===n);return s.size===0&&e.delete(t),r},yr=(e,t,n,s)=>{Yn(t)?e.disconnect(t.inputs[s],n,0):e.disconnect(t,n,s)},vt=e=>Te(fo,e),gs=e=>Te(po,e),mn=e=>Vi.has(e),ar=e=>!Wn.has(e),ya=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const s=e.createScriptProcessor(256,1,1),r=e.createGain(),i=e.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=e.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(e.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(e.destination)},a.start()}}),wi=(e,t)=>{const n=new Map;for(const s of e)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>t(r,s))},wr=e=>"context"in e,Lh=e=>{const t=new Map;e.connect=(n=>(s,r=0,i=0)=>{const o=wr(s)?n(s,r,i):n(s,r),a=t.get(s);return a===void 0?t.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(e.connect.bind(e)),e.disconnect=(n=>(s,r,i)=>{if(n.apply(e),s===void 0)t.clear();else if(typeof s=="number")for(const[o,a]of t){const c=a.filter(l=>l.output!==s);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(s))if(r===void 0)t.delete(s);else{const o=t.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?t.delete(s):t.set(s,a)}}for(const[o,a]of t)a.forEach(c=>{wr(o)?e.connect(o,c.output,c.input):e.connect(o,c.output)})})(e.disconnect)},qh=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=zs(t),{outputs:o}=Yt(e),a=Ls(e),c=l=>{const u=vt(e),h=gs(t);if(l){const f=Gc(i,e,n);_a(r,e,f,!1),!s&&!mn(e)&&u.connect(h,n)}else{const f=Fh(r,e,n);va(i,f,!1),!s&&!mn(e)&&u.disconnect(h,n)}};return xn(o,[t,n],l=>l[0]===t&&l[1]===n,!0)?(a.add(c),Le(e)?_a(r,e,[n,c],!0):va(i,[e,n,c],!0),!0):!1},zh=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=Yt(t),o=jc(r[s],e,n);return o===null?[Wc(i,e,n,s)[2],!1]:[o[2],!0]},Wh=(e,t,n)=>{const{activeInputs:s,passiveInputs:r}=zs(t),i=jc(s,e,n);return i===null?[Gc(r,e,n)[1],!1]:[i[2],!0]},go=(e,t,n,s,r)=>{const[i,o]=zh(e,n,s,r);if(i!==null&&(Hc(e,i),o&&!t&&!mn(e)&&yr(vt(e),vt(n),s,r)),Le(n)){const{activeInputs:a}=Yt(n);Li(n,a)}},_o=(e,t,n,s)=>{const[r,i]=Wh(e,n,s);r!==null&&(Hc(e,r),i&&!t&&!mn(e)&&vt(e).disconnect(gs(n),s))},Bh=(e,t)=>{const n=Yt(e),s=[];for(const r of n.outputs)Ws(r)?go(e,t,...r):_o(e,t,...r),s.push(r[0]);return n.outputs.clear(),s},$h=(e,t,n)=>{const s=Yt(e),r=[];for(const i of s.outputs)i[1]===n&&(Ws(i)?go(e,t,...i):_o(e,t,...i),r.push(i[0]),s.outputs.delete(i));return r},Uh=(e,t,n,s,r)=>{const i=Yt(e);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Ws(o)?go(e,t,...o):_o(e,t,...o),i.outputs.delete(o),o[0]))},jh=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>class extends l{constructor(_,w,y,x){super(y),this._context=_,this._nativeAudioNode=y;const v=u(_);h(v)&&n(ya,()=>ya(v,m))!==!0&&Lh(y),fo.set(this,y),qc.set(this,new Set),_.state!=="closed"&&w&&Bn(this),e(this,x,y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,w=0,y=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const x=u(this._context),v=p(x);if(f(_)||d(_))throw i();if(_r(_)){const S=vt(_);try{const N=vr(this._nativeAudioNode,S,w,y),A=ar(this);(v||A)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!A&&ar(_)&&Bn(_)}catch(N){throw N.code===12?i():N}if(t(this,_,w,y,v)){const N=c([this],_);wi(N,s(v))}return _}const b=gs(_);if(b.name==="playbackRate"&&b.maxValue===1024)throw o();try{this._nativeAudioNode.connect(b,w),(v||ar(this))&&this._nativeAudioNode.disconnect(b,w)}catch(S){throw S.code===12?i():S}if(qh(this,_,w,v)){const S=c([this],_);wi(S,s(v))}}disconnect(_,w,y){let x;const v=u(this._context),b=p(v);if(_===void 0)x=Bh(this,b);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();x=$h(this,b,_)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||_r(_)&&y!==void 0&&(y<0||y>=_.numberOfInputs))throw r();if(x=Uh(this,b,_,w,y),x.length===0)throw i()}for(const C of x){const S=c([this],C);wi(S,a)}}},Hh=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g=null,_=null)=>{const w=new nh(m.defaultValue),y=p?s(w):null,x={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return _===null?m.minValue:_},get value(){return m.value},set value(v){m.value=v,x.setValueAtTime(v,d.context.currentTime)},cancelAndHoldAtTime(v){if(typeof m.cancelAndHoldAtTime=="function")y===null&&w.flush(d.context.currentTime),w.add(r(v)),m.cancelAndHoldAtTime(v);else{const b=Array.from(w).pop();y===null&&w.flush(d.context.currentTime),w.add(r(v));const C=Array.from(w).pop();m.cancelScheduledValues(v),b!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?m.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?m.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&m.setValueCurveAtTime(C.values,C.startTime,C.duration))}return x},cancelScheduledValues(v){return y===null&&w.flush(d.context.currentTime),w.add(i(v)),m.cancelScheduledValues(v),x},exponentialRampToValueAtTime(v,b){if(v===0)throw new RangeError;if(!Number.isFinite(b)||b<0)throw new RangeError;return y===null&&w.flush(d.context.currentTime),w.add(o(v,b)),m.exponentialRampToValueAtTime(v,b),x},linearRampToValueAtTime(v,b){return y===null&&w.flush(d.context.currentTime),w.add(a(v,b)),m.linearRampToValueAtTime(v,b),x},setTargetAtTime(v,b,C){return y===null&&w.flush(d.context.currentTime),w.add(c(v,b,C)),m.setTargetAtTime(v,b,C),x},setValueAtTime(v,b){return y===null&&w.flush(d.context.currentTime),w.add(l(v,b)),m.setValueAtTime(v,b),x},setValueCurveAtTime(v,b,C){const S=v instanceof Float32Array?v:new Float32Array(v);if(h!==null&&h.name==="webkitAudioContext"){const M=b+C,N=d.context.sampleRate,A=Math.ceil(b*N),T=Math.floor(M*N),I=T-A,O=new Float32Array(I);for(let R=0;R<I;R+=1){const P=(S.length-1)/C*((A+R)/N-b),U=Math.floor(P),q=Math.ceil(P);O[R]=U===q?S[U]:(1-(P-U))*S[U]+(1-(q-P))*S[q]}y===null&&w.flush(d.context.currentTime),w.add(u(O,b,C)),m.setValueCurveAtTime(O,b,C);const z=T/N;z<M&&f(x,O[O.length-1],z),f(x,S[S.length-1],M)}else y===null&&w.flush(d.context.currentTime),w.add(u(S,b,C)),m.setValueCurveAtTime(S,b,C);return x}};return n.set(x,m),t.set(x,d),e(x,y),x},Gh=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;t.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;t.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;t.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;t.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;t.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Xc{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((s,r)=>t.call(n,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Xh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Zh=(e,t,n,s,r,i,o,a,c,l,u,h,f,d)=>class extends t{constructor(m,g,_){var w;const y=a(m),x=c(y),v=u({...Xh,..._});f(v);const b=Pi.get(y),C=b==null?void 0:b.get(g),S=x||y.state!=="closed"?y:(w=o(y))!==null&&w!==void 0?w:y,M=r(S,x?null:m.baseLatency,l,g,C,v),N=x?s(g,v,C):null;super(m,!0,M,N);const A=[];M.parameters.forEach((I,O)=>{const z=n(this,x,I);A.push([O,z])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new Xc(A),x&&e(y,this);const{activeInputs:T}=i(this);h(M,T)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===g?m:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function br(e,t,n,s,r){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],s,r);else{const i=e.getChannelData(s);if(t[n].byteLength===0)t[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(o)}}}const Zc=(e,t,n,s,r)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],s,r):t[n].byteLength!==0&&e.getChannelData(s).set(t[n],r)},Tr=(e,t)=>{const n=[];for(let s=0;s<e;s+=1){const r=[],i=typeof t=="number"?t:t[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},Yh=(e,t)=>{const n=Te(Fi,e),s=vt(t);return Te(n,s)},Qh=async(e,t,n,s,r,i,o)=>{const a=t===null?Math.ceil(e.context.length/128)*128:t.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((g,_)=>g+_,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Yt(e),f=await Yh(n,e),d=Tr(s.numberOfInputs,s.channelCount),p=Tr(s.numberOfOutputs,r),m=Array.from(e.parameters.keys()).reduce((g,_)=>({...g,[_]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&t!==null)for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<s.channelCount;w+=1)br(t,d[_],w,w,g);i.parameterDescriptors!==void 0&&t!==null&&i.parameterDescriptors.forEach(({name:_},w)=>{br(t,m,_,c+w,g)});for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<r[_];w+=1)p[_][w].byteLength===0&&(p[_][w]=new Float32Array(128));try{const _=d.map((y,x)=>h.activeInputs[x].size===0?[]:y),w=o(g/n.sampleRate,n.sampleRate,()=>f.process(_,p,m));if(u!==null)for(let y=0,x=0;y<s.numberOfOutputs;y+=1){for(let v=0;v<r[y];v+=1)Zc(u,p[y],v,x+v,g);x+=r[y]}if(!w)break}catch(_){e.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return u},Kh=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m)=>(g,_,w)=>{const y=new WeakMap;let x=null;const v=async(b,C)=>{let S=u(b),M=null;const N=jt(S,C),A=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const T=A.reduce((R,P)=>R+P,0),I=r(C,{channelCount:Math.max(1,T),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,T)}),O=[];for(let R=0;R<b.numberOfOutputs;R+=1)O.push(s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[R]}));const z=o(C,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});z.connect=t.bind(null,O),z.disconnect=c.bind(null,O),M=[I,O,z]}else N||(S=new h(C,g));if(y.set(C,M===null?S:M[2]),M!==null){if(x===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const P=b.channelCount*b.numberOfInputs,U=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,q=P+U;x=Qh(b,q===0?null:await(async()=>{const B=new f(q,Math.ceil(b.context.length/128)*128,C.sampleRate),Q=[],X=[];for(let st=0;st<_.numberOfInputs;st+=1)Q.push(o(B,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),X.push(r(B,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const j=await Promise.all(Array.from(b.parameters.values()).map(async st=>{const at=i(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:st.value});return await d(B,st,at.offset),at})),Z=s(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,P+U)});for(let st=0;st<_.numberOfInputs;st+=1){Q[st].connect(X[st]);for(let at=0;at<_.channelCount;at+=1)X[st].connect(Z,at,st*_.channelCount+at)}for(const[st,at]of j.entries())at.connect(Z,0,P+st),at.start(0);return Z.connect(B.destination),await Promise.all(Q.map(st=>p(b,B,st))),m(B)})(),C,_,A,w,l)}const T=await x,I=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[O,z,R]=M;T!==null&&(I.buffer=T,I.start(0)),I.connect(O);for(let P=0,U=0;P<b.numberOfOutputs;P+=1){const q=z[P];for(let F=0;F<A[P];F+=1)O.connect(q,U+F,F);U+=A[P]}return R}if(N)for(const[T,I]of b.parameters.entries())await e(C,I,S.parameters.get(T));else for(const[T,I]of b.parameters.entries())await d(C,I,S.parameters.get(T));return await p(b,C,S),S};return{render(b,C){a(C,b);const S=y.get(C);return S!==void 0?Promise.resolve(S):v(b,C)}}},Jh=(e,t,n,s,r,i,o,a,c,l,u,h,f,d,p,m,g,_,w,y)=>class extends p{constructor(v,b){super(v,b),this._nativeContext=v,this._audioWorklet=e===void 0?void 0:{addModule:(C,S)=>e(this,C,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(v,b,C){return new n({length:b,numberOfChannels:v,sampleRate:C})}createBufferSource(){return new s(this)}createChannelMerger(v=6){return new i(this,{numberOfInputs:v})}createChannelSplitter(v=6){return new o(this,{numberOfOutputs:v})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(v=1){return new u(this,{maxDelayTime:v})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(v,b){return new d(this,{feedback:b,feedforward:v})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(v,b,C={disableNormalization:!1}){return new _(this,{...C,imag:b,real:v})}createStereoPanner(){return new w(this)}createWaveShaper(){return new y(this)}decodeAudioData(v,b,C){return l(this._nativeContext,v).then(S=>(typeof b=="function"&&b(S),S),S=>{throw typeof C=="function"&&C(S),S})}},tf={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},ef=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...tf,...u},d=r(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._Q=t(this,p,d.Q,Zt,Jt),this._detune=t(this,p,d.detune,1200*Math.log2(Zt),-1200*Math.log2(Zt)),this._frequency=t(this,p,d.frequency,l.sampleRate/2,0),this._gain=t(this,p,d.gain,40*Math.log10(Zt),Jt),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(f){throw f.code===11?s():f}if(l.length!==u.length||u.length!==h.length)throw s()}},nf=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=jt(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(c,h)}return i.set(c,l),u?(await e(c,a.Q,l.Q),await e(c,a.detune,l.detune),await e(c,a.frequency,l.frequency),await e(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},sf=(e,t)=>(n,s)=>{const r=t.get(n);if(r!==void 0)return r;const i=e.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(e.set(n,o),o.catch(()=>!1).then(a=>(e.delete(n),t.set(n,a),a))):(t.set(n,o),o)}catch{return t.set(n,!1),!1}},rf={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},of=(e,t,n,s,r)=>class extends e{constructor(o,a){const c=s(o),l={...rf,...a},u=n(c,l),h=r(c)?t():null;super(o,!1,u,h)}},af=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},cf={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},lf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u=i({...cf,...c}),h=n(l,u),f=r(l)?t():null;super(a,!1,h,f)}},uf=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(o,l)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},hf=e=>(t,n,s)=>e(n,t,s),ff=e=>(t,n,s=0,r=0)=>{const i=t[s];if(i===void 0)throw e();return wr(n)?i.connect(n,0,r):i.connect(n,0)},df=e=>(t,n)=>{const s=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},pf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},mf=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...pf,...l},f=s(u,h),d=i(u),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=t(this,d,f.offset,Zt,Jt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Bn(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Le(this)&&qs(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},gf=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=n(l);const f=jt(h,u);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(u,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),f?await e(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},_f=e=>t=>(e[0]=t,e[0]),vf={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},yf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u={...vf,...c},h=n(l,u),d=r(l)?t():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},wf=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(o,l)}return s.set(o,a),Yn(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},bf=(e,t)=>(n,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,s,r)}catch(i){throw i.name==="SyntaxError"?e():i}},Tf=()=>new DOMException("","DataCloneError"),wa=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,t.close(),n.close(),s()};n.onmessage=()=>r();try{t.postMessage(e,[e])}finally{r()}})},xf=(e,t,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=o(h)?h:i(h);if(r.has(f)){const p=n();return Promise.reject(p)}try{r.add(f)}catch{}return t(c,()=>c(d))?d.decodeAudioData(f).then(p=>(wa(f).catch(()=>{}),t(a,()=>a(p))||u(p),e.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await wa(f)}catch{}},_=w=>{m(w),g()};try{d.decodeAudioData(f,w=>{typeof w.copyFromChannel!="function"&&(l(w),mo(w)),e.add(w),g().then(()=>p(w))},w=>{_(w===null?s():w)})}catch(w){_(w)}})},Cf=(e,t,n,s,r,i,o,a)=>(c,l)=>{const u=t.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(u===l){if(t.delete(c),!f&&o(c)){const d=s(c),{outputs:p}=n(c);for(const m of p)if(Ws(m)){const g=s(m[0]);e(d,g,m[1],m[2])}else{const g=r(m[0]);d.connect(g,m[1])}}}else t.set(c,u-l)},kf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Sf=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...kf,...l},f=s(u,h),d=i(u),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=t(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},Af=(e,t,n,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const h=jt(u,l);if(!h){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=t(l,f)}return o.set(l,u),h?await e(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},Nf=e=>(t,n,s,r)=>e(t[r],i=>i[0]===n&&i[1]===s),Mf=e=>(t,n)=>{e(t).delete(n)},If=e=>"delayTime"in e,Ef=(e,t,n)=>function s(r,i){const o=_r(i)?i:n(e,i);if(If(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Js=(e,t,n)=>{const s=t[n];if(s===void 0)throw e();return s},Of=e=>(t,n=void 0,s=void 0,r=0)=>n===void 0?t.forEach(i=>i.disconnect()):typeof n=="number"?Js(e,t,n).disconnect():wr(n)?s===void 0?t.forEach(i=>i.disconnect(n)):r===void 0?Js(e,t,s).disconnect(n,0):Js(e,t,s).disconnect(n,0,r):s===void 0?t.forEach(i=>i.disconnect(n)):Js(e,t,s).disconnect(n,0),Df={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Rf=(e,t,n,s,r,i,o,a)=>class extends e{constructor(l,u){const h=i(l),f={...Df,...u},d=s(h,f),p=o(h),m=p?n():null;super(l,!1,d,m),this._attack=t(this,p,d.attack),this._knee=t(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=t(this,p,d.ratio),this._release=t(this,p,d.release),this._threshold=t(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Vf=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=jt(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(c,h)}return i.set(c,l),u?(await e(c,a.attack,l.attack),await e(c,a.knee,l.knee),await e(c,a.ratio,l.ratio),await e(c,a.release,l.release),await e(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Pf=()=>new DOMException("","EncodingError"),Ff=e=>t=>new Promise((n,s)=>{if(e===null){s(new SyntaxError);return}const r=e.document.head;if(r===null)s(new SyntaxError);else{const i=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=e.onerror,l=()=>{e.onerror=c,URL.revokeObjectURL(a)};e.onerror=(u,h,f,d,p)=>{if(h===a||h===e.location.href&&f===1&&d===1)return l(),s(p),!1;if(c!==null)return c(u,h,f,d,p)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),n()},i.src=a,i.type="module",r.appendChild(i)}}),Lf=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=e(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},qf=e=>(t,n,s)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},zf=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},Wf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Bf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...Wf,...c},h=s(l,u),f=i(l),d=f?n():null;super(a,!1,h,d),this._gain=t(this,f,h.gain,Zt,Jt)}get gain(){return this._gain}},$f=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=jt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(c,h)}return i.set(c,l),u?await e(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Uf=(e,t)=>n=>t(e,n),jf=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},Hf=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},Gf=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Xf=e=>t=>e.get(t),zt=()=>new DOMException("","InvalidStateError"),Zf=e=>t=>{const n=e.get(t);if(n===void 0)throw zt();return n},Yf=(e,t)=>n=>{let s=e.get(n);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),e.set(n,s),s},Qf=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},ni=()=>new DOMException("","InvalidAccessError"),Kf=e=>{e.getFrequencyResponse=(t=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw ni();return t.call(e,n,s,r)})(e.getFrequencyResponse)},Jf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},td=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=s(a),u=r(l),h={...Jf,...c},f=t(l,u?null:a.baseLatency,h),d=u?n(h.feedback,h.feedforward):null;super(a,!1,f,d),Kf(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},Yc=(e,t,n,s,r,i,o,a,c,l,u)=>{const h=l.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*l[d];for(let m=1;m<r;m+=1){const g=f-m&c-1;p+=n[m]*i[g],p-=e[m]*o[g]}for(let m=r;m<s;m+=1)p+=n[m]*i[f-m&c-1];for(let m=r;m<t;m+=1)p-=e[m]*o[f-m&c-1];i[f]=l[d],o[f]=p,f=f+1&c-1,u[d]=p}return f},ed=(e,t,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),f=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const m=e.getChannelData(p),g=f.getChannelData(p);u.fill(0),h.fill(0),Yc(r,o,i,a,c,u,h,0,l,m,g)}return f},nd=(e,t,n,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let f=null,d=t(u);const p=jt(d,h);if(h.createIIRFilter===void 0?f=e(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,g,g.destination);const _=await r(g);return ed(_,h,i,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await s(u,h,d),d};return{render(u,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},sd=(e,t,n,s,r,i)=>o=>(a,c)=>{const l=e.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=n(a);for(const f of h)if(Ws(f)){const d=s(f[0]);t(u,d,f[1],f[2])}else{const d=r(f[0]);u.disconnect(d,f[1])}}e.set(a,c)}else e.set(a,l+c)},rd=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},id=(e,t)=>n=>e.has(n)||t(n),od=(e,t)=>n=>e.has(n)||t(n),ad=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},cd=e=>t=>e!==null&&t instanceof e,ld=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,ud=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,hd=(e,t)=>n=>e(n)||t(n),fd=e=>t=>e!==null&&t instanceof e,dd=e=>e!==null&&e.isSecureContext,pd=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},md={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},gd=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const c={...md,...o},l=t(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},_d=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},vd=(e,t,n)=>class extends e{constructor(r,i){const o=n(r),a=t(o,i);super(r,!0,a,null)}},yd=(e,t,n,s,r,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,ti.set(this,a),s(a)&&r.set(a,new Set),this._destination=new e(this,c),this._listener=t(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},_s=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},wd=(e,t)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(t(a))return o.call(n,a,c,l),e(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(n,a,c),e(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{t(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}const h=i.size===0;u&&h&&r()})(n.disconnect),n},bt=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n]&&(e[n]=s)},Pt=(e,t)=>{bt(e,t,"channelCount"),bt(e,t,"channelCountMode"),bt(e,t,"channelInterpretation")},ba=e=>typeof e.getFloatTimeDomainData=="function",bd=e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const s=Math.max(n.length,e.fftSize);for(let r=0;r<s;r+=1)t[r]=(n[r]-128)*.0078125;return t}},Td=(e,t)=>(n,s)=>{const r=n.createAnalyser();if(Pt(r,s),!(s.maxDecibels>s.minDecibels))throw t();return bt(r,s,"fftSize"),bt(r,s,"maxDecibels"),bt(r,s,"minDecibels"),bt(r,s,"smoothingTimeConstant"),e(ba,()=>ba(r))||bd(r),r},xd=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,It=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n].value&&(e[n].value=s)},Cd=e=>{e.start=(t=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw zt();t.call(e,s,r,i),n=!0}})(e.start)},vo=e=>{e.start=(t=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,s,r)})(e.start)},yo=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},kd=(e,t,n,s,r,i,o,a,c,l,u)=>(h,f)=>{const d=h.createBufferSource();return Pt(d,f),It(d,f,"playbackRate"),bt(d,f,"buffer"),bt(d,f,"loop"),bt(d,f,"loopEnd"),bt(d,f,"loopStart"),t(n,()=>n(h))||Cd(d),t(s,()=>s(h))||c(d),t(r,()=>r(h))||l(d,h),t(i,()=>i(h))||vo(d),t(o,()=>o(h))||u(d,h),t(a,()=>a(h))||yo(d),e(h,d),d},Sd=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,Ad=(e,t)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=e(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Nd=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,Md=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},Id=(e,t,n,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const _=f.get(m[1]);_!==void 0?m[1]=_:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},f.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),u.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return Md(u),t(i,o,l,u)},Qc=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Ed=e=>new Promise((t,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),t(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(e)}),Od=async(e,t)=>{const n=await Ed(t);return new e(n)},Dd=(e,t,n,s)=>{let r=Fi.get(e);r===void 0&&(r=new WeakMap,Fi.set(e,r));const i=Od(n,s);return r.set(t,i),i},Rd=(e,t,n,s,r,i,o,a,c,l,u,h,f)=>(d,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some(W=>W<1))throw c();if(_.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,y=_.reduce((W,Y)=>W+Y,0),x=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+x>6||y>6)throw c();const v=new MessageChannel,b=[],C=[];for(let W=0;W<g.numberOfInputs;W+=1)b.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),C.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:W,maxValue:Y,minValue:Vt,name:Ct}of m.parameterDescriptors){const ot=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[Ct]!==void 0?g.parameterData[Ct]:W===void 0?0:W});Object.defineProperties(ot.offset,{defaultValue:{get:()=>W===void 0?0:W},maxValue:{get:()=>Y===void 0?Zt:Y},minValue:{get:()=>Vt===void 0?Jt:Vt}}),S.push(ot)}const M=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+x)}),N=Qc(p,d.sampleRate),A=a(d,N,w+x,Math.max(1,y)),T=r(d,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),I=[];for(let W=0;W<g.numberOfOutputs;W+=1)I.push(s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[W]}));for(let W=0;W<g.numberOfInputs;W+=1){b[W].connect(C[W]);for(let Y=0;Y<g.channelCount;Y+=1)C[W].connect(M,Y,W*g.channelCount+Y)}const O=new Xc(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:W},Y)=>{const Vt=S[Y];return Vt.connect(M,0,w+Y),Vt.start(0),[W,Vt.offset]}));M.connect(A);let z=g.channelInterpretation,R=null;const P=g.numberOfOutputs===0?[A]:I,U={get bufferSize(){return N},get channelCount(){return g.channelCount},set channelCount(W){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(W){throw n()},get channelInterpretation(){return z},set channelInterpretation(W){for(const Y of b)Y.channelInterpretation=W;z=W},get context(){return A.context},get inputs(){return b},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(W){typeof R=="function"&&U.removeEventListener("processorerror",R),R=typeof W=="function"?W:null,typeof R=="function"&&U.addEventListener("processorerror",R)},get parameters(){return O},get port(){return v.port2},addEventListener(...W){return A.addEventListener(W[0],W[1],W[2])},connect:e.bind(null,P),disconnect:l.bind(null,P),dispatchEvent(...W){return A.dispatchEvent(W[0])},removeEventListener(...W){return A.removeEventListener(W[0],W[1],W[2])}},q=new Map;v.port1.addEventListener=(W=>(...Y)=>{if(Y[0]==="message"){const Vt=typeof Y[1]=="function"?Y[1]:typeof Y[1]=="object"&&Y[1]!==null&&typeof Y[1].handleEvent=="function"?Y[1].handleEvent:null;if(Vt!==null){const Ct=q.get(Y[1]);Ct!==void 0?Y[1]=Ct:(Y[1]=ot=>{u(d.currentTime,d.sampleRate,()=>Vt(ot))},q.set(Vt,Y[1]))}}return W.call(v.port1,Y[0],Y[1],Y[2])})(v.port1.addEventListener),v.port1.removeEventListener=(W=>(...Y)=>{if(Y[0]==="message"){const Vt=q.get(Y[1]);Vt!==void 0&&(q.delete(Y[1]),Y[1]=Vt)}return W.call(v.port1,Y[0],Y[1],Y[2])})(v.port1.removeEventListener);let F=null;Object.defineProperty(v.port1,"onmessage",{get:()=>F,set:W=>{typeof F=="function"&&v.port1.removeEventListener("message",F),F=typeof W=="function"?W:null,typeof F=="function"&&(v.port1.addEventListener("message",F),v.port1.start())}}),m.prototype.port=v.port1;let B=null;Dd(d,U,m,g).then(W=>B=W);const X=Tr(g.numberOfInputs,g.channelCount),j=Tr(g.numberOfOutputs,_),Z=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((W,{name:Y})=>({...W,[Y]:new Float32Array(128)}),{});let st=!0;const at=()=>{g.numberOfOutputs>0&&A.disconnect(T);for(let W=0,Y=0;W<g.numberOfOutputs;W+=1){const Vt=I[W];for(let Ct=0;Ct<_[W];Ct+=1)T.disconnect(Vt,Y+Ct,Ct);Y+=_[W]}},$=new Map;A.onaudioprocess=({inputBuffer:W,outputBuffer:Y})=>{if(B!==null){const Vt=h(U);for(let Ct=0;Ct<N;Ct+=128){for(let ot=0;ot<g.numberOfInputs;ot+=1)for(let Mt=0;Mt<g.channelCount;Mt+=1)br(W,X[ot],Mt,Mt,Ct);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:ot},Mt)=>{br(W,Z,ot,w+Mt,Ct)});for(let ot=0;ot<g.numberOfInputs;ot+=1)for(let Mt=0;Mt<_[ot];Mt+=1)j[ot][Mt].byteLength===0&&(j[ot][Mt]=new Float32Array(128));try{const ot=X.map((le,Xe)=>{if(Vt[Xe].size>0)return $.set(Xe,N/128),le;const yi=$.get(Xe);return yi===void 0?[]:(le.every(Gu=>Gu.every(Xu=>Xu===0))&&(yi===1?$.delete(Xe):$.set(Xe,yi-1)),le)});st=u(d.currentTime+Ct/d.sampleRate,d.sampleRate,()=>B.process(ot,j,Z));for(let le=0,Xe=0;le<g.numberOfOutputs;le+=1){for(let ss=0;ss<_[le];ss+=1)Zc(Y,j[le],ss,Xe+ss,Ct);Xe+=_[le]}}catch(ot){st=!1,U.dispatchEvent(new ErrorEvent("processorerror",{colno:ot.colno,filename:ot.filename,lineno:ot.lineno,message:ot.message}))}if(!st){for(let ot=0;ot<g.numberOfInputs;ot+=1){b[ot].disconnect(C[ot]);for(let Mt=0;Mt<g.channelCount;Mt+=1)C[Ct].disconnect(M,Mt,ot*g.channelCount+Mt)}if(m.parameterDescriptors!==void 0){const ot=m.parameterDescriptors.length;for(let Mt=0;Mt<ot;Mt+=1){const le=S[Mt];le.disconnect(M,0,w+Mt),le.stop()}}M.disconnect(A),A.onaudioprocess=null,Lt?at():ce();break}}}};let Lt=!1;const qt=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ae=()=>A.connect(qt).connect(d.destination),ce=()=>{A.disconnect(qt),qt.disconnect()},rn=()=>{if(st){ce(),g.numberOfOutputs>0&&A.connect(T);for(let W=0,Y=0;W<g.numberOfOutputs;W+=1){const Vt=I[W];for(let Ct=0;Ct<_[W];Ct+=1)T.connect(Vt,Y+Ct,Ct);Y+=_[W]}}Lt=!0},on=()=>{st&&(ae(),at()),Lt=!1};return ae(),f(U,rn,on)},Kc=(e,t)=>{const n=e.createBiquadFilter();return Pt(n,t),It(n,t,"Q"),It(n,t,"detune"),It(n,t,"frequency"),It(n,t,"gain"),bt(n,t,"type"),n},Vd=(e,t)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,r),Pt(r,s),r},Pd=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw zt()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw zt()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw zt()}})},Bs=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Pt(n,t),Pd(n),n},Fd=(e,t,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Pt(a,o),It(a,o,"offset"),t(s,()=>s(i))||vo(a),t(r,()=>r(i))||yo(a),e(i,a),a},Qn=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Ld=(e,t,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),d=()=>c.disconnect(l);return e(r,c),s(Qn(h,l),f,d)},qd=(e,t)=>(n,s)=>{const r=n.createConvolver();if(Pt(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),bt(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw e();return i.call(r,o)}),s.channelCountMode==="max"))throw e();return t(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw e();return i.call(r,o)}),r},Jc=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Pt(n,t),It(n,t,"delayTime"),n},zd=e=>(t,n)=>{const s=t.createDynamicsCompressor();if(Pt(s,n),n.channelCount>2||n.channelCountMode==="max")throw e();return It(s,n,"attack"),It(s,n,"knee"),It(s,n,"ratio"),It(s,n,"release"),It(s,n,"threshold"),s},ee=(e,t)=>{const n=e.createGain();return Pt(n,t),It(n,t,"gain"),n},Wd=e=>(t,n,s)=>{if(t.createIIRFilter===void 0)return e(t,n,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return Pt(r,s),r};function Bd(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function $d(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function Ta(e,t){let n=[0,0];for(let s=e.length-1;s>=0;s-=1)n=$d(n,t),n[0]+=e[s];return n}const Ud=(e,t,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=Qc(i,r.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),d=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=d.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(f[0]===0)throw t();if(m===0||m>20)throw s();if(d[0]===0)throw t();if(f[0]!==1){for(let S=0;S<m;S+=1)d[S]/=f[0];for(let S=1;S<p;S+=1)f[S]/=f[0]}const _=n(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const w=32,y=[],x=[],v=[];for(let S=0;S<o;S+=1){y.push(0);const M=new Float32Array(w),N=new Float32Array(w);M.fill(0),N.fill(0),x.push(M),v.push(N)}_.onaudioprocess=S=>{const M=S.inputBuffer,N=S.outputBuffer,A=M.numberOfChannels;for(let T=0;T<A;T+=1){const I=M.getChannelData(T),O=N.getChannelData(T);y[T]=Yc(f,p,d,m,g,x[T],v[T],y[T],w,I,O)}};const b=r.sampleRate/2;return Qn({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(S){_.channelCount=S},get channelCountMode(){return _.channelCountMode},set channelCountMode(S){_.channelCountMode=S},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(S){_.channelInterpretation=S},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...S){return _.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return _.dispatchEvent(S[0])},getFrequencyResponse(S,M,N){if(S.length!==M.length||M.length!==N.length)throw e();const A=S.length;for(let T=0;T<A;T+=1){const I=-Math.PI*(S[T]/b),O=[Math.cos(I),Math.sin(I)],z=Ta(d,O),R=Ta(f,O),P=Bd(z,R);M[T]=Math.sqrt(P[0]*P[0]+P[1]*P[1]),N[T]=Math.atan2(P[1],P[0])}},removeEventListener(...S){return _.removeEventListener(S[0],S[1],S[2])}},_)},jd=(e,t)=>e.createMediaElementSource(t.mediaElement),Hd=(e,t)=>{const n=e.createMediaStreamDestination();return Pt(n,t),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Gd=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=e.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},Xd=(e,t)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw e();if(t(n))throw new TypeError;return i},Zd=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,Yd=(e,t,n,s,r,i)=>(o,a)=>{const c=o.createOscillator();return Pt(c,a),It(c,a,"detune"),It(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):bt(c,a,"type"),t(n,()=>n(o))||vo(c),t(s,()=>s(o))||i(c,o),t(r,()=>r(o))||yo(c),e(o,c),c},Qd=e=>(t,n)=>{const s=t.createPanner();return s.orientationX===void 0?e(t,n):(Pt(s,n),It(s,n,"orientationX"),It(s,n,"orientationY"),It(s,n,"orientationZ"),It(s,n,"positionX"),It(s,n,"positionY"),It(s,n,"positionZ"),bt(s,n,"coneInnerAngle"),bt(s,n,"coneOuterAngle"),bt(s,n,"coneOuterGain"),bt(s,n,"distanceModel"),bt(s,n,"maxDistance"),bt(s,n,"panningModel"),bt(s,n,"refDistance"),bt(s,n,"rolloffFactor"),s)},Kd=(e,t,n,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:m,orientationX:g,orientationY:_,orientationZ:w,panningModel:y,positionX:x,positionY:v,positionZ:b,refDistance:C,rolloffFactor:S,...M})=>{const N=u.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw o();Pt(N,M);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},T=n(u,{...A,channelInterpretation:"speakers",numberOfInputs:6}),I=s(u,{...M,gain:1}),O=s(u,{...A,gain:1}),z=s(u,{...A,gain:0}),R=s(u,{...A,gain:0}),P=s(u,{...A,gain:0}),U=s(u,{...A,gain:0}),q=s(u,{...A,gain:0}),F=r(u,256,6,1),B=i(u,{...A,curve:new Float32Array([1,1]),oversample:"none"});let Q=[g,_,w],X=[x,v,b];const j=new Float32Array(1);F.onaudioprocess=({inputBuffer:$})=>{const Lt=[c($,j,0),c($,j,1),c($,j,2)];Lt.some((ae,ce)=>ae!==Q[ce])&&(N.setOrientation(...Lt),Q=Lt);const qt=[c($,j,3),c($,j,4),c($,j,5)];qt.some((ae,ce)=>ae!==X[ce])&&(N.setPosition(...qt),X=qt)},Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0});const Z={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount($){if($>2)throw o();I.channelCount=$,N.channelCount=$},get channelCountMode(){return N.channelCountMode},set channelCountMode($){if($==="max")throw o();I.channelCountMode=$,N.channelCountMode=$},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation($){I.channelInterpretation=$,N.channelInterpretation=$},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle($){N.coneInnerAngle=$},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle($){N.coneOuterAngle=$},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain($){if($<0||$>1)throw t();N.coneOuterGain=$},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel($){N.distanceModel=$},get inputs(){return[I]},get maxDistance(){return N.maxDistance},set maxDistance($){if($<0)throw new RangeError;N.maxDistance=$},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return z.gain},get orientationZ(){return R.gain},get panningModel(){return N.panningModel},set panningModel($){N.panningModel=$},get positionX(){return P.gain},get positionY(){return U.gain},get positionZ(){return q.gain},get refDistance(){return N.refDistance},set refDistance($){if($<0)throw new RangeError;N.refDistance=$},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor($){if($<0)throw new RangeError;N.rolloffFactor=$},addEventListener(...$){return I.addEventListener($[0],$[1],$[2])},dispatchEvent(...$){return I.dispatchEvent($[0])},removeEventListener(...$){return I.removeEventListener($[0],$[1],$[2])}};h!==Z.coneInnerAngle&&(Z.coneInnerAngle=h),f!==Z.coneOuterAngle&&(Z.coneOuterAngle=f),d!==Z.coneOuterGain&&(Z.coneOuterGain=d),p!==Z.distanceModel&&(Z.distanceModel=p),m!==Z.maxDistance&&(Z.maxDistance=m),g!==Z.orientationX.value&&(Z.orientationX.value=g),_!==Z.orientationY.value&&(Z.orientationY.value=_),w!==Z.orientationZ.value&&(Z.orientationZ.value=w),y!==Z.panningModel&&(Z.panningModel=y),x!==Z.positionX.value&&(Z.positionX.value=x),v!==Z.positionY.value&&(Z.positionY.value=v),b!==Z.positionZ.value&&(Z.positionZ.value=b),C!==Z.refDistance&&(Z.refDistance=C),S!==Z.rolloffFactor&&(Z.rolloffFactor=S),(Q[0]!==1||Q[1]!==0||Q[2]!==0)&&N.setOrientation(...Q),(X[0]!==0||X[1]!==0||X[2]!==0)&&N.setPosition(...X);const st=()=>{I.connect(N),e(I,B,0,0),B.connect(O).connect(T,0,0),B.connect(z).connect(T,0,1),B.connect(R).connect(T,0,2),B.connect(P).connect(T,0,3),B.connect(U).connect(T,0,4),B.connect(q).connect(T,0,5),T.connect(F).connect(u.destination)},at=()=>{I.disconnect(N),a(I,B,0,0),B.disconnect(O),O.disconnect(T),B.disconnect(z),z.disconnect(T),B.disconnect(R),R.disconnect(T),B.disconnect(P),P.disconnect(T),B.disconnect(U),U.disconnect(T),B.disconnect(q),q.disconnect(T),T.disconnect(F),F.disconnect(u.destination)};return l(Qn(Z,N),st,at)},Jd=e=>(t,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=t.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw e();return a},$s=(e,t,n,s)=>e.createScriptProcessor(t,n,s),tp=(e,t)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(n.createStereoPanner===void 0)return e(n,s);const i=n.createStereoPanner();return Pt(i,s),It(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw t()}}),i},ep=(e,t,n,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(p,m,g,_)=>{const w=new Float32Array(16385),y=new Float32Array(16385);for(let M=0;M<16385;M+=1){const N=M/16384*c;w[M]=Math.cos(N),y[M]=Math.sin(N)}const x=n(p,{...l,gain:0}),v=s(p,{...u,curve:w}),b=s(p,{...u,curve:a}),C=n(p,{...l,gain:0}),S=s(p,{...u,curve:y});return{connectGraph(){m.connect(x),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(C),b.connect(g),g.connect(v.inputs===void 0?v:v.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),v.connect(x.gain),S.connect(C.gain),x.connect(_,0,0),C.connect(_,0,1)},disconnectGraph(){m.disconnect(x),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(C),b.disconnect(g),g.disconnect(v.inputs===void 0?v:v.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),v.disconnect(x.gain),S.disconnect(C.gain),x.disconnect(_,0,0),C.disconnect(_,0,1)}}},f=(p,m,g,_)=>{const w=new Float32Array(16385),y=new Float32Array(16385),x=new Float32Array(16385),v=new Float32Array(16385),b=Math.floor(16385/2);for(let P=0;P<16385;P+=1)if(P>b){const U=(P-b)/(16384-b)*c;w[P]=Math.cos(U),y[P]=Math.sin(U),x[P]=0,v[P]=1}else{const U=P/(16384-b)*c;w[P]=1,y[P]=0,x[P]=Math.cos(U),v[P]=Math.sin(U)}const C=t(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=n(p,{...l,gain:0}),M=s(p,{...u,curve:w}),N=n(p,{...l,gain:0}),A=s(p,{...u,curve:y}),T=s(p,{...u,curve:a}),I=n(p,{...l,gain:0}),O=s(p,{...u,curve:x}),z=n(p,{...l,gain:0}),R=s(p,{...u,curve:v});return{connectGraph(){m.connect(C),m.connect(T.inputs===void 0?T:T.inputs[0]),C.connect(S,0),C.connect(N,0),C.connect(I,1),C.connect(z,1),T.connect(g),g.connect(M.inputs===void 0?M:M.inputs[0]),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),M.connect(S.gain),A.connect(N.gain),O.connect(I.gain),R.connect(z.gain),S.connect(_,0,0),I.connect(_,0,0),N.connect(_,0,1),z.connect(_,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(T.inputs===void 0?T:T.inputs[0]),C.disconnect(S,0),C.disconnect(N,0),C.disconnect(I,1),C.disconnect(z,1),T.disconnect(g),g.disconnect(M.inputs===void 0?M:M.inputs[0]),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),M.disconnect(S.gain),A.disconnect(N.gain),O.disconnect(I.gain),R.disconnect(z.gain),S.disconnect(_,0,0),I.disconnect(_,0,0),N.disconnect(_,0,1),z.disconnect(_,0,1)}}},d=(p,m,g,_,w)=>{if(m===1)return h(p,g,_,w);if(m===2)return f(p,g,_,w);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:_,...w})=>{if(g==="max")throw r();const y=e(p,{...w,channelCount:1,channelCountMode:g,numberOfInputs:2}),x=n(p,{...w,channelCount:m,channelCountMode:g,gain:1}),v=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:b,disconnectGraph:C}=d(p,m,x,v,y);Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"maxValue",{get:()=>1}),Object.defineProperty(v.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(T){x.channelCount!==T&&(M&&C(),{connectGraph:b,disconnectGraph:C}=d(p,T,x,v,y),M&&b()),x.channelCount=T},get channelCountMode(){return x.channelCountMode},set channelCountMode(T){if(T==="clamped-max"||T==="max")throw r();x.channelCountMode=T},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(T){x.channelInterpretation=T},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get pan(){return v.gain},addEventListener(...T){return x.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return x.dispatchEvent(T[0])},removeEventListener(...T){return x.removeEventListener(T[0],T[1],T[2])}};let M=!1;const N=()=>{b(),M=!0},A=()=>{C(),M=!1};return i(Qn(S,y),N,A)}},np=(e,t,n,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Pt(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw t();bt(l,{curve:u},"curve"),bt(l,c,"oversample");let h=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(s(g)&&h===null?h=e(a,l):!s(g)&&h!==null&&(h(),h=null)),g)),r(l,()=>{f=!0,s(l.curve)&&(h=e(a,l))},()=>{f=!1,h!==null&&(h(),h=null)})},sp=(e,t,n,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();Pt(l,c),Pt(u,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let m=null,g=!1,_=null;const w={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(v){h.channelCount=v,f.channelCount=v,l.channelCount=v,d.channelCount=v,u.channelCount=v,p.channelCount=v},get channelCountMode(){return l.channelCountMode},set channelCountMode(v){h.channelCountMode=v,f.channelCountMode=v,l.channelCountMode=v,d.channelCountMode=v,u.channelCountMode=v,p.channelCountMode=v},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(v){h.channelInterpretation=v,f.channelInterpretation=v,l.channelInterpretation=v,d.channelInterpretation=v,u.channelInterpretation=v,p.channelInterpretation=v},get context(){return l.context},get curve(){return _},set curve(v){if(v!==null&&v.length<2)throw t();if(v===null)l.curve=v,u.curve=v;else{const b=v.length,C=new Float32Array(b+2-b%2),S=new Float32Array(b+2-b%2);C[0]=v[0],S[0]=-v[b-1];const M=Math.ceil((b+1)/2),N=(b+1)/2-1;for(let A=1;A<M;A+=1){const T=A/M*N,I=Math.floor(T),O=Math.ceil(T);C[A]=I===O?v[I]:(1-(T-I))*v[I]+(1-(O-T))*v[O],S[A]=I===O?-v[b-1-I]:-((1-(T-I))*v[b-1-I])-(1-(O-T))*v[b-1-O]}C[M]=b%2===1?v[M-1]:(v[M-2]+v[M-1])/2,l.curve=C,u.curve=S}_=v,g&&(s(_)&&m===null?m=e(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(v){l.oversample=v,u.oversample=v},addEventListener(...v){return h.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return h.dispatchEvent(v[0])},removeEventListener(...v){return h.removeEventListener(v[0],v[1],v[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const y=()=>{h.connect(l).connect(d),h.connect(f).connect(u).connect(p).connect(d),g=!0,s(_)&&(m=e(i,h))},x=()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(d),g=!1,m!==null&&(m(),m=null)};return r(Qn(w,d),y,x)},Qt=()=>new DOMException("","NotSupportedError"),rp={numberOfChannels:1},ip=(e,t,n,s,r)=>class extends e{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:f}={...rp,...l},d=s(h,u,f);t(_s,()=>_s(d))||d.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(d,h),this._length=u,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Uc(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},op={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ap=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...op,...l},f=n(u,h),d=i(u),p=d?s():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=t(this,d,f.detune,153600,-153600),this._frequency=t(this,d,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Bn(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Le(this)&&qs(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},cp=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let f=n(u);const d=jt(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=t(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await e(h,u.detune,f.detune),await e(h,u.frequency,f.frequency)):(await s(h,u.detune,f.detune),await s(h,u.frequency,f.frequency)),await r(u,h,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):l(u,h)}}},lp={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},up=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...lp,...l},f=n(u,h),d=i(u),p=d?s():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=t(this,d,f.orientationX,Zt,Jt),this._orientationY=t(this,d,f.orientationY,Zt,Jt),this._orientationZ=t(this,d,f.orientationZ,Zt,Jt),this._positionX=t(this,d,f.positionX,Zt,Jt),this._positionY=t(this,d,f.positionY,Zt,Jt),this._positionZ=t(this,d,f.positionZ,Zt,Jt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},hp=(e,t,n,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const f=async(d,p)=>{let m=null,g=i(d);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={..._,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},y=jt(g,p);if("bufferSize"in g)m=s(p,{..._,gain:1});else if(!y){const x={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,x)}if(u.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new o(6,d.context.length,p.sampleRate),T=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});T.connect(A.destination),h=(async()=>{const I=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(O,z)=>{const R=n(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z===0?1:0});return await a(A,O,R.offset),R}));for(let O=0;O<6;O+=1)I[O].connect(T,0,O),I[O].start(0);return l(A)})()}const x=await h,v=s(p,{..._,gain:1});await c(d,p,v);const b=[];for(let A=0;A<x.numberOfChannels;A+=1)b.push(x.getChannelData(A));let C=[b[0][0],b[1][0],b[2][0]],S=[b[3][0],b[4][0],b[5][0]],M=s(p,{..._,gain:1}),N=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:S[0],positionY:S[1],positionZ:S[2]});v.connect(M).connect(N.inputs[0]),N.connect(m);for(let A=128;A<x.length;A+=128){const T=[b[0][A],b[1][A],b[2][A]],I=[b[3][A],b[4][A],b[5][A]];if(T.some((O,z)=>O!==C[z])||I.some((O,z)=>O!==S[z])){C=T,S=I;const O=A/p.sampleRate;M.gain.setValueAtTime(0,O),M=s(p,{..._,gain:0}),N=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),M.gain.setValueAtTime(1,O),v.connect(M).connect(N.inputs[0]),N.connect(m)}}return m}return y?(await e(p,d.orientationX,g.orientationX),await e(p,d.orientationY,g.orientationY),await e(p,d.orientationZ,g.orientationZ),await e(p,d.positionX,g.positionX),await e(p,d.positionY,g.positionY),await e(p,d.positionZ,g.positionZ)):(await a(p,d.orientationX,g.orientationX),await a(p,d.orientationY,g.orientationY),await a(p,d.orientationZ,g.orientationZ),await a(p,d.positionX,g.positionX),await a(p,d.positionY,g.positionY),await a(p,d.positionZ,g.positionZ)),Yn(g)?await c(d,p,g.inputs[0]):await c(d,p,g),g};return{render(d,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):f(d,p)}}},fp={disableNormalization:!1},dp=(e,t,n,s)=>class tl{constructor(i,o){const a=t(i),c=s({...fp,...o}),l=e(a,c);return n.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===tl.prototype||n.has(i)}},pp=(e,t)=>(n,s,r)=>(e(s).replay(r),t(s,n,r)),mp=(e,t,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await t(l).render(l,r),d=s.context.destination;!n(l)&&(s!==d||!n(s))&&f.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},gp=(e,t,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await e(a).render(a,r);n(a)||u.connect(i,c)}))},_p=(e,t,n,s)=>r=>e(_s,()=>_s(r))?Promise.resolve(e(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),vp=e=>(t,n)=>{e.set(t,n)},yp=e=>(t,n)=>e.set(t,n),wp=(e,t,n,s,r,i,o,a)=>(c,l)=>n(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>n(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),mo(u)):t(i,()=>i(u))||a(u),e.add(u),u)),bp={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Tp=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const l=r(a),u={...bp,...c},h=n(l,u),f=i(l),d=f?s():null;super(a,!1,h,d),this._pan=t(this,f,h.pan)}get pan(){return this._pan}},xp=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=n(a);const u=jt(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(c,h)}return i.set(c,l),u?await e(c,a.pan,l.pan):await s(c,a.pan,l.pan),Yn(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Cp=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},kp=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new e(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},Sp=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),s=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},Ap=()=>new DOMException("","UnknownError"),Np={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Mp=(e,t,n,s,r,i,o)=>class extends e{constructor(c,l){const u=r(c),h={...Np,...l},f=n(u,h),p=i(u)?s():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},Ip=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(o,l)}return s.set(o,a),Yn(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Ep=()=>typeof window>"u"?null:window,Op=(e,t)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},Dp=e=>t=>{t.copyFromChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyFromChannel),t.copyToChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyToChannel)},Rp=e=>(t,n)=>{const s=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),e(t,"buffer",r=>()=>{const i=r.call(t);return i===s?null:i},r=>i=>r.call(t,i===null?s:i))},Vp=(e,t)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=n.createBufferSource();t(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},el=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),nl=e=>{if(e===null)return!1;const t=e.length;return t%2!==0?e[Math.floor(t/2)]!==0:e[t/2-1]+e[t/2]!==0},Us=(e,t,n,s)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(i),set:s(o)})},Pp=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Fp=e=>({...e,channelCount:e.numberOfOutputs}),Lp=e=>{const{imag:t,real:n}=e;return t===void 0?n===void 0?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:n===void 0?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}},sl=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(s){if(s.code!==9)throw s;sl(e,t,n+1e-7)}},qp=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},zp=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},Wp=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},wo=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},rl=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},bo=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Bp=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},$p=e=>{e.start=(t=>(n=0,s=0,r)=>{const i=e.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,r)})(e.start)},il=(e,t)=>{const n=t.createGain();e.connect(n);const s=(r=>()=>{r.call(e,n),e.removeEventListener("ended",s)})(e.disconnect);e.addEventListener("ended",s),Qn(e,n),e.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(e,o),i=!0}})(e.stop)},Kn=(e,t)=>n=>{const s={value:e};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Up=lh(xn),jp=mh(xn),Hp=Nf(ei),ol=new WeakMap,Gp=Hf(ol),xe=sf(new Map,new WeakMap),Ie=Ep(),al=Td(xe,Oe),To=jf(Yt),Bt=mp(Yt,To,mn),Xp=wh(al,vt,Bt),ft=Zf(ti),Ue=Zd(Ie),ut=fd(Ue),cl=new WeakMap,ll=Lf(Kn),js=Sd(Ie),xo=cd(js),Co=ld(Ie),ul=ud(Ie),vs=Nd(Ie),Dt=jh(uh(Fc),ph(Up,jp,vr,Hp,yr,Yt,Gp,Ls,vt,xn,Le,mn,ar),xe,sd(Vi,yr,Yt,vt,gs,Le),Oe,ni,Qt,Cf(vr,Vi,Yt,vt,gs,ft,Le,ut),Ef(cl,Yt,Te),ll,ft,xo,Co,ul,ut,vs),Zp=yh(Dt,Xp,Oe,al,ft,ut),ko=new WeakSet,xa=xd(Ie),hl=_f(new Uint32Array(1)),So=Op(hl,Oe),Ao=Dp(hl),Yp=Th(ko,xe,Qt,xa,Ue,Cp(xa),So,Ao),si=gh(ee),fl=gp(To,zs,mn),De=hf(fl),Jn=kd(si,xe,qp,zp,Wp,wo,rl,bo,$p,Rp(Us),il),Re=pp(Gf(zs),fl),Qp=kh(De,Jn,vt,Re,Bt),Ce=Hh(hh(Lc),cl,po,Gh,sh,rh,ih,oh,ah,Oi,Vc,js,sl),Kp=Ch(Dt,Qp,Ce,zt,Jn,ft,ut,Kn),Jp=Rh(Dt,Vh,Oe,zt,Ad(ee,Us),ft,ut,Bt),tm=nf(De,Kc,vt,Re,Bt),Cn=yp(ol),em=ef(Dt,Ce,tm,ni,Kc,ft,ut,Cn),en=wd(xn,Co),nm=Vp(zt,en),nn=Vd(js,nm),sm=af(nn,vt,Bt),rm=of(Dt,sm,nn,ft,ut),im=uf(Bs,vt,Bt),om=lf(Dt,im,Bs,ft,ut,Fp),am=Ld(si,Jn,ee,en),ts=Fd(si,xe,am,wo,bo),cm=gf(De,ts,vt,Re,Bt),lm=mf(Dt,Ce,cm,ts,ft,ut,Kn),dl=qd(Qt,Us),um=wf(dl,vt,Bt),hm=yf(Dt,um,dl,ft,ut,Cn),fm=Af(De,Jc,vt,Re,Bt),dm=Sf(Dt,Ce,fm,Jc,ft,ut,Cn),pl=zd(Qt),pm=Vf(De,pl,vt,Re,Bt),mm=Rf(Dt,Ce,pm,pl,Qt,ft,ut,Cn),gm=$f(De,ee,vt,Re,Bt),_m=Bf(Dt,Ce,gm,ee,ft,ut),vm=Ud(ni,zt,$s,Qt),ri=_p(xe,ee,$s,Sp(ee,Ue)),ym=nd(Jn,vt,Ue,Bt,ri),wm=Wd(vm),bm=td(Dt,wm,ym,ft,ut,Cn),Tm=Ph(Ce,nn,ts,$s,Qt,el,ut,Us),ml=new WeakMap,xm=yd(Jp,Tm,ll,ut,ml,Kn),gl=Yd(si,xe,wo,rl,bo,il),Cm=cp(De,gl,vt,Re,Bt),km=ap(Dt,Ce,gl,Cm,ft,ut,Kn),_l=df(Jn),Sm=sp(_l,zt,ee,nl,en),ii=np(_l,zt,Sm,nl,en,js,Us),Am=Kd(vr,zt,nn,ee,$s,ii,Qt,yr,el,en),vl=Qd(Am),Nm=hp(De,nn,ts,ee,vl,vt,Ue,Re,Bt,ri),Mm=up(Dt,Ce,vl,Nm,ft,ut,Cn),Im=Jd(Oe),Em=dp(Im,ft,new WeakSet,Lp),Om=ep(nn,Bs,ee,ii,Qt,en),yl=tp(Om,Qt),Dm=xp(De,yl,vt,Re,Bt),Rm=Tp(Dt,Ce,yl,Dm,ft,ut),Vm=Ip(ii,vt,Bt),Pm=Mp(Dt,zt,ii,Vm,ft,ut,Cn),wl=dd(Ie),No=qf(Ie),bl=new WeakMap,Fm=Yf(bl,Ue),Lm=wl?dh(xe,Qt,Ff(Ie),No,zf(ch),ft,Fm,ut,vs,new WeakMap,new WeakMap,kp(vs,Ue),Ie):void 0,qm=hd(xo,ut),zm=xf(ko,xe,Tf,Pf,new WeakSet,ft,qm,gr,_s,So,Ao),Tl=Jh(Lm,Zp,Yp,Kp,em,rm,om,lm,hm,zm,dm,mm,_m,bm,xm,km,Mm,Em,Rm,Pm),Wm=pd(Dt,jd,ft,ut),Bm=gd(Dt,Hd,ft,ut),$m=_d(Dt,Gd,ft,ut),Um=Xd(zt,ut),jm=vd(Dt,Um,ft),Hm=Dh(Tl,zt,Qt,Ap,Wm,Bm,$m,jm,js),Mo=Qf(ml),Gm=_h(Mo),xl=ff(Oe),Xm=Mf(Mo),Cl=Of(Oe),kl=new WeakMap,Zm=Uf(kl,Te),Ym=Rd(xl,Oe,zt,nn,Bs,ts,ee,$s,Qt,Cl,No,Zm,en),Qm=Id(zt,Ym,ee,Qt,en),Km=Kh(De,xl,Jn,nn,Bs,ts,ee,Xm,Cl,No,vt,vs,Ue,Re,Bt,ri),Jm=Xf(bl),tg=vp(kl),Ca=wl?Zh(Gm,Dt,Ce,Km,Qm,Yt,Jm,ft,ut,vs,Pp,tg,Bp,Kn):void 0,eg=bf(Qt,Ue),ng=wp(ko,xe,To,Mo,ri,gr,So,Ao),sg=ip(Tl,xe,zt,eg,ng),rg=rd(ti,xo),ig=id(fo,Co),og=od(po,ul),ag=ad(ti,ut);function tt(e,t){if(!e)throw new Error(t)}function qe(e,t,n=1/0){if(!(t<=e&&e<=n))throw new RangeError(`Value must be within [${t}, ${n}], got: ${e}`)}function Sl(e){!e.isOffline&&e.state!=="running"&&Io('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Al=console;function cg(...e){Al.log(...e)}function Io(...e){Al.warn(...e)}function de(e){return typeof e>"u"}function rt(e){return!de(e)}function lg(e){return typeof e=="function"}function gn(e){return typeof e=="number"}function dn(e){return Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object}function ug(e){return typeof e=="boolean"}function be(e){return Array.isArray(e)}function Ee(e){return typeof e=="string"}function tr(e){return Ee(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function hg(e){return new Hm(e)}function fg(e,t,n){return new sg(e,t,n)}const pn=typeof self=="object"?self:null,dg=pn&&(pn.hasOwnProperty("AudioContext")||pn.hasOwnProperty("webkitAudioContext"));function pg(e,t,n){return tt(rt(Ca),"This node only works in a secure context (https or localhost)"),new Ca(e,t,n)}function ke(e,t,n,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function Rt(e,t,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(e,t||[])).next())})}class mg{constructor(t,n,s){this._callback=t,this._type=n,this._updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(t),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(t*1e3,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function _n(e){return og(e)}function Qe(e){return ig(e)}function cr(e){return ag(e)}function Mn(e){return rg(e)}function Nl(e){return e instanceof AudioBuffer}function gg(e,t){return e==="value"||_n(t)||Qe(t)||Nl(t)}function Vn(e,...t){if(!t.length)return e;const n=t.shift();if(dn(e)&&dn(n))for(const s in n)gg(s,n[s])?e[s]=n[s]:dn(n[s])?(e[s]||Object.assign(e,{[s]:{}}),Vn(e[s],n[s])):Object.assign(e,{[s]:n[s]});return Vn(e,...t)}function _g(e,t){return e.length===t.length&&e.every((n,s)=>t[s]===n)}function D(e,t,n=[],s){const r={},i=Array.from(t);if(dn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(e,a))||(Vn(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&dn(i[0]))Vn(r,i[0]);else for(let o=0;o<n.length;o++)rt(i[o])&&(r[n[o]]=i[o]);return Vn(e,r)}function vg(e){return e.constructor.getDefaults()}function Pn(e,t){return de(e)?t:e}function ka(e,t){return t.forEach(n=>{Reflect.has(e,n)&&delete e[n]}),e}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class je{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||pn&&this.toString()===pn.TONE_DEBUG_CLASS)&&cg(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}je.version=Rc;const Eo=1e-6;function xr(e,t){return e>t+Eo}function zi(e,t){return xr(e,t)||me(e,t)}function Ml(e,t){return e+Eo<t}function me(e,t){return Math.abs(e-t)<Eo}function yg(e,t,n){return Math.max(Math.min(e,n),t)}class Ve extends je{constructor(){super(),this.name="Timeline",this._timeline=[];const t=D(Ve.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(tt(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];tt(zi(t.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(t){const n=this._timeline.indexOf(t);return n!==-1&&this._timeline.splice(n,1),this}get(t,n="time"){const s=this._search(t,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,n="time"){const s=this._search(t,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<t)return this._timeline[n-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let n=this._search(t);if(n>=0)if(me(this._timeline[n].time,t)){for(let s=n;s>=0&&me(this._timeline[s].time,t);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&zi(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const n=this._search(t);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(t){const n=this._timeline.indexOf(t);return n>0?this._timeline[n-1]:null}_search(t,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=t)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(me(a[n],t)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(me(u[n],t))o=l;else break}return o}else{if(Ml(a[n],t)&&xr(c[n],t))return o;xr(a[n],t)?i=o:s=o+1}}return-1}_iterate(t,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,n){const s=this._search(t);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(t,n){const s=this._search(t);return this._iterate(n,s+1),this}forEachBetween(t,n,s){let r=this._search(t),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(t,n){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(n,s+1),this}forEachAtTime(t,n){const s=this._search(t);if(s!==-1&&me(this._timeline[s].time,t)){let r=s;for(let i=s;i>=0&&me(this._timeline[i].time,t);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Il=[];function oi(e){Il.push(e)}function wg(e){Il.forEach(t=>t(e))}const El=[];function ai(e){El.push(e)}function bg(e){El.forEach(t=>t(e))}class Hs extends je{constructor(){super(...arguments),this.name="Emitter"}on(t,n){return t.split(/\W+/).forEach(r=>{de(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(t,n){const s=(...r)=>{n(...r),this.off(t,s)};return this.on(t,s),this}off(t,n){return t.split(/\W+/).forEach(r=>{if(de(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(de(n))this._events[t]=[];else{const i=this._events[t];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(t,...n){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(t){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Hs.prototype,n);Object.defineProperty(t.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ol extends Hs{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Gs extends Ol{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ve,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=D(Gs.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=hg({latencyHint:t.latencyHint}),this._ticker=new mg(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(wg(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,n,s){return this._context.createBuffer(t,n,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,n){return this._context.createIIRFilter(t,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,n,s){return this._context.createPeriodicWave(t,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return tt(Mn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return tt(Mn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return tt(Mn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){tt(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){tt(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){tt(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){tt(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,n){return pg(this.rawContext,t,n)}addAudioWorkletModule(t,n){return Rt(this,void 0,void 0,function*(){tt(rt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(n)})}workletsAreReady(){return Rt(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(n=>t.push(n)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let n=0;if(this._latencyHint=t,Ee(t))switch(t){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Mn(this._context)?this._context.resume():Promise.resolve()}close(){return Rt(this,void 0,void 0,function*(){Mn(this._context)&&(yield this._context.close()),this._initialized&&bg(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=t;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(t,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(n=>{n.id===t&&this._timeouts.remove(n)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:i+n})};return r(),s}}class Tg extends Ol{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,n,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,n){return{}}createPanner(){return{}}createPeriodicWave(t,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,n){return{}}get rawContext(){return{}}addAudioWorkletModule(t,n){return Rt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,n){return 0}clearTimeout(t){return this}setInterval(t,n){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function kt(e,t){be(t)?t.forEach(n=>kt(e,n)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function Dl(e,t){be(t)?t.forEach(n=>Dl(e,n)):Object.defineProperty(e,t,{writable:!0})}const lt=()=>{};class ht extends je{constructor(){super(),this.name="ToneAudioBuffer",this.onload=lt;const t=D(ht.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&Nl(t.url)||t.url instanceof ht?this.set(t.url):Ee(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:lt,onload:lt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ye().sampleRate}set(t){return t instanceof ht?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Rt(this,void 0,void 0,function*(){const n=ht.load(t).then(s=>{this.set(s),this.onload(this)});ht.downloads.push(n);try{yield n}finally{const s=ht.downloads.indexOf(n);ht.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const n=be(t)&&t[0].length>0,s=n?t.length:1,r=n?t[0].length:t.length,i=ye(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[t]:t;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(gn(t))this.fromArray(this.toArray(t));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(t){if(gn(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,n=this.duration){const s=Math.floor(t*this.sampleRate),r=Math.floor(n*this.sampleRate);tt(s<r,"The start time must be less than the end time");const i=r-s,o=ye().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ht(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new ht().fromArray(t)}static fromUrl(t){return Rt(this,void 0,void 0,function*(){return yield new ht().load(t)})}static load(t){return Rt(this,void 0,void 0,function*(){const n=t.match(/\[([^\]\[]+\|.+)\]$/);if(n){const a=n[1].split("|");let c=a[0];for(const l of a)if(ht.supportsType(l)){c=l;break}t=t.replace(n[0],c)}const s=ht.baseUrl===""||ht.baseUrl.endsWith("/")?ht.baseUrl:ht.baseUrl+"/",r=yield fetch(s+t);if(!r.ok)throw new Error(`could not load url: ${t}`);const i=yield r.arrayBuffer();return yield ye().decodeAudioData(i)})}static supportsType(t){const n=t.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Rt(this,void 0,void 0,function*(){for(yield Promise.resolve();ht.downloads.length;)yield ht.downloads[0]})}}ht.baseUrl="";ht.downloads=[];class Oo extends Gs{constructor(){super({clockSource:"offline",context:cr(arguments[0])?arguments[0]:fg(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:cr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=cr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Rt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);t&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(t=!0){return Rt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const n=yield this._context.startRendering();return new ht(n)})}close(){return Promise.resolve()}}const Rl=new Tg;let Fn=Rl;function ye(){return Fn===Rl&&dg&&xg(new Gs),Fn}function xg(e){Mn(e)?Fn=new Gs(e):cr(e)?Fn=new Oo(e):Fn=e}function Cg(){return Fn.resume()}if(pn&&!pn.TONE_SILENCE_LOGGING){const t=` * Tone.js v${Rc} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function kg(e){return Math.pow(10,e/20)}function Vl(e){return 20*(Math.log(e)/Math.LN10)}function Pl(e){return Math.pow(2,e/12)}let ci=440;function Sg(){return ci}function Ag(e){ci=e}function Wi(e){return Math.round(Fl(e))}function Fl(e){return 69+12*Math.log2(e/ci)}function Ng(e){return ci*Math.pow(2,(e-69)/12)}class Do extends je{constructor(t,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,n)=>{const s=parseInt(t,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const n=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,n,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Do&&this.fromType(this._val),de(this._val))return this._noArg();if(Ee(this._val)&&de(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(dn(this._val)){let t=0;for(const n in this._val)if(rt(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;t+=r}return t}if(rt(this._units)){const t=this._expressions[this._units],n=this._val.toString().trim().match(t.regexp);return n?t.method.apply(this,n.slice(1)):t.method.call(this,this._val)}else return Ee(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class we extends Do{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const n=new we(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(t,n=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const t=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new we(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new we(this.context,i).toSeconds();Math.abs(o-t)<Math.abs(r-t)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let n=this.valueOf()/t;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Wi(this.toFrequency())}_now(){return this.context.now()}}class fe extends we{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Sg()}static set A4(t){Ag(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:fe.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,n){const r=Mg[t.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:fe.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,n,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new fe(this.context,this.valueOf()*Pl(t))}harmonize(t){return t.map(n=>this.transpose(n))}toMidi(){return Wi(this.valueOf())}toNote(){const t=this.toFrequency(),n=Math.log2(t/fe.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),Ig[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Ng(t)}static ftom(t){return Wi(t)}}const Mg={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Ig=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class ds extends we{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class te extends je{constructor(){super();const t=D(te.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ye()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new we(this.context,t).toSeconds()}toFrequency(t){return new fe(this.context,t).toFrequency()}toTicks(t){return new ds(this.context,t).toTicks()}_getPartialProperties(t){const n=this.get();return Object.keys(n).forEach(s=>{de(t[s])&&delete n[s]}),n}get(){const t=vg(this);return Object.keys(t).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];rt(s)&&rt(s.value)&&rt(s.setValueAtTime)?t[n]=s.value:s instanceof te?t[n]=s._getPartialProperties(t[n]):be(s)||gn(s)||Ee(s)||ug(s)?t[n]=s:delete t[n]}}),t}set(t){return Object.keys(t).forEach(n=>{Reflect.has(this,n)&&rt(this[n])&&(this[n]&&rt(this[n].value)&&rt(this[n].setValueAtTime)?this[n].value!==t[n]&&(this[n].value=t[n]):this[n]instanceof te?this[n].set(t[n]):this[n]=t[n])}),this}}class Ro extends Ve{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const n=this.get(t);return n!==null?n.state:this._initial}setStateAtTime(t,n,s){return qe(n,0),this.add(Object.assign({},s,{state:t,time:n})),this}getLastState(t,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===t)return i}}getNextState(t,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===t)return i}}}class wt extends te{constructor(){super(D(wt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=D(wt.getDefaults(),arguments,["param","units","convert"]);for(tt(rt(t.param)&&(_n(t.param)||t.param instanceof wt),"param must be an AudioParam");!_n(t.param);)t.param=t.param._param;this._swappable=rt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ve(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,rt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(te.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return rt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return rt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,n){return this.units===n}_assertRange(t){return rt(this.maxValue)&&rt(this.minValue)&&qe(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?kg(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?Vl(t):t}setValueAtTime(t,n){const s=this.toSeconds(n),r=this._fromType(t);return tt(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const n=Math.max(this.toSeconds(t),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let n=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,t),this}linearRampToValueAtTime(t,n){const s=this._fromType(t),r=this.toSeconds(n);return tt(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,n){let s=this._fromType(t);s=me(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return tt(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(n)),this}linearRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(n)),this}targetRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,n),this}exponentialApproachValueAtTime(t,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(t,n+s),this}setTargetAtTime(t,n,s){const r=this._fromType(t);tt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),tt(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(t,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(t){const n=this.toSeconds(t);return tt(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(t){const n=this.toSeconds(t),s=this._fromType(this.getValueAtTime(n));tt(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&me(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(t,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,n,s):this.linearRampTo(t,n,s),this}apply(t){const n=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){tt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(t),this._param=t,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,n,s,r,i){return s+(n-s)*Math.exp(-(i-t)/r)}_linearInterpolate(t,n,s,r,i){return n+(r-n)*((i-t)/(s-t))}_exponentialInterpolate(t,n,s,r,i){return n*Math.pow(r/n,(i-t)/(s-t))}}class nt extends te{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return rt(this.input)?_n(this.input)||this.input instanceof wt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return rt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return rt(t)&&(t instanceof nt||Qe(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();tt(t.length>0,"ToneAudioNode does not have any internal nodes");const n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))}connect(t,n=0,s=0){return es(this,t,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Io("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,n=0,s=0){return Eg(this,t,n,s),this}chain(...t){return Bi(this,...t),this}fan(...t){return t.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),rt(this.input)&&(this.input instanceof nt?this.input.dispose():Qe(this.input)&&this.input.disconnect()),rt(this.output)&&(this.output instanceof nt?this.output.dispose():Qe(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Bi(...e){const t=e.shift();e.reduce((n,s)=>(n instanceof nt?n.connect(s):Qe(n)&&es(n,s),s),t)}function es(e,t,n=0,s=0){for(tt(rt(e),"Cannot connect from undefined node"),tt(rt(t),"Cannot connect to undefined node"),(t instanceof nt||Qe(t))&&tt(t.numberOfInputs>0,"Cannot connect to node with no inputs"),tt(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof nt||t instanceof wt;)rt(t.input)&&(t=t.input);for(;e instanceof nt;)rt(e.output)&&(e=e.output);_n(t)?e.connect(t,n):e.connect(t,n,s)}function Eg(e,t,n=0,s=0){if(rt(t))for(;t instanceof nt;)t=t.input;for(;!Qe(e);)rt(e.output)&&(e=e.output);_n(t)?e.disconnect(t,n):Qe(t)?e.disconnect(t,n,s):e.disconnect()}class Wt extends nt{constructor(){super(D(Wt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=D(Wt.getDefaults(),arguments,["gain","units"]);this.gain=new wt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),kt(this,"gain")}static getDefaults(){return Object.assign(nt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class $n extends nt{constructor(t){super(t),this.onended=lt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Wt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(nt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:lt})}_startGain(t,n=1){tt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,t+s):this._gainNode.gain.exponentialApproachValueAtTime(n,t,s)):this._gainNode.gain.setValueAtTime(n,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){tt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==lt&&(this.onended(this),this.onended=lt,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),tt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Cr extends $n{constructor(){super(D(Cr.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=D(Cr.getDefaults(),arguments,["offset"]);es(this._source,this._gainNode),this.offset=new wt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign($n.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ft extends nt{constructor(){super(D(Ft.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=D(Ft.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Cr({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(nt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,n=0,s=0){return Vo(this,t,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,n){return this._param.setValueAtTime(t,n),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,n){return this._param.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,n){return this._param.exponentialRampToValueAtTime(t,n),this}exponentialRampTo(t,n,s){return this._param.exponentialRampTo(t,n,s),this}linearRampTo(t,n,s){return this._param.linearRampTo(t,n,s),this}targetRampTo(t,n,s){return this._param.targetRampTo(t,n,s),this}exponentialApproachValueAtTime(t,n,s){return this._param.exponentialApproachValueAtTime(t,n,s),this}setTargetAtTime(t,n,s){return this._param.setTargetAtTime(t,n,s),this}setValueCurveAtTime(t,n,s,r){return this._param.setValueCurveAtTime(t,n,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,n,s){return this._param.rampTo(t,n,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Vo(e,t,n,s){(t instanceof wt||_n(t)||t instanceof Ft&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ft&&(t.overridden=!0)),es(e,t,n,s)}class kr extends wt{constructor(){super(D(kr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ve(1/0),this._multiplier=1;const t=D(kr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(wt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(t),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+n,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(t,n){const s=this.toSeconds(n);super.setValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,n){n=this.toSeconds(n);const s=this._fromType(t),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,n,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(t,n){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(de(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const n=this.toSeconds(t),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const n=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(n&&n.ticks===t)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-t)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+n.time}else return n?n.value===0?1/0:n.time+(t-n.ticks)/n.value:t/this._initialValue}ticksToTime(t,n){return this.getDurationOfTicks(t,n)}timeToTicks(t,n){const s=this.toSeconds(n),r=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const n=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Sr extends Ft{constructor(){super(D(Sr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=D(Sr.getDefaults(),arguments,["value"]);this.input=this._param=new kr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,n){return this._param.ticksToTime(t,n)}timeToTicks(t,n){return this._param.timeToTicks(t,n)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,n){return this._param.getDurationOfTicks(t,n)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Ar extends te{constructor(){super(D(Ar.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ro,this._tickOffset=new Ve;const t=D(Ar.getDefaults(),arguments,["frequency"]);this.frequency=new Sr({context:this.context,units:t.units,value:t.frequency}),kt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},te.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,n){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),rt(n)&&this.setTicksAtTime(n,s)),this}stop(t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const n=this.toSeconds(t),s=this._state.getLastState("stopped",n),r={state:"paused",time:n};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,n+this.sampleTime,a=>{let c=i.time;const l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(o=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const n=this.now(),s=this.frequency.timeToTicks(t,n);this.setTicksAtTime(s,n)}getSecondsAtTime(t){t=this.toSeconds(t);const n=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let r=n,i=0;return this._state.forEachBetween(n.time,t+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(t,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,n),ticks:t,time:n}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,n,s){let r=this._state.get(t);this._state.forEachBetween(t,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=me(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ys extends te{constructor(){super(D(ys.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=lt,this._lastUpdate=0,this._state=new Ro("stopped"),this._boundLoop=this._loop.bind(this);const t=D(ys.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new Ar({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,kt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(te.getDefaults(),{callback:lt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,n){Sl(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(t){const n=this.toSeconds(t);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,n){return this._tickSource.setTicksAtTime(t,n),this}getTimeOfTick(t,n=this.now()){return this._tickSource.getTimeOfTick(t,n)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",t,n),t!==n&&(this._state.forEachBetween(t,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Hs.mixin(ys);class li extends je{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=D(li.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(n=>{this._loadingCount++;const s=t.urls[n];this.add(n,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:lt,onload:lt,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return tt(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,n])=>n.loaded)}add(t,n,s=lt,r=lt){return Ee(n)?this._buffers.set(t.toString(),new ht(this.baseUrl+n,s,r)):this._buffers.set(t.toString(),new ht(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Fe extends ds{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Og extends te{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ve,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,n){return this._events.add({callback:t,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const n=this._events.shift();n&&t-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}oi(e=>{e.draw=new Og({context:e})});ai(e=>{e.draw.dispose()});class Dg extends je{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){tt(rt(t.time),"Events must have a time property"),tt(rt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let n=new Rg(t.time,t.time+t.duration,t);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(t){if(this._root!==null){const n=[];this._root.search(t.time,n);for(const s of n)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,n=>this.remove(n)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,n){t.parent!==null?(t.isLeftChild()?t.parent.left=n:t.parent.right=n,this._rebalance(t.parent)):this._setRoot(n)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const n=t.getBalance();let s,r=null;if(n>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const n=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(t){const n=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(t){const n=t.getBalance();n>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):n<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const n=[];if(this._root.search(t,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(t){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,n){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(t,n){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Rg{constructor(t,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=n,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,n){t>this.max||(this.left!==null&&this.left.search(t,n),this.low<=t&&this.high>t&&n.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,n))}searchAfter(t,n){this.low>=t&&(n.push(this),this.left!==null&&this.left.searchAfter(t,n)),this.right!==null&&this.right.searchAfter(t,n)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ke extends nt{constructor(){super(D(Ke.getDefaults(),arguments,["volume"])),this.name="Volume";const t=D(Ke.getDefaults(),arguments,["volume"]);this.input=this.output=new Wt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,kt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Nr extends nt{constructor(){super(D(Nr.getDefaults(),arguments)),this.name="Destination",this.input=new Ke({context:this.context}),this.output=new Wt({context:this.context}),this.volume=this.input.volume;const t=D(Nr.getDefaults(),arguments);Bi(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Bi(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}oi(e=>{e.destination=new Nr({context:e})});ai(e=>{e.destination.dispose()});class Vg extends je{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ve({memory:10}),this._initialValue=t}set(t,n){return this._timeline.add({value:t,time:n}),this}get(t){const n=this._timeline.get(t);return n?n.value:this._initialValue}}class Je{constructor(t,n){this.id=Je._eventId++;const s=Object.assign(Je.getDefaults(),n);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:lt,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Je._eventId=0;class Po extends Je{constructor(t,n){super(t,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Po.getDefaults(),n);this.duration=new Fe(t.context,s.duration).valueOf(),this._interval=new Fe(t.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Je.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const n=this.transport.getTicksAtTime(t);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Fe(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(t);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Fe(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Fe(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let Mr=class extends te{constructor(){super(D(Mr.getDefaults(),arguments)),this.name="Transport",this._loop=new Vg(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ve,this._repeatedEvents=new Dg,this._syncedSignals=[],this._swingAmount=0;const t=D(Mr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ys({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),kt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(te.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,n){if(this._loop.get(t)&&n>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),n=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new Fe(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(n,s=>s.invoke(t))}schedule(t,n){const s=new Je(this,{callback:t,time:new ds(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,n,s,r=1/0){const i=new Po(this,{callback:t,duration:new we(this.context,r).toTicks(),interval:new we(this.context,n).toTicks(),time:new ds(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,n){const s=new Je(this,{callback:t,once:!0,time:new ds(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const n=this._scheduledEvents[t.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,n){return this._scheduledEvents[t.id.toString()]={event:t,timeline:n},n.add(t),t.id}cancel(t=0){const n=this.toTicks(t);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,n)=>{n=new Fe(this.context,n).toSeconds(),this.emit("start",t,n)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,n){let s;return rt(n)&&(s=this.toTicks(n)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){be(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new we(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new we(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Fe(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),n=this._clock.getTicksAtTime(t);return new Fe(this.context,n).toBarsBeatsSixteenths()}set position(t){const n=this.toTicks(t);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(t){const n=this.now(),s=this._clock.frequency.timeToTicks(t,n);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,n)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=t-s%t;return this._clock.nextTickTime(r,n)}}syncSignal(t,n){if(!n){const r=this.now();if(t.getValueAtTime(r)!==0){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);n=t.getValueAtTime(r)/o}else n=0}const s=new Wt(n);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===t&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Dl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Hs.mixin(Mr);oi(e=>{e.transport=new Mr({context:e})});ai(e=>{e.transport.dispose()});class ne extends nt{constructor(t){super(t),this.input=void 0,this._state=new Ro("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=lt,this._syncedStop=lt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ke({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,onstop:lt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,n,s){let r=de(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")tt(xr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Pn(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Sl(this.context),this._start(r,n,s);return this}stop(t){let n=de(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||rt(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(t,n,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,n)=>{if(n>0){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=t=>{const n=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=lt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ws extends $n{constructor(){super(D(ws.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=D(ws.getDefaults(),arguments,["url","onload"]);es(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new wt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ht(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign($n.getDefaults(),{url:new ht,loop:!1,loopEnd:0,loopStart:0,onload:lt,onerror:lt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,n,s,r=1){tt(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),this.loop?n=Pn(n,this.loopStart):n=Pn(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;zi(o,a)&&(o=(o-c)%l+c),me(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ml(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),rt(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function kn(e,t){return Rt(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,s=new Oo(1,n,e.context.sampleRate);return new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Ir extends $n{constructor(){super(D(Ir.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=D(Ir.getDefaults(),arguments,["frequency","type"]);es(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new wt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new wt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),kt(this,["frequency","detune"])}static getDefaults(){return Object.assign($n.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ot extends ne{constructor(){super(D(Ot.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=D(Ot.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),kt(this,"frequency"),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),kt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const n=this.toSeconds(t),s=new Ir({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(t){const n=this.toSeconds(t);this._oscillator&&this._oscillator.stop(n)}_restart(t){const n=this.toSeconds(t);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ot._periodicWaveCache.find(n=>n.phase===this._phase&&_g(n.partials,this._partials));{const t=Ot._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const n=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(rt(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ot._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ot._periodicWaveCache.length>100&&Ot._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){qe(t,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")t===0?this.type=n:this.type=n+t.toString();else{const r=new Float32Array(t);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(t==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),t=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(t){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}u!==0?(i[c]=-u*Math.sin(n*c),o[c]=u*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(t,n,s){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[t,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(t,n,o/i*r),s);return yg(-this._inverseFFT(t,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ot._periodicWaveCache=[];class ui extends nt{constructor(){super(Object.assign(D(ui.getDefaults(),arguments,["context"])))}connect(t,n=0,s=0){return Vo(this,t,n,s),this}}class bs extends ui{constructor(){super(Object.assign(D(bs.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=D(bs.getDefaults(),arguments,["mapping","length"]);be(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):lg(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ft.getDefaults(),{length:1024})}setMap(t,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=t(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const n=["none","2x","4x"].some(s=>s.includes(t));tt(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pg extends ui{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new bs({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class vn extends Ft{constructor(){super(Object.assign(D(vn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=D(vn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Wt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ts extends ne{constructor(){super(D(Ts.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Pg({context:this.context}),this._modulationNode=new Wt({context:this.context});const t=D(Ts.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new vn({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),kt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class xs extends ne{constructor(){super(D(xs.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Wt({context:this.context,gain:0});const t=D(xs.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new vn({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new vn({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),kt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Un extends ne{constructor(){super(D(Un.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Wt({context:this.context,gain:0}),this._thresh=new bs({context:this.context,mapping:n=>n<=0?-1:1});const t=D(Un.getDefaults(),arguments,["frequency","width"]);this.width=new Ft({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),kt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Cs extends ne{constructor(){super(D(Cs.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=D(Cs.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,kt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(n=>n.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(n=>n.stop(t))}_restart(t){this._forEach(n=>n.restart(t))}_forEach(t){for(let n=0;n<this._oscillators.length;n++)t(this._oscillators[n],n)}get type(){return this._type}set type(t){this._type=t,this._forEach(n=>n.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const n=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(t){if(qe(t,1),this._oscillators.length!==t){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<t;n++){const s=new Ot({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):lt});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(n=>n.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(n=>n.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(n=>n.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class ks extends ne{constructor(){super(D(ks.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new vn({context:this.context,value:2});const t=D(ks.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Un({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),kt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ne.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Sa={am:Ts,fat:Cs,fm:xs,oscillator:Ot,pulse:Un,pwm:ks};class Ss extends ne{constructor(){super(D(Ss.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=D(Ss.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),kt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ot.getDefaults(),xs.getDefaults(),Ts.getDefaults(),Cs.getDefaults(),Un.getDefaults(),ks.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const n=Sa[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),t==="fm"?this.type="fm"+n:t==="am"?this.type="am"+n:t==="fat"?this.type="fat"+n:t==="oscillator"?this.type=n:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,n){return t instanceof Sa[n]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&gn(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&gn(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ee(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return kn(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Ll(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){qe(i,e,t),n.set(this,i)}})}}function He(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){qe(this.toSeconds(i),e,t),n.set(this,i)}})}}class jn extends ne{constructor(){super(D(jn.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=D(jn.getDefaults(),arguments,["url","onload"]);this._buffer=new ht({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ne.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:lt,onerror:lt,playbackRate:1,reverse:!1})}load(t){return Rt(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=lt){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,n,s){return super.start(t,n,s),this}_start(t,n,s){this._loop?n=Pn(n,this._loopStart):n=Pn(n,0);const r=this.toSeconds(n),i=s;s=Pn(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,t=this.toSeconds(t);const a=new ws({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&de(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const n=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(n))}restart(t,n,s){return super.restart(t,n,s),this}_restart(t,n,s){this._stop(t),this._start(t,n,s)}seek(t,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&qe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&qe(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(n=>{n.loop=t}),t)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,n)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ke([He(0)],jn.prototype,"fadeIn",void 0);ke([He(0)],jn.prototype,"fadeOut",void 0);class Er extends nt{constructor(){super(D(Er.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=D(Er.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Ke({context:this.context,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume"),this._buffers=new li({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ne.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:lt,onerror:lt,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(n=>{n.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(n=>{n.fadeOut=t})}get state(){return Array.from(this._players).some(([n,s])=>s.state==="started")?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(tt(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const n=new jn({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,n)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,n,s){return tt(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,n,s),this}stopAll(t){return this._players.forEach(n=>n.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=>t.dispose()),this._buffers.dispose(),this}}class ze extends nt{constructor(){super(D(ze.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ft({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=D(ze.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(nt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,n){if(Ee(t))return t;{let s;for(s in er)if(er[s][n]===t)return s;return t}}_setCurve(t,n,s){if(Ee(s)&&Reflect.has(er,s)){const r=er[s];dn(r)?t!=="_decayCurve"&&(this[t]=r[n]):this[t]=r}else if(be(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){tt(["linear","exponential"].some(n=>n===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,n=1){this.log("triggerAttack",t,n),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(n,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,t);else{this._sig.cancelAndHoldAtTime(t);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,t,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=t+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const n=this.getValueAtTime(t);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(tt(be(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,n))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,n=0,s=0){return Vo(this,t,n,s),this}asArray(t=1024){return Rt(this,void 0,void 0,function*(){const n=t/this.context.sampleRate,s=new Oo(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ke([He(0)],ze.prototype,"attack",void 0);ke([He(0)],ze.prototype,"decay",void 0);ke([Ll(0,1)],ze.prototype,"sustain",void 0);ke([He(0)],ze.prototype,"release",void 0);const er=(()=>{let t,n;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/(128-1)*(Math.PI/2));const r=[],i=6.4;for(t=0;t<128-1;t++){n=t/(128-1);const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[t]=f/10+n*.83}r[128-1]=1;const o=[],a=5;for(t=0;t<128;t++)o[t]=Math.ceil(t/(128-1)*a)/a;const c=[];for(t=0;t<128;t++)n=t/(128-1),c[t]=.5*(1-Math.cos(Math.PI*n));const l=[];for(t=0;t<128;t++){n=t/(128-1);const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);l[t]=Math.abs(d*(1-n))}function u(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();class yn extends nt{constructor(){super(D(yn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=D(yn.getDefaults(),arguments);this._volume=this.output=new Ke({context:this.context,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume")}static getDefaults(){return Object.assign(nt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,n){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class wn extends yn{constructor(){super(D(wn.getDefaults(),arguments));const t=D(wn.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(yn.getDefaults(),{detune:0,onsilence:lt,portamento:0})}triggerAttack(t,n,s=1){this.log("triggerAttack",t,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const n=this.toSeconds(t);return this._triggerEnvelopeRelease(n),this}setNote(t,n){const s=this.toSeconds(n),r=t instanceof fe?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}ke([He(0)],wn.prototype,"portamento",void 0);class Fo extends ze{constructor(){super(D(Fo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Wt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class As extends wn{constructor(){super(D(As.getDefaults(),arguments)),this.name="Synth";const t=D(As.getDefaults(),arguments);this.oscillator=new Ss(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Fo(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),kt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(wn.getDefaults(),{envelope:Object.assign(ka(ze.getDefaults(),Object.keys(nt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ka(Ss.getDefaults(),[...Object.keys(ne.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,n){if(this.envelope.triggerAttack(t,n),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ns extends As{constructor(){super(D(Ns.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=D(Ns.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,kt(this,["oscillator","envelope"])}static getDefaults(){return Vn(wn.getDefaults(),As.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,n){const s=this.toSeconds(n),r=this.toFrequency(t instanceof fe?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ke([Ll(0)],Ns.prototype,"octaves",void 0);ke([He(0)],Ns.prototype,"pitchDecay",void 0);const ql=new Set;function Lo(e){ql.add(e)}function zl(e,t){const n=`registerProcessor("${e}", ${t})`;ql.add(n)}const Fg=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Lo(Fg);const Lg=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Lo(Lg);const qg=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Lo(qg);const zg="feedback-comb-filter",Wg=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;zl(zg,Wg);class Ms extends yn{constructor(){super(D(Ms.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=D(Ms.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(tt(tr(s)||gn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),tr(s)){const i=new fe(this.context,s).toMidi();n[i]=t.urls[s]}else gn(r)&&isFinite(r)&&(n[r]=t.urls[r])}),this._buffers=new li({urls:n,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(yn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:lt,onerror:lt,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,n,s=1){return this.log("triggerAttack",t,n,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=Fl(new fe(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=Pl(c+a),f=new ws({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,u.duration/h,s),be(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(t,n){return this.log("triggerRelease",t,n),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new fe(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const n=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(t,i,r),be(n)?(tt(be(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(t,i+this.toSeconds(n)),this}add(t,n,s){if(tt(tr(t)||isFinite(t),`note must be a pitch or midi: ${t}`),tr(t)){const r=new fe(this.context,t).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(t,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}ke([He(0)],Ms.prototype,"attack",void 0);ke([He(0)],Ms.prototype,"release",void 0);class Or extends nt{constructor(){super(Object.assign(D(Or.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=D(Or.getDefaults(),arguments,["pan"]);this.pan=new wt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",kt(this,"pan")}static getDefaults(){return Object.assign(nt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Bg="bit-crusher",$g=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;zl(Bg,$g);class Dr extends nt{constructor(){super(D(Dr.getDefaults(),arguments,["channels"])),this.name="Split";const t=D(Dr.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(nt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Is extends nt{constructor(){super(D(Is.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=D(Is.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Wt({context:this.context}),this._split=new Dr({context:this.context,channels:t.channels}),this.input.connect(this._split),qe(t.channels,1);for(let n=0;n<t.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(nt.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,n)=>{const s=this._buffers[n];this._type==="fft"?t.getFloatFrequencyData(s):this._type==="waveform"&&t.getFloatTimeDomainData(s)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((n,s)=>{n.fftSize=t*2,this._buffers[s]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){tt(t==="waveform"||t==="fft",`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(n=>n.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Rr extends nt{constructor(){super(D(Rr.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Is({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Es extends Rr{constructor(){super(D(Es.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const t=D(Es.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Is({context:this.context,size:256,type:"waveform",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(Rr.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return Io("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),s=(this.channels===1?[t]:t).map(r=>{const i=r.reduce((a,c)=>a+c*c,0),o=Math.sqrt(i/r.length);return this._rms=Math.max(o,this._rms*this.smoothing),this.normalRange?this._rms:Vl(this._rms)});return this.channels===1?s[0]:s}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Et extends nt{constructor(){super(D(Et.getDefaults(),arguments,["solo"])),this.name="Solo";const t=D(Et.getDefaults(),arguments,["solo"]);this.input=this.output=new Wt({context:this.context}),Et._allSolos.has(this.context)||Et._allSolos.set(this.context,new Set),Et._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(nt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Et._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Et._soloed.has(this.context)||Et._soloed.set(this.context,new Set),Et._soloed.get(this.context).add(this)}_removeSolo(){Et._soloed.has(this.context)&&Et._soloed.get(this.context).delete(this)}_isSoloed(){return Et._soloed.has(this.context)&&Et._soloed.get(this.context).has(this)}_noSolos(){return!Et._soloed.has(this.context)||Et._soloed.has(this.context)&&Et._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Et._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Et._allSolos=new Map;Et._soloed=new Map;class Vr extends nt{constructor(){super(D(Vr.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=D(Vr.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Or({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ke({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,kt(this,["pan","volume"])}static getDefaults(){return Object.assign(nt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class fn extends nt{constructor(){super(D(fn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=D(fn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Et({solo:t.solo,context:this.context}),this._panVol=this.output=new Vr({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),kt(this,["pan","volume"])}static getDefaults(){return Object.assign(nt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return fn.buses.has(t)||fn.buses.set(t,new Wt({context:this.context})),fn.buses.get(t)}send(t,n=0){const s=this._getBus(t),r=new Wt({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}fn.buses=new Map;class Ug extends nt{constructor(){super(...arguments),this.name="Listener",this.positionX=new wt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new wt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new wt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new wt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new wt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new wt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new wt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new wt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new wt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(nt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}oi(e=>{e.listener=new Ug({context:e})});ai(e=>{e.listener.dispose()});const Aa=ye().transport;ye().destination;ye().destination;ye().listener;ye().draw;ye();const jg=""+new URL("../../assets/NOLIMITER_01_DRUMS_FX_230110-fe231856.wav",import.meta.url).href,Hg=""+new URL("../../assets/NOLIMITER_02_BEAT_FX_230110-1aede4ec.wav",import.meta.url).href,Gg=""+new URL("../../assets/NOLIMITER_03_PIANO_FX_230110-3aef24fc.wav",import.meta.url).href,Xg=""+new URL("../../assets/NOLIMITER_04_LEAD_SYNTH_FX_230110-fb4bdfc8.wav",import.meta.url).href,Zg=""+new URL("../../assets/NOLIMITER_05_BASS_ELECTRIC_FX_230110-e39bdb32.wav",import.meta.url).href,Yg=""+new URL("../../assets/NOLIMITER_06_BASS_SYNTH_FX_230110-e723d489.wav",import.meta.url).href,Qg=""+new URL("../../assets/NOLIMITER_07_STRINGS_FX_230110-6c14d1dc.wav",import.meta.url).href,Kg=""+new URL("../../assets/NOLIMITER_08_ORGAN_FX_230110-df5001c9.wav",import.meta.url).href,Jg=""+new URL("../../assets/NOLIMITER_09_SHAKER_FX_230110-4b21317d.wav",import.meta.url).href,t_=""+new URL("../../assets/NOLIMITER_10_CLAP_FX_230110-25a01a15.wav",import.meta.url).href,bi=["drums","lead","bass","pad","shaker"],se=["drums_drumkit","drums_beat","lead_piano","lead_synth","bass_electric","bass_synth","pad_strings","pad_organ","shaker_tamb","shaker_claps"],e_={[se[0]]:jg,[se[1]]:Hg,[se[2]]:Gg,[se[3]]:Xg,[se[4]]:Zg,[se[5]]:Yg,[se[6]]:Qg,[se[7]]:Kg,[se[8]]:Jg,[se[9]]:t_};function Na(e,{delay:t=0,duration:n=400,easing:s=Zu}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:i=>`opacity: ${i*r}`}}function n_(e){let t;return{c(){t=H("div"),this.h()},l(n){t=G(n,"DIV",{class:!0,style:!0}),V(t).forEach(E),this.h()},h(){k(t,"class","circle svelte-dqjlks"),Xt(t,"--size",e[3]+e[1]),Xt(t,"--color",e[0]),Xt(t,"--duration",e[2]),dr(t,"pause-animation",e[4])},m(n,s){it(n,t,s)},p(n,[s]){s&10&&Xt(t,"--size",n[3]+n[1]),s&1&&Xt(t,"--color",n[0]),s&4&&Xt(t,"--duration",n[2]),s&16&&dr(t,"pause-animation",n[4])},i:K,o:K,d(n){n&&E(t)}}}function s_(e,t,n){let{color:s="#FF3E00"}=t,{unit:r="px"}=t,{duration:i="0.75s"}=t,{size:o="60"}=t,{pause:a=!1}=t;return e.$$set=c=>{"color"in c&&n(0,s=c.color),"unit"in c&&n(1,r=c.unit),"duration"in c&&n(2,i=c.duration),"size"in c&&n(3,o=c.size),"pause"in c&&n(4,a=c.pause)},[s,r,i,o,a]}let r_=class extends St{constructor(t){super(),At(this,t,s_,n_,Nt,{color:0,unit:1,duration:2,size:3,pause:4})}};const Ma=/[a-zA-Z]/,Ia=(e,t=0)=>[...Array(e).keys()].map(n=>n+t);function Ea(e,t,n){const s=e.slice();return s[7]=t[n],s}function Oa(e){let t;return{c(){t=H("div"),this.h()},l(n){t=G(n,"DIV",{class:!0,style:!0}),V(t).forEach(E),this.h()},h(){k(t,"class","dot svelte-14x3x60"),Xt(t,"--dotSize",+e[3]*.25+e[1]),Xt(t,"--color",e[0]),Xt(t,"animation-delay",e[7]*(+e[6]/10)+e[5]),dr(t,"pause-animation",e[4])},m(n,s){it(n,t,s)},p(n,s){s&10&&Xt(t,"--dotSize",+n[3]*.25+n[1]),s&1&&Xt(t,"--color",n[0]),s&16&&dr(t,"pause-animation",n[4])},d(n){n&&E(t)}}}function i_(e){let t,n=Ia(3,1),s=[];for(let r=0;r<n.length;r+=1)s[r]=Oa(Ea(e,n,r));return{c(){t=H("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){t=G(r,"DIV",{class:!0,style:!0});var i=V(t);for(let o=0;o<s.length;o+=1)s[o].l(i);i.forEach(E),this.h()},h(){k(t,"class","wrapper svelte-14x3x60"),Xt(t,"--size",e[3]+e[1]),Xt(t,"--duration",e[2])},m(r,i){it(r,t,i);for(let o=0;o<s.length;o+=1)s[o].m(t,null)},p(r,[i]){if(i&123){n=Ia(3,1);let o;for(o=0;o<n.length;o+=1){const a=Ea(r,n,o);s[o]?s[o].p(a,i):(s[o]=Oa(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}i&10&&Xt(t,"--size",r[3]+r[1]),i&4&&Xt(t,"--duration",r[2])},i:K,o:K,d(r){r&&E(t),Oc(s,r)}}}function o_(e,t,n){var u;let{color:s="#FF3E00"}=t,{unit:r="px"}=t,{duration:i="0.6s"}=t,{size:o="60"}=t,{pause:a=!1}=t,c=((u=i.match(Ma))==null?void 0:u[0])??"s",l=i.replace(Ma,"");return e.$$set=h=>{"color"in h&&n(0,s=h.color),"unit"in h&&n(1,r=h.unit),"duration"in h&&n(2,i=h.duration),"size"in h&&n(3,o=h.size),"pause"in h&&n(4,a=h.pause)},[s,r,i,o,a,c,l]}class a_ extends St{constructor(t){super(),At(this,t,o_,i_,Nt,{color:0,unit:1,duration:2,size:3,pause:4})}}function c_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","m111 58.3-87.37.4-.61 8.3L192.4 92.6l1.8-8.1zm310.8 18.8-.3 29.7 5-.8 4.9.8-.3-29.7zM96.33 92.8l-1.81 13-33.17 26.4 1.84 115.6 6.16-40.4 9.55-2.3h.28l-1.03-65 31.95-25.4 2.7-19.4zm330.17 25.9-66.6 10.4.6 8.3h132l.6-8.3zm-66 33.3-.6 8.3 66.6 10.4 66.6-10.4-.6-8.3zm60.3 30.5-.2 20.8c2.8.5 5.6 1.2 8.5 1.8l3.3.8-.2-23.4-5.7.9zm-287.4 30.7c-16.5-.2-33.5 1.9-51.1 6.1l-2.86 18.8c23.26-3.3 75.96-6.9 127.56 14.6 4-1.6 8.2-3.1 12.4-4.3l1.2-8c-26.6-18.2-55.8-26.8-87.2-27.2zm241.2 0c-31.4.4-60.6 9-87.2 27.2l1.2 8c4.2 1.2 8.4 2.7 12.4 4.3 51.6-21.5 104.3-17.9 127.6-14.6l-2.9-18.8c-17.6-4.2-34.6-6.3-51.1-6.1zm-258.1 39c-17.91 0-32.1 1.8-39.69 3.1l-7.05 46.3 72.94 11.1c10.1-20.3 25.5-37.5 44.5-49.6-25.4-8.5-50.4-10.9-70.7-10.9zm275 0c-20.3 0-45.3 2.4-70.7 10.9 19 12.1 34.4 29.3 44.5 49.6l72.9-11.1-7-46.3c-7.6-1.3-21.8-3.1-39.7-3.1zm-137.5 10c-49.9 0-90.4 40.5-90.4 90.4 0 49.9 40.5 90.4 90.4 90.4 49.9 0 90.4-40.5 90.4-90.4 0-49.9-40.5-90.4-90.4-90.4zM64.27 315.5l1.36 85.5-46.73 87h18.94l33.24-62 15.19 62h17.23l-21.19-86-1.33-84zM433.6 317l-14.2 2.2-.8 74.1-24.2 55.7 7.4 25 24.7-57 30.9 71h18.2l-41.2-94.7zm-279.7 11.6c-4.7 12.1-7.2 25.2-7.2 38.9C146.7 427 194.8 475 254 475c59.2 0 107.3-48 107.3-107.5 0-13.7-2.5-26.8-7.2-38.9 1.8 7.7 2.8 15.8 2.8 24C356.9 409 310.8 456 254 456c-56.8 0-102.9-47-102.9-103.4 0-8.2 1-16.3 2.8-24zm-18 77.4-20.2 82h25.7l11.8-48c-7.4-11-13.3-22-17.3-34zm236.2 0c-4 12-9.9 23-17.3 34l11.8 48h25.7z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class l_ extends St{constructor(t){super(),At(this,t,null,c_,Nt,{})}}function u_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M228.2 26.89c-15.2-.25-27.7 33.46-12.3 39.8l8.9 3.61 17.8-15.5-1.8-23.5-8.7-3.6c-1.1-.43-2.1-.68-3.2-.78h-.7zm134.4 7.92h-2.3c-7.4.3-15.3 2.12-23.3 5.75-21.2 9.67-43.6 32.67-59.7 75.74L174.4 394.7l-.1.2v.2c.9.5 3.6 1.9 8 4 9.8 4.8 24 15.7 26.1 38.8v.5l-1 55.6H304c-.1-17.6 1.4-34.5 8.1-51.5 11.7-29.4 39.3-54.9 97-77 0-.2 0 0 .1-.4.3-2 .4-6 0-11-1-10.1-4-24.9-8.6-42.2-9.2-34.7-24.8-80.2-42.4-124.9l-2.4-6.2 5.2-4.2c36.1-28.2 51.1-56.4 53.8-79.56 2.7-23.06-6.5-41.48-21.3-52.25-8.7-6.31-19.3-9.99-30.9-10.02zM260.5 52.44l.7 10.01-7.6 6.6 21.7 8.93c1.2-2.17 2.5-4.28 3.8-6.33l4-9.89zm69 18.56c8.8 0 16 7.16 16 16s-7.2 16-16 16-16-7.16-16-16 7.2-16 16-16zm-136.7 49.7c-15.2-.3-27.9 33.4-12.3 39.8l8.8 3.6 17.8-15.5-1.7-23.6-8.8-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 19.9 8.1 6.2-16.8zm71.6 19.8c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm-139.8 50.6c-15.3-.3-27.8 33.4-12.4 39.8l8.9 3.6 17.8-15.5-1.8-23.6-8.7-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 20.4 8.3 6.2-16.8zm67.2 19.3c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm-140.1 54.4c-15.2-.3-27.78 33.4-12.3 39.8l8.8 3.6 17.8-15.5-1.8-23.6-8.7-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 22.8 9.3 6.8-16.6zm69.3 18.5c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class h_ extends St{constructor(t){super(),At(this,t,null,u_,Nt,{})}}function f_(e){let t,n,s,r;return{c(){t=Tt("svg"),n=Tt("path"),s=Tt("path"),r=Tt("path"),this.h()},l(i){t=xt(i,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var o=V(t);n=xt(o,"path",{d:!0}),V(n).forEach(E),s=xt(o,"path",{d:!0}),V(s).forEach(E),r=xt(o,"path",{d:!0}),V(r).forEach(E),o.forEach(E),this.h()},h(){k(n,"d","M4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V3zm1 0v3h6V3H5zm3 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"),k(s,"d","M11 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"),k(r,"d","M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 16 16"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(i,o){it(i,t,o),L(t,n),L(t,s),L(t,r)},p:K,i:K,o:K,d(i){i&&E(t)}}}class d_ extends St{constructor(t){super(),At(this,t,null,f_,Nt,{})}}function p_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M496,224a48,48,0,1,0-48-48A48,48,0,0,0,496,224ZM311.47,178.45A56.77,56.77,0,0,1,328,176a56,56,0,0,1,19,3.49l15.35-48.61A24,24,0,0,0,342,99.74c-11.53-1.35-22.21,6.44-25.71,17.51l-20.9,66.17ZM93.65,386.33c.8-.19,1.54-.54,2.35-.71V359.93a156,156,0,0,1,107.06-148l73.7-22.76L310.92,81.05a24,24,0,0,0-20.33-31.11c-11.53-1.34-22.22,6.45-25.72,17.52L231.42,173.88a8,8,0,0,1-15.26-4.83L259.53,31.26A24,24,0,0,0,239.2.15C227.67-1.19,217,6.6,213.49,17.66L165.56,169.37a8,8,0,1,1-15.26-4.82l38.56-122a24,24,0,0,0-20.33-31.11C157,10,146.32,17.83,142.82,28.9l-60,189.85L80.76,168.7A24,24,0,0,0,56.9,144.55c-13.23-.05-24.72,10.54-24.9,23.86V281.14A123.69,123.69,0,0,0,93.65,386.33ZM519.1,336H360a8,8,0,0,1,0-16H488a24,24,0,0,0,23.54-28.76C509.35,279.84,498.71,272,487.1,272H288l47.09-17.06a24,24,0,0,0-14.18-45.88L213.19,242.31A123.88,123.88,0,0,0,128,360v25.65a79.78,79.78,0,0,1,58,108.63A118.9,118.9,0,0,0,248,512H456a24,24,0,0,0,23.54-28.76C477.35,471.84,466.71,464,455.1,464H360a8,8,0,0,1,0-16H488a24,24,0,0,0,23.54-28.76C509.35,407.84,498.71,400,487.1,400H360a8,8,0,0,1,0-16H520a24,24,0,0,0,23.54-28.76C541.35,343.84,530.71,336,519.1,336ZM416,64a32,32,0,1,0-32-32A32,32,0,0,0,416,64ZM112,416a48,48,0,1,0,48,48A48,48,0,0,0,112,416Z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 576 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class m_ extends St{constructor(t){super(),At(this,t,null,p_,Nt,{})}}function g_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","m376.3 30.6-63.3 3L61.43 230.9l261.47-51.5c5.8-4.6 10.9-9 15.4-13.1L302 75.6l15.5-6.2 33.7 84.2c55.1-60.2-20.4-71.1 25.1-123zM357 168l-13.2 11.9 9.6 24.1c-9.1-.4-19.2-.6-30.5-.7L61.43 254.9s.34 2.2.84 5.5c2.36 15.5-7.73 30.2-23.07 33.6-8.93 2-16.61 3.7-16.61 3.7l3.95 21.2 334.16 30.5 126-53.9-.9-43.4c-81.1-8.7-11.4-39.4-114-47L357 168zM83.78 284.8 358.4 307l-18.1 16.1-280.68-25.9 24.16-12.4zm-1.35 53.6 13.65 97.1-3.47 6.2.36 15.8 17.13 1.6 17.1-6.2v-13.2l-4.8-3.9 9.1-93-49.07-4.4zM184 350.5V426l105.2 9v-75.2l-16.7-1.5V417l-71.8-6v-59l-16.7-1.5zm209.8 2.7-29.4 10.9-24.8-2 15.6 99.4-3.9 5.1.8 18 17.1 1.7 15.9-7.4.3-13.2-3.9-3.9 12.3-108.6zm-208.7 89.6-28.4 9.5 3.1 14.4 102.3 10.1 21-7.4 1.1-18.3-99.1-8.3z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class __ extends St{constructor(t){super(),At(this,t,null,g_,Nt,{})}}function v_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M210.5 46.8v99l12.5-11.5V46.8zm78.5 0v87.5l12.5 11.5v-99zm-196.41 11v275.9l20.81-6.3V57.8zm306.01 0v269.6l20.8 6.3V57.8zm-208.5 3.5v103.1l12.5-11.4V61.3zm119.3 0V153l12.5 11.4V61.3zM168.7 75.8V184l12.5-11.5V75.8zm162.1 0v96.7l12.5 11.5V75.8zm-268.21 12v255.1l20.84-6.4V87.8zm366.01 0v248.7l20.8 6.4V87.8zm-281.3 2.5v113.3l12.5-11.5V90.3zm204.9 0v101.8l12.5 11.5V90.3zM32.59 117.8V352l20.84-6.3V117.8zm426.01 0v227.9l20.8 6.3V117.8zm-213 50v124.8c6.9-.3 13.9-.3 20.8 0V167.8zm-30 30v97.3c6.9-.9 13.9-1.6 20.8-2.1v-95.2zm60 0V293c6.9.5 13.9 1.2 20.8 2.1v-97.3zm-90 30v72.9c6.9-1.7 13.9-3.1 20.8-4.2v-68.7zm120 0v68.7c6.9 1.1 13.9 2.5 20.8 4.1v-72.8zm-141.4 19-32.2 28L142 481h22.2zm183.1 0V481h22.2l10-206.2zm-101.7 62.5v26.4h20.8v-26.5c-7.1-.2-14.1-.1-20.8.1zm-9.2.4c-6.9.5-13.9 1.3-20.8 2.3v23.7h20.8zm39.2 0v26h20.8v-23.8c-6.9-1-13.9-1.7-20.8-2.2zm-69.2 3.7c-6.9 1.2-13.9 2.7-20.8 4.4v17.9h20.8zm99.2 0v22.3h20.8v-17.9c-6.9-1.7-13.9-3.2-20.8-4.4zm-192.2 31.4-20.81 6.3V418h20.81zm285.2 0V418h20.8v-66.9zm-315.17 9.1-20.84 6.4V418h20.84zm345.17 0V418h20.8v-57.7zm-245.5 4.9 2.5 122.2h24.3v-35h92.2v35h24.3l2.5-122.2zm-129.67 4.3-20.84 6.3V418h20.84zm405.17 0V418h20.8v-48.6zm-230.8 8.7h56.4v16.1H296V404h-80v-16.1h11.8zM209.2 417h93.6v16h-93.6zm17.4 46v18h58.8v-18z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class y_ extends St{constructor(t){super(),At(this,t,null,v_,Nt,{})}}function w_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M470.9 26l-23 7.69-.1 12.66 17.8 17.81 12.7-.1 7.7-23.04zm-32.5 37l-227 210.5 27.2 27L449 73.57zm-39.6-19.33L385.7 56.7l15.6 15.5 13.5-12.53zm53.5 53.59l-12.5 13.54 15.5 15.4 13.1-13zm-79.6-27.52l-13 13.02 14.6 14.61 13.5-12.58zm54.5 54.46l-12.5 13.6 14.5 14.5 13.1-13.1zm-124 39.2c-28.7-17.5-72-25.4-116.3 47.8l-7.2-1.4-7.3 13c3.8 1 13.5 8.2 12.4 12.1-3.5 11.3-48.2 64.3-70.6 44.5-2.9-2.6-5.8-5.7-8-9.6l-14.35 7.9c1.23 10-1.95 13.8-6.38 15.8-82.975 36.6-64.15 78.6-33.01 126.9l3.11-3c22.09-22.2 43.62-54.6 62.73-82.7l6.1-9.3 13 13 10.1-10.1-10.8-10.9 18.8-7.3 5.1 5.2 33.3-33.4c-2.9-3-5.9-6-8.9-8.9zm45.5 45.5L239 327l-8.9-8.9-33.3 33.3 5 5.1-7.1 18.9-10.9-11-10.1 10.2 12.8 12.9-9.2 6.3c-27.6 18.9-60.6 40.6-82.61 62.7l-3.14 3c48.45 31.2 90.45 50 127.05-33 2-4.4 5.7-7.6 15.8-6.4l7.8-14.3c-3.8-2.3-7-5-9.6-8-19.8-22.4 33.2-67.2 44.5-70.7 3.9-1.1 11 8.6 12.1 12.4l13-7.1-1.4-7.2c73.2-44.3 65.4-87.7 47.9-116.3zM206.9 295l-33.2 33.3 10.1 10.1 33.3-33.3zm-46.3 46.3l-10.2 10.1 10.2 10.1 10.1-10.1zm-33.4 13c-16.4 24.2-34.63 51-54.84 72l2.97 10.3 10.36 3c21.11-20.1 48.01-38.4 72.11-54.8z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class b_ extends St{constructor(t){super(),At(this,t,null,w_,Nt,{})}}function T_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M22 21C23.1046 21 24 20.1046 24 19V5C24 3.89543 23.1046 3 22 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H22ZM11 5H8.98486V13H7.98511V19H12V13H11V5ZM18.0151 19H22V5H19.0151V13H18.0151V19ZM17.0151 13H16.0151V5H14V13H13V19H17.0151V13ZM6.98511 19V13H5.98486V5H3L3 19H6.98511Z"),k(n,"fill","currentColor"),k(t,"stroke","currentColor"),k(t,"fill","none"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 24 24"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class Wl extends St{constructor(t){super(),At(this,t,null,T_,Nt,{})}}function x_(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M256 59.5a48 48 0 0 0-41.8 24.55c13.3-2.32 27.2-3.55 41.8-3.55 14.6 0 28.6 1.24 41.9 3.56A48 48 0 0 0 256 59.5zm0 39c-99.4 0-163.7 59.3-186.6 132.3-23 73.2-6.4 160.5 52.3 219v.1l2.6 2.6h3.7c17.8 0 32.9-7.3 50.5-14.7l-3.6-17.9c-15.4 6.1-27.4 11.3-38 13.5l-5.1 1.1-3.5-3.9c-48.4-53.3-62-130.1-41.7-194.4 20.9-66.7 77-119.7 169.4-119.7 92.3 0 148.5 53 169.4 119.7 20.3 64.3 6.7 141.1-41.7 194.4l-3.5 3.9-5.1-1.1c-10.6-2.2-22.6-7.4-38-13.5l-3.6 17.9c17.6 7.4 32.7 14.7 50.5 14.7h3.7l2.6-2.6v-.1c58.7-58.5 75.3-145.8 52.3-219-22.9-73-87.2-132.3-186.6-132.3zm-151 34a48 48 0 0 0-48 48 48 48 0 0 0 4.6 20.4c11.7-25.5 28.5-48.7 49.9-67.9a48 48 0 0 0-6.5-.5zm302 0a48 48 0 0 0-6.5.5c21.4 19.2 38.2 42.4 49.9 67.9a48 48 0 0 0 4.6-20.4 48 48 0 0 0-48-48zm-151 2c-13.3 0-25.7 1.1-37.2 3.2a48 48 0 0 0 37.2 17.8 48 48 0 0 0 37.2-17.7c-11.5-2.2-23.9-3.3-37.2-3.3zm-104.7 33.7c-19.3 16-33.4 36.7-42.7 60.1a48 48 0 0 0 44.4-47.8 48 48 0 0 0-1.7-12.3zm209.3 0a48 48 0 0 0-1.6 12.3 48 48 0 0 0 44.5 47.9c-9.4-23.5-23.5-44.2-42.9-60.2zM95.7 299.4c.5 23.4 5.3 46.9 14.4 68.8a48 48 0 0 0 8.9-27.7 48 48 0 0 0-23.3-41.1zm320.6 0a48 48 0 0 0-23.3 41.1 48 48 0 0 0 8.9 27.8c9.1-22 13.9-45.5 14.4-68.9zm-374.8 3.3A48 48 0 0 0 23 340.5a48 48 0 0 0 35.9 46.4c-11-26.9-16.7-55.6-17.4-84.2zm429.1 0c-.8 28.6-6.5 57.2-17.5 84.2a48 48 0 0 0 35.9-46.4 48 48 0 0 0-18.4-37.8zM256 402.5c-25.6 0-46.5 5-64 11l3.5 17.7c16.8-5.9 36.2-10.7 60.5-10.7 24.3 0 43.7 4.8 60.5 10.7l3.5-17.7c-17.5-6-38.4-11-64-11z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class C_ extends St{constructor(t){super(),At(this,t,null,x_,Nt,{})}}function k_(e){let t,n,s,r;const i=[E_,I_],o=[];function a(c,l){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var l=V(t);s.l(l),l.forEach(E)},m(c,l){it(c,t,l),o[n].m(t,null),r=!0},p(c,l){let u=n;n=a(c),n!==u&&(Be(),et(o[u],1,1,()=>{o[u]=null}),$e(),s=o[n],s||(s=o[n]=i[n](c),s.c()),J(s,1),s.m(t,null))},i(c){r||(J(s),r=!0)},o(c){et(s),r=!1},d(c){c&&E(t),o[n].d()}}}function S_(e){let t,n,s,r;const i=[D_,O_],o=[];function a(c,l){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var l=V(t);s.l(l),l.forEach(E)},m(c,l){it(c,t,l),o[n].m(t,null),r=!0},p(c,l){let u=n;n=a(c),n!==u&&(Be(),et(o[u],1,1,()=>{o[u]=null}),$e(),s=o[n],s||(s=o[n]=i[n](c),s.c()),J(s,1),s.m(t,null))},i(c){r||(J(s),r=!0)},o(c){et(s),r=!1},d(c){c&&E(t),o[n].d()}}}function A_(e){let t,n,s,r;const i=[V_,R_],o=[];function a(c,l){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var l=V(t);s.l(l),l.forEach(E)},m(c,l){it(c,t,l),o[n].m(t,null),r=!0},p(c,l){let u=n;n=a(c),n!==u&&(Be(),et(o[u],1,1,()=>{o[u]=null}),$e(),s=o[n],s||(s=o[n]=i[n](c),s.c()),J(s,1),s.m(t,null))},i(c){r||(J(s),r=!0)},o(c){et(s),r=!1},d(c){c&&E(t),o[n].d()}}}function N_(e){let t,n,s,r;const i=[F_,P_],o=[];function a(c,l){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var l=V(t);s.l(l),l.forEach(E)},m(c,l){it(c,t,l),o[n].m(t,null),r=!0},p(c,l){let u=n;n=a(c),n!==u&&(Be(),et(o[u],1,1,()=>{o[u]=null}),$e(),s=o[n],s||(s=o[n]=i[n](c),s.c()),J(s,1),s.m(t,null))},i(c){r||(J(s),r=!0)},o(c){et(s),r=!1},d(c){c&&E(t),o[n].d()}}}function M_(e){let t,n,s,r;const i=[q_,L_],o=[];function a(c,l){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var l=V(t);s.l(l),l.forEach(E)},m(c,l){it(c,t,l),o[n].m(t,null),r=!0},p(c,l){let u=n;n=a(c),n!==u&&(Be(),et(o[u],1,1,()=>{o[u]=null}),$e(),s=o[n],s||(s=o[n]=i[n](c),s.c()),J(s,1),s.m(t,null))},i(c){r||(J(s),r=!0)},o(c){et(s),r=!1},d(c){c&&E(t),o[n].d()}}}function I_(e){let t,n;return t=new m_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function E_(e){let t,n;return t=new C_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function O_(e){let t,n;return t=new y_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function D_(e){let t,n;return t=new b_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function R_(e){let t,n;return t=new Wl({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function V_(e){let t,n;return t=new h_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function P_(e){let t,n;return t=new Wl({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function F_(e){let t,n;return t=new __({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function L_(e){let t,n;return t=new d_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function q_(e){let t,n;return t=new l_({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function z_(e){let t,n,s,r,i;const o=[M_,N_,A_,S_,k_],a=[];function c(l,u){return l[0]==="drums"?0:l[0]==="lead"?1:l[0]==="bass"?2:l[0]==="pad"?3:l[0]==="shaker"?4:-1}return~(s=c(e))&&(r=a[s]=o[s](e)),{c(){t=H("div"),n=H("span"),r&&r.c(),this.h()},l(l){t=G(l,"DIV",{class:!0});var u=V(t);n=G(u,"SPAN",{});var h=V(n);r&&r.l(h),h.forEach(E),u.forEach(E),this.h()},h(){k(t,"class","text-4xl")},m(l,u){it(l,t,u),L(t,n),~s&&a[s].m(n,null),i=!0},p(l,[u]){let h=s;s=c(l),s===h?~s&&a[s].p(l,u):(r&&(Be(),et(a[h],1,1,()=>{a[h]=null}),$e()),~s?(r=a[s],r?r.p(l,u):(r=a[s]=o[s](l),r.c()),J(r,1),r.m(n,null)):r=null)},i(l){i||(J(r),i=!0)},o(l){et(r),i=!1},d(l){l&&E(t),~s&&a[s].d()}}}function W_(e,t,n){const s="this is a test";let{channelName:r}=t,{alternateTrack:i}=t;return e.$$set=o=>{"channelName"in o&&n(0,r=o.channelName),"alternateTrack"in o&&n(1,i=o.alternateTrack)},[r,i,s]}class B_ extends St{constructor(t){super(),At(this,t,W_,z_,Nt,{test:2,channelName:0,alternateTrack:1})}get test(){return this.$$.ctx[2]}}function $_(e){let t=e[2]>0?"+":"",n,s;return{c(){n=_e(t),s=_e(e[2])},l(r){n=ve(r,t),s=ve(r,e[2])},m(r,i){it(r,n,i),it(r,s,i)},p(r,i){i&4&&t!==(t=r[2]>0?"+":"")&&hn(n,t),i&4&&hn(s,r[2])},d(r){r&&E(n),r&&E(s)}}}function U_(e){let t,n,s;return{c(){t=_e("-"),n=H("span"),s=_e(""),this.h()},l(r){t=ve(r,"-"),n=G(r,"SPAN",{class:!0});var i=V(n);s=ve(i,""),i.forEach(E),this.h()},h(){k(n,"class","text-lg")},m(r,i){it(r,t,i),it(r,n,i),L(n,s)},p:K,d(r){r&&E(t),r&&E(n)}}}function j_(e){let t,n,s,r,i,o,a,c;function l(f,d){return f[2]<=-80?U_:$_}let u=l(e),h=u(e);return{c(){t=H("div"),n=H("div"),s=H("div"),r=H("input"),i=Ht(),o=H("div"),h.c(),this.h()},l(f){t=G(f,"DIV",{class:!0});var d=V(t);n=G(d,"DIV",{class:!0});var p=V(n);s=G(p,"DIV",{class:!0,style:!0});var m=V(s);r=G(m,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),m.forEach(E),p.forEach(E),i=Gt(d),o=G(d,"DIV",{class:!0});var g=V(o);h.l(g),g.forEach(E),d.forEach(E),this.h()},h(){k(r,"type","range"),k(r,"min",0),k(r,"max",1),k(r,"step",.05),r.value=e[0],k(r,"class","svelte-1yc5a7r"),k(s,"class","w-40 absolute -rotate-90"),k(s,"style",`
        top: 80px;
        left: -60px;
        height: 28px
    `),k(n,"class","volume-wrapper-outer border-1 bg-gray-400 relative w-10 h-44"),k(o,"class","flex justify-center items-center text-sm bg-gray-400 h-10 text-gray-800 font-bold w-10"),k(t,"class","h-58 rounded overflow-hidden")},m(f,d){it(f,t,d),L(t,n),L(n,s),L(s,r),L(t,i),L(t,o),h.m(o,null),a||(c=pe(r,"input",e[3]),a=!0)},p(f,[d]){d&1&&(r.value=f[0]),u===(u=l(f))&&h?h.p(f,d):(h.d(1),h=u(f),h&&(h.c(),h.m(o,null)))},i:K,o:K,d(f){f&&E(t),h.d(),a=!1,c()}}}function H_(e,t,n){let s,{volume:r}=t,{handleVolumeChange:i}=t;const o=a=>i(a);return e.$$set=a=>{"volume"in a&&n(0,r=a.volume),"handleVolumeChange"in a&&n(1,i=a.handleVolumeChange)},e.$$.update=()=>{e.$$.dirty&1&&n(2,s=Math.round(r*100)-80)},[r,i,s,o]}class Bl extends St{constructor(t){super(),At(this,t,H_,j_,Nt,{volume:0,handleVolumeChange:1})}}function $l(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function G_(e){return e.length===1&&(e=X_(e)),{left:function(t,n,s,r){for(s==null&&(s=0),r==null&&(r=t.length);s<r;){var i=s+r>>>1;e(t[i],n)<0?s=i+1:r=i}return s},right:function(t,n,s,r){for(s==null&&(s=0),r==null&&(r=t.length);s<r;){var i=s+r>>>1;e(t[i],n)>0?r=i:s=i+1}return s}}}function X_(e){return function(t,n){return $l(e(t),n)}}var Z_=G_($l),Ul=Z_.right;function Y_(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++s<r;)i[s]=e+s*n;return i}var $i=Math.sqrt(50),Ui=Math.sqrt(10),ji=Math.sqrt(2);function Q_(e,t,n){var s,r=-1,i,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(a=lr(e,t,n))===0||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++r<i;)o[r]=(e+r)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++r<i;)o[r]=(e-r)/a;return s&&o.reverse(),o}function lr(e,t,n){var s=(t-e)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=$i?10:i>=Ui?5:i>=ji?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=$i?10:i>=Ui?5:i>=ji?2:1)}function K_(e,t,n){var s=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=$i?r*=10:i>=Ui?r*=5:i>=ji&&(r*=2),t<e?-r:r}var J_={value:function(){}};function jl(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new ur(n)}function ur(e){this._=e}function t0(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}ur.prototype=jl.prototype={constructor:ur,on:function(e,t){var n=this._,s=t0(e+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(e=s[i]).type)&&(r=e0(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=s[i]).type)n[r]=Da(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Da(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ur(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)}};function e0(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function Da(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=J_,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hi="http://www.w3.org/1999/xhtml";const Ra={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ra.hasOwnProperty(t)?{space:Ra[t],local:e}:e}function n0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hi&&t.documentElement.namespaceURI===Hi?t.createElement(e):t.createElementNS(n,e)}}function s0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hl(e){var t=hi(e);return(t.local?s0:n0)(t)}function r0(){}function qo(e){return e==null?r0:function(){return this.querySelector(e)}}function i0(e){typeof e!="function"&&(e=qo(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=new Array(o),c,l,u=0;u<o;++u)(c=i[u])&&(l=e.call(c,c.__data__,u,i))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new oe(s,this._parents)}function o0(){return[]}function Gl(e){return e==null?o0:function(){return this.querySelectorAll(e)}}function a0(e){typeof e!="function"&&(e=Gl(e));for(var t=this._groups,n=t.length,s=[],r=[],i=0;i<n;++i)for(var o=t[i],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(s.push(e.call(c,c.__data__,l,o)),r.push(c));return new oe(s,r)}function Xl(e){return function(){return this.matches(e)}}function c0(e){typeof e!="function"&&(e=Xl(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=[],c,l=0;l<o;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&a.push(c);return new oe(s,this._parents)}function Zl(e){return new Array(e.length)}function l0(){return new oe(this._enter||this._groups.map(Zl),this._parents)}function Pr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pr.prototype={constructor:Pr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function u0(e){return function(){return e}}var Va="$";function h0(e,t,n,s,r,i){for(var o=0,a,c=t.length,l=i.length;o<l;++o)(a=t[o])?(a.__data__=i[o],s[o]=a):n[o]=new Pr(e,i[o]);for(;o<c;++o)(a=t[o])&&(r[o]=a)}function f0(e,t,n,s,r,i,o){var a,c,l={},u=t.length,h=i.length,f=new Array(u),d;for(a=0;a<u;++a)(c=t[a])&&(f[a]=d=Va+o.call(c,c.__data__,a,t),d in l?r[a]=c:l[d]=c);for(a=0;a<h;++a)d=Va+o.call(e,i[a],a,i),(c=l[d])?(s[a]=c,c.__data__=i[a],l[d]=null):n[a]=new Pr(e,i[a]);for(a=0;a<u;++a)(c=t[a])&&l[f[a]]===c&&(r[a]=c)}function d0(e,t){if(!e)return d=new Array(this.size()),l=-1,this.each(function(b){d[++l]=b}),d;var n=t?f0:h0,s=this._parents,r=this._groups;typeof e!="function"&&(e=u0(e));for(var i=r.length,o=new Array(i),a=new Array(i),c=new Array(i),l=0;l<i;++l){var u=s[l],h=r[l],f=h.length,d=e.call(u,u&&u.__data__,l,s),p=d.length,m=a[l]=new Array(p),g=o[l]=new Array(p),_=c[l]=new Array(f);n(u,h,m,g,_,d,t);for(var w=0,y=0,x,v;w<p;++w)if(x=m[w]){for(w>=y&&(y=w+1);!(v=g[y])&&++y<p;);x._next=v||null}}return o=new oe(o,s),o._enter=a,o._exit=c,o}function p0(){return new oe(this._exit||this._groups.map(Zl),this._parents)}function m0(e,t,n){var s=this.enter(),r=this,i=this.exit();return s=typeof e=="function"?e(s):s.append(e+""),t!=null&&(r=t(r)),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function g0(e){for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var c=t[a],l=n[a],u=c.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=c[d]||l[d])&&(h[d]=f);for(;a<s;++a)o[a]=t[a];return new oe(o,this._parents)}function _0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function v0(e){e||(e=y0);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,c=r[i]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new oe(r,this._parents).order()}function y0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function b0(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function T0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function x0(){var e=0;return this.each(function(){++e}),e}function C0(){return!this.node()}function k0(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function S0(e){return function(){this.removeAttribute(e)}}function A0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function N0(e,t){return function(){this.setAttribute(e,t)}}function M0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function I0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function E0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function O0(e,t){var n=hi(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?A0:S0:typeof t=="function"?n.local?E0:I0:n.local?M0:N0)(n,t))}function Yl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function D0(e){return function(){this.style.removeProperty(e)}}function R0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function V0(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function P0(e,t,n){return arguments.length>1?this.each((t==null?D0:typeof t=="function"?V0:R0)(e,t,n??"")):Hn(this.node(),e)}function Hn(e,t){return e.style.getPropertyValue(t)||Yl(e).getComputedStyle(e,null).getPropertyValue(t)}function F0(e){return function(){delete this[e]}}function L0(e,t){return function(){this[e]=t}}function q0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function z0(e,t){return arguments.length>1?this.each((t==null?F0:typeof t=="function"?q0:L0)(e,t)):this.node()[e]}function Ql(e){return e.trim().split(/^|\s+/)}function zo(e){return e.classList||new Kl(e)}function Kl(e){this._node=e,this._names=Ql(e.getAttribute("class")||"")}Kl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jl(e,t){for(var n=zo(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function tu(e,t){for(var n=zo(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function W0(e){return function(){Jl(this,e)}}function B0(e){return function(){tu(this,e)}}function $0(e,t){return function(){(t.apply(this,arguments)?Jl:tu)(this,e)}}function U0(e,t){var n=Ql(e+"");if(arguments.length<2){for(var s=zo(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?$0:t?W0:B0)(n,t))}function j0(){this.textContent=""}function H0(e){return function(){this.textContent=e}}function G0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function X0(e){return arguments.length?this.each(e==null?j0:(typeof e=="function"?G0:H0)(e)):this.node().textContent}function Z0(){this.innerHTML=""}function Y0(e){return function(){this.innerHTML=e}}function Q0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function K0(e){return arguments.length?this.each(e==null?Z0:(typeof e=="function"?Q0:Y0)(e)):this.node().innerHTML}function J0(){this.nextSibling&&this.parentNode.appendChild(this)}function t1(){return this.each(J0)}function e1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n1(){return this.each(e1)}function s1(e){var t=typeof e=="function"?e:Hl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function r1(){return null}function i1(e,t){var n=typeof e=="function"?e:Hl(e),s=t==null?r1:typeof t=="function"?t:qo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function o1(){var e=this.parentNode;e&&e.removeChild(this)}function a1(){return this.each(o1)}function c1(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function l1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function u1(e){return this.select(e?l1:c1)}function h1(e){return arguments.length?this.property("__data__",e):this.node().__data__}var eu={};if(typeof document<"u"){var f1=document.documentElement;"onmouseenter"in f1||(eu={mouseenter:"mouseover",mouseleave:"mouseout"})}function d1(e,t,n){return e=nu(e,t,n),function(s){var r=s.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&e.call(this,s)}}function nu(e,t,n){return function(s){try{e.call(this,this.__data__,t,n)}finally{}}}function p1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function m1(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.capture):t[++s]=i;++s?t.length=s:delete this.__on}}}function g1(e,t,n){var s=eu.hasOwnProperty(e.type)?d1:nu;return function(r,i,o){var a=this.__on,c,l=s(t,i,o);if(a){for(var u=0,h=a.length;u<h;++u)if((c=a[u]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=l,c.capture=n),c.value=t;return}}this.addEventListener(e.type,l,n),c={type:e.type,name:e.name,value:t,listener:l,capture:n},a?a.push(c):this.__on=[c]}}function _1(e,t,n){var s=p1(e+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(r=0,u=a[c];r<i;++r)if((o=s[r]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?g1:m1,n==null&&(n=!1),r=0;r<i;++r)this.each(a(s[r],t,n));return this}function su(e,t,n){var s=Yl(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function v1(e,t){return function(){return su(this,e,t)}}function y1(e,t){return function(){return su(this,e,t.apply(this,arguments))}}function w1(e,t){return this.each((typeof t=="function"?y1:v1)(e,t))}var ru=[null];function oe(e,t){this._groups=e,this._parents=t}function Xs(){return new oe([[document.documentElement]],ru)}oe.prototype=Xs.prototype={constructor:oe,select:i0,selectAll:a0,filter:c0,data:d0,enter:l0,exit:p0,join:m0,merge:g0,order:_0,sort:v0,call:w0,nodes:b0,node:T0,size:x0,empty:C0,each:k0,attr:O0,style:P0,property:z0,classed:U0,text:X0,html:K0,raise:t1,lower:n1,append:s1,insert:i1,remove:a1,clone:u1,datum:h1,on:_1,dispatch:w1};function iu(e){return typeof e=="string"?new oe([[document.querySelector(e)]],[document.documentElement]):new oe([[e]],ru)}function Wo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ou(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Zs(){}var Os=.7,Fr=1/Os,Ln="\\s*([+-]?\\d+)\\s*",Ds="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Me="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b1=/^#([0-9a-f]{3,8})$/,T1=new RegExp("^rgb\\("+[Ln,Ln,Ln]+"\\)$"),x1=new RegExp("^rgb\\("+[Me,Me,Me]+"\\)$"),C1=new RegExp("^rgba\\("+[Ln,Ln,Ln,Ds]+"\\)$"),k1=new RegExp("^rgba\\("+[Me,Me,Me,Ds]+"\\)$"),S1=new RegExp("^hsl\\("+[Ds,Me,Me]+"\\)$"),A1=new RegExp("^hsla\\("+[Ds,Me,Me,Ds]+"\\)$"),Pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wo(Zs,bn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Fa,formatHex:Fa,formatHsl:N1,formatRgb:La,toString:La});function Fa(){return this.rgb().formatHex()}function N1(){return au(this).formatHsl()}function La(){return this.rgb().formatRgb()}function bn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=b1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qa(t):n===3?new ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=T1.exec(e))?new ie(t[1],t[2],t[3],1):(t=x1.exec(e))?new ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=C1.exec(e))?nr(t[1],t[2],t[3],t[4]):(t=k1.exec(e))?nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=S1.exec(e))?Ba(t[1],t[2]/100,t[3]/100,1):(t=A1.exec(e))?Ba(t[1],t[2]/100,t[3]/100,t[4]):Pa.hasOwnProperty(e)?qa(Pa[e]):e==="transparent"?new ie(NaN,NaN,NaN,0):null}function qa(e){return new ie(e>>16&255,e>>8&255,e&255,1)}function nr(e,t,n,s){return s<=0&&(e=t=n=NaN),new ie(e,t,n,s)}function M1(e){return e instanceof Zs||(e=bn(e)),e?(e=e.rgb(),new ie(e.r,e.g,e.b,e.opacity)):new ie}function Rs(e,t,n,s){return arguments.length===1?M1(e):new ie(e,t,n,s??1)}function ie(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}Wo(ie,Rs,ou(Zs,{brighter:function(e){return e=e==null?Fr:Math.pow(Fr,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Os:Math.pow(Os,e),new ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:za,formatHex:za,formatRgb:Wa,toString:Wa}));function za(){return"#"+Ti(this.r)+Ti(this.g)+Ti(this.b)}function Wa(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Ti(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Ba(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ne(e,t,n,s)}function au(e){if(e instanceof Ne)return new Ne(e.h,e.s,e.l,e.opacity);if(e instanceof Zs||(e=bn(e)),!e)return new Ne;if(e instanceof Ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,a=i-r,c=(i+r)/2;return a?(t===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-t)/a+2:o=(t-n)/a+4,a/=c<.5?i+r:2-i-r,o*=60):a=c>0&&c<1?0:o,new Ne(o,a,c,e.opacity)}function Gi(e,t,n,s){return arguments.length===1?au(e):new Ne(e,t,n,s??1)}function Ne(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}Wo(Ne,Gi,ou(Zs,{brighter:function(e){return e=e==null?Fr:Math.pow(Fr,e),new Ne(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Os:Math.pow(Os,e),new Ne(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new ie(xi(e>=240?e-240:e+120,r,s),xi(e,r,s),xi(e<120?e+240:e-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function xi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function fi(e){return function(){return e}}function cu(e,t){return function(n){return e+n*t}}function I1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function E1(e,t){var n=t-e;return n?cu(e,n>180||n<-180?n-360*Math.round(n/360):n):fi(isNaN(e)?t:e)}function O1(e){return(e=+e)==1?ps:function(t,n){return n-t?I1(t,n,e):fi(isNaN(t)?n:t)}}function ps(e,t){var n=t-e;return n?cu(e,n):fi(isNaN(e)?t:e)}const Lr=function e(t){var n=O1(t);function s(r,i){var o=n((r=Rs(r)).r,(i=Rs(i)).r),a=n(r.g,i.g),c=n(r.b,i.b),l=ps(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return s.gamma=e,s}(1);function D1(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function R1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function V1(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=Bo(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function P1(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function ge(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function F1(e,t){var n={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Bo(e[r],t[r]):s[r]=t[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ci=new RegExp(Xi.source,"g");function L1(e){return function(){return e}}function q1(e){return function(t){return e(t)+""}}function lu(e,t){var n=Xi.lastIndex=Ci.lastIndex=0,s,r,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(s=Xi.exec(e))&&(r=Ci.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:ge(s,r)})),n=Ci.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?q1(c[0].x):L1(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}function Bo(e,t){var n=typeof t,s;return t==null||n==="boolean"?fi(t):(n==="number"?ge:n==="string"?(s=bn(t))?(t=s,Lr):lu:t instanceof bn?Lr:t instanceof Date?P1:R1(t)?D1:Array.isArray(t)?V1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?F1:ge)(e,t)}function z1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var $a=180/Math.PI,Zi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uu(e,t,n,s,r,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,c/=a),e*s<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*$a,skewX:Math.atan(c)*$a,scaleX:o,scaleY:a}}var rs,ki,Ua,sr;function W1(e){return e==="none"?Zi:(rs||(rs=document.createElement("DIV"),ki=document.documentElement,Ua=document.defaultView),rs.style.transform=e,e=Ua.getComputedStyle(ki.appendChild(rs),null).getPropertyValue("transform"),ki.removeChild(rs),e=e.slice(7,-1).split(","),uu(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function B1(e){return e==null||(sr||(sr=document.createElementNS("http://www.w3.org/2000/svg","g")),sr.setAttribute("transform",e),!(e=sr.transform.baseVal.consolidate()))?Zi:(e=e.matrix,uu(e.a,e.b,e.c,e.d,e.e,e.f))}function hu(e,t,n,s){function r(l){return l.length?l.pop()+" ":""}function i(l,u,h,f,d,p){if(l!==h||u!==f){var m=d.push("translate(",null,t,null,n);p.push({i:m-4,x:ge(l,h)},{i:m-2,x:ge(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(l,u,h,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:h.push(r(h)+"rotate(",null,s)-2,x:ge(l,u)})):u&&h.push(r(h)+"rotate("+u+s)}function a(l,u,h,f){l!==u?f.push({i:h.push(r(h)+"skewX(",null,s)-2,x:ge(l,u)}):u&&h.push(r(h)+"skewX("+u+s)}function c(l,u,h,f,d,p){if(l!==h||u!==f){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:ge(l,h)},{i:m-2,x:ge(u,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(l,u){var h=[],f=[];return l=e(l),u=e(u),i(l.translateX,l.translateY,u.translateX,u.translateY,h,f),o(l.rotate,u.rotate,h,f),a(l.skewX,u.skewX,h,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,f),l=u=null,function(d){for(var p=-1,m=f.length,g;++p<m;)h[(g=f[p]).i]=g.x(d);return h.join("")}}}var $1=hu(W1,"px, ","px)","deg)"),U1=hu(B1,", ",")",")");function j1(e){return function(t,n){var s=e((t=Gi(t)).h,(n=Gi(n)).h),r=ps(t.s,n.s),i=ps(t.l,n.l),o=ps(t.opacity,n.opacity);return function(a){return t.h=s(a),t.s=r(a),t.l=i(a),t.opacity=o(a),t+""}}}const H1=j1(E1);var Gn=0,us=0,is=0,fu=1e3,qr,hs,zr=0,Tn=0,di=0,Vs=typeof performance=="object"&&performance.now?performance:Date,du=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pi(){return Tn||(du(G1),Tn=Vs.now()+di)}function G1(){Tn=0}function Wr(){this._call=this._time=this._next=null}Wr.prototype=pu.prototype={constructor:Wr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pi():+n)+(t==null?0:+t),!this._next&&hs!==this&&(hs?hs._next=this:qr=this,hs=this),this._call=e,this._time=n,Yi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yi())}};function pu(e,t,n){var s=new Wr;return s.restart(e,t,n),s}function X1(){pi(),++Gn;for(var e=qr,t;e;)(t=Tn-e._time)>=0&&e._call.call(null,t),e=e._next;--Gn}function ja(){Tn=(zr=Vs.now())+di,Gn=us=0;try{X1()}finally{Gn=0,Y1(),Tn=0}}function Z1(){var e=Vs.now(),t=e-zr;t>fu&&(di-=t,zr=e)}function Y1(){for(var e,t=qr,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qr=n);hs=e,Yi(s)}function Yi(e){if(!Gn){us&&(us=clearTimeout(us));var t=e-Tn;t>24?(e<1/0&&(us=setTimeout(ja,e-Vs.now()-di)),is&&(is=clearInterval(is))):(is||(zr=Vs.now(),is=setInterval(Z1,fu)),Gn=1,du(ja))}}function Ha(e,t,n){var s=new Wr;return t=t==null?0:+t,s.restart(function(r){s.stop(),e(r+t)},t,n),s}var Q1=jl("start","end","cancel","interrupt"),K1=[],mu=0,Ga=1,Qi=2,hr=3,Xa=4,Ki=5,fr=6;function mi(e,t,n,s,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;J1(e,n,{name:t,index:s,group:r,on:Q1,tween:K1,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:mu})}function $o(e,t){var n=Se(e,t);if(n.state>mu)throw new Error("too late; already scheduled");return n}function Ge(e,t){var n=Se(e,t);if(n.state>hr)throw new Error("too late; already running");return n}function Se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function J1(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=pu(i,0,n.time);function i(l){n.state=Ga,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,h,f,d;if(n.state!==Ga)return c();for(u in s)if(d=s[u],d.name===n.name){if(d.state===hr)return Ha(o);d.state===Xa?(d.state=fr,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete s[u]):+u<t&&(d.state=fr,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete s[u])}if(Ha(function(){n.state===hr&&(n.state=Xa,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Qi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Qi){for(n.state=hr,r=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Ki,1),h=-1,f=r.length;++h<f;)r[h].call(e,u);n.state===Ki&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=fr,n.timer.stop(),delete s[t];for(var l in s)return;delete e.__transition}}function tv(e,t){var n=e.__transition,s,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((s=n[o]).name!==t){i=!1;continue}r=s.state>Qi&&s.state<Ki,s.state=fr,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[o]}i&&delete e.__transition}}function ev(e){return this.each(function(){tv(this,e)})}function nv(e,t){var n,s;return function(){var r=Ge(this,e),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===t){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function sv(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=Ge(this,e),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}i.tween=r}}function rv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=Se(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===e)return o.value;return null}return this.each((t==null?nv:sv)(n,e,t))}function Uo(e,t,n){var s=e._id;return e.each(function(){var r=Ge(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Se(r,s).value[t]}}function gu(e,t){var n;return(typeof t=="number"?ge:t instanceof bn?Lr:(n=bn(t))?(t=n,Lr):lu)(e,t)}function iv(e){return function(){this.removeAttribute(e)}}function ov(e){return function(){this.removeAttributeNS(e.space,e.local)}}function av(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===s?i:i=t(s=o,n)}}function cv(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===s?i:i=t(s=o,n)}}function lv(e,t,n){var s,r,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a)))}}function uv(e,t,n){var s,r,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a)))}}function hv(e,t){var n=hi(e),s=n==="transform"?U1:gu;return this.attrTween(e,typeof t=="function"?(n.local?uv:lv)(n,s,Uo(this,"attr."+e,t)):t==null?(n.local?ov:iv)(n):(n.local?cv:av)(n,s,t))}function fv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function pv(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&dv(e,i)),n}return r._value=t,r}function mv(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&fv(e,i)),n}return r._value=t,r}function gv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=hi(e);return this.tween(n,(s.local?pv:mv)(s,t))}function _v(e,t){return function(){$o(this,e).delay=+t.apply(this,arguments)}}function vv(e,t){return t=+t,function(){$o(this,e).delay=t}}function yv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_v:vv)(t,e)):Se(this.node(),t).delay}function wv(e,t){return function(){Ge(this,e).duration=+t.apply(this,arguments)}}function bv(e,t){return t=+t,function(){Ge(this,e).duration=t}}function Tv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wv:bv)(t,e)):Se(this.node(),t).duration}function xv(e,t){if(typeof t!="function")throw new Error;return function(){Ge(this,e).ease=t}}function Cv(e){var t=this._id;return arguments.length?this.each(xv(t,e)):Se(this.node(),t).ease}function kv(e){typeof e!="function"&&(e=Xl(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=[],c,l=0;l<o;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&a.push(c);return new We(s,this._parents,this._name,this._id)}function Sv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var c=t[a],l=n[a],u=c.length,h=o[a]=new Array(u),f,d=0;d<u;++d)(f=c[d]||l[d])&&(h[d]=f);for(;a<s;++a)o[a]=t[a];return new We(o,this._parents,this._name,this._id)}function Av(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nv(e,t,n){var s,r,i=Av(t)?$o:Ge;return function(){var o=i(this,e),a=o.on;a!==s&&(r=(s=a).copy()).on(t,n),o.on=r}}function Mv(e,t){var n=this._id;return arguments.length<2?Se(this.node(),n).on.on(e):this.each(Nv(n,e,t))}function Iv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ev(){return this.on("end.remove",Iv(this._id))}function Ov(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qo(e));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],c=a.length,l=i[o]=new Array(c),u,h,f=0;f<c;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),l[f]=h,mi(l[f],t,n,f,l,Se(u,n)));return new We(i,this._parents,t,n)}function Dv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gl(e));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var c=s[a],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var f=e.call(u,u.__data__,h,c),d,p=Se(u,n),m=0,g=f.length;m<g;++m)(d=f[m])&&mi(d,t,n,m,f,p);i.push(f),o.push(u)}return new We(i,o,t,n)}var Rv=Xs.prototype.constructor;function Vv(){return new Rv(this._groups,this._parents)}function Pv(e,t){var n,s,r;return function(){var i=Hn(this,e),o=(this.style.removeProperty(e),Hn(this,e));return i===o?null:i===n&&o===s?r:r=t(n=i,s=o)}}function _u(e){return function(){this.style.removeProperty(e)}}function Fv(e,t,n){var s,r=n+"",i;return function(){var o=Hn(this,e);return o===r?null:o===s?i:i=t(s=o,n)}}function Lv(e,t,n){var s,r,i;return function(){var o=Hn(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Hn(this,e))),o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a))}}function qv(e,t){var n,s,r,i="style."+t,o="end."+i,a;return function(){var c=Ge(this,e),l=c.on,u=c.value[i]==null?a||(a=_u(t)):void 0;(l!==n||r!==u)&&(s=(n=l).copy()).on(o,r=u),c.on=s}}function zv(e,t,n){var s=(e+="")=="transform"?$1:gu;return t==null?this.styleTween(e,Pv(e,s)).on("end.style."+e,_u(e)):typeof t=="function"?this.styleTween(e,Lv(e,s,Uo(this,"style."+e,t))).each(qv(this._id,e)):this.styleTween(e,Fv(e,s,t),n).on("end.style."+e,null)}function Wv(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function Bv(e,t,n){var s,r;function i(){var o=t.apply(this,arguments);return o!==r&&(s=(r=o)&&Wv(e,o,n)),s}return i._value=t,i}function $v(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,Bv(e,t,n??""))}function Uv(e){return function(){this.textContent=e}}function jv(e){return function(){var t=e(this);this.textContent=t??""}}function Hv(e){return this.tween("text",typeof e=="function"?jv(Uo(this,"text",e)):Uv(e==null?"":e+""))}function Gv(e){return function(t){this.textContent=e.call(this,t)}}function Xv(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Gv(r)),t}return s._value=e,s}function Zv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xv(e))}function Yv(){for(var e=this._name,t=this._id,n=vu(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=Se(c,t);mi(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new We(s,this._parents,e,n)}function Qv(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--r===0&&i()}};n.each(function(){var l=Ge(this,s),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t})})}var Kv=0;function We(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function vu(){return++Kv}var Nn=Xs.prototype;We.prototype={constructor:We,select:Ov,selectAll:Dv,filter:kv,merge:Sv,selection:Vv,transition:Yv,call:Nn.call,nodes:Nn.nodes,node:Nn.node,size:Nn.size,empty:Nn.empty,each:Nn.each,on:Mv,attr:hv,attrTween:gv,style:zv,styleTween:$v,text:Hv,textTween:Zv,remove:Ev,tween:rv,delay:yv,duration:Tv,ease:Cv,end:Qv};function Jv(e){return+e}function ty(e){return e*e}function ey(e){return e*(2-e)}function Za(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function ny(e){return e*e*e}function sy(e){return--e*e*e+1}function yu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var jo=3,ry=function e(t){t=+t;function n(s){return Math.pow(s,t)}return n.exponent=e,n}(jo),iy=function e(t){t=+t;function n(s){return 1-Math.pow(1-s,t)}return n.exponent=e,n}(jo),oy=function e(t){t=+t;function n(s){return((s*=2)<=1?Math.pow(s,t):2-Math.pow(2-s,t))/2}return n.exponent=e,n}(jo),wu=Math.PI,bu=wu/2;function ay(e){return+e==1?1:1-Math.cos(e*bu)}function cy(e){return Math.sin(e*bu)}function ly(e){return(1-Math.cos(wu*e))/2}function tn(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function uy(e){return tn(1-+e)}function hy(e){return 1-tn(e)}function fy(e){return((e*=2)<=1?tn(1-e):2-tn(e-1))/2}function dy(e){return 1-Math.sqrt(1-e*e)}function py(e){return Math.sqrt(1- --e*e)}function my(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Ji=4/11,gy=6/11,_y=8/11,vy=3/4,yy=9/11,wy=10/11,by=15/16,Ty=21/22,xy=63/64,rr=1/Ji/Ji;function Cy(e){return 1-Br(1-e)}function Br(e){return(e=+e)<Ji?rr*e*e:e<_y?rr*(e-=gy)*e+vy:e<wy?rr*(e-=yy)*e+by:rr*(e-=Ty)*e+xy}function ky(e){return((e*=2)<=1?1-Br(1-e):Br(e-1)+1)/2}var Ho=1.70158,Sy=function e(t){t=+t;function n(s){return(s=+s)*s*(t*(s-1)+s)}return n.overshoot=e,n}(Ho),Ay=function e(t){t=+t;function n(s){return--s*s*((s+1)*t+s)+1}return n.overshoot=e,n}(Ho),Ny=function e(t){t=+t;function n(s){return((s*=2)<1?s*s*((t+1)*s-t):(s-=2)*s*((t+1)*s+t)+2)/2}return n.overshoot=e,n}(Ho),Xn=2*Math.PI,Go=1,Xo=.3,My=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=Xn);function r(i){return t*tn(- --i)*Math.sin((s-i)/n)}return r.amplitude=function(i){return e(i,n*Xn)},r.period=function(i){return e(t,i)},r}(Go,Xo),Ya=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=Xn);function r(i){return 1-t*tn(i=+i)*Math.sin((i+s)/n)}return r.amplitude=function(i){return e(i,n*Xn)},r.period=function(i){return e(t,i)},r}(Go,Xo),Iy=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=Xn);function r(i){return((i=i*2-1)<0?t*tn(-i)*Math.sin((s-i)/n):2-t*tn(i)*Math.sin((s+i)/n))/2}return r.amplitude=function(i){return e(i,n*Xn)},r.period=function(i){return e(t,i)},r}(Go,Xo),to={time:null,delay:0,duration:250,ease:yu};function Ey(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return to.time=pi(),to;return n}function Oy(e){var t,n;e instanceof We?(t=e._id,e=e._name):(t=vu(),(n=to).time=pi(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,c,l=0;l<a;++l)(c=o[l])&&mi(c,e,t,l,o,n||Ey(c,t));return new We(s,this._parents,e,t)}Xs.prototype.interrupt=ev;Xs.prototype.transition=Oy;var eo=Math.PI,no=2*eo,ln=1e-6,Dy=no-ln;function so(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Zo(){return new so}so.prototype=Zo.prototype={constructor:so,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,s){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(e,t,n,s,r,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+i)},arcTo:function(e,t,n,s,r){e=+e,t=+t,n=+n,s=+s,r=+r;var i=this._x1,o=this._y1,a=n-e,c=s-t,l=i-e,u=o-t,h=l*l+u*u;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>ln)if(!(Math.abs(u*a-c*l)>ln)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var f=n-i,d=s-o,p=a*a+c*c,m=f*f+d*d,g=Math.sqrt(p),_=Math.sqrt(h),w=r*Math.tan((eo-Math.acos((p+h-m)/(2*g*_)))/2),y=w/_,x=w/g;Math.abs(y-1)>ln&&(this._+="L"+(e+y*l)+","+(t+y*u)),this._+="A"+r+","+r+",0,0,"+ +(u*f>l*d)+","+(this._x1=e+x*a)+","+(this._y1=t+x*c)}},arc:function(e,t,n,s,r,i){e=+e,t=+t,n=+n,i=!!i;var o=n*Math.cos(s),a=n*Math.sin(s),c=e+o,l=t+a,u=1^i,h=i?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+l:(Math.abs(this._x1-c)>ln||Math.abs(this._y1-l)>ln)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%no+no),h>Dy?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):h>ln&&(this._+="A"+n+","+n+",0,"+ +(h>=eo)+","+u+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,s){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};var ue="$";function $r(){}$r.prototype=Tu.prototype={constructor:$r,has:function(e){return ue+e in this},get:function(e){return this[ue+e]},set:function(e,t){return this[ue+e]=t,this},remove:function(e){var t=ue+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ue&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ue&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ue&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ue&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ue&&++e;return e},empty:function(){for(var e in this)if(e[0]===ue)return!1;return!0},each:function(e){for(var t in this)t[0]===ue&&e(this[t],t.slice(1),this)}};function Tu(e,t){var n=new $r;if(e instanceof $r)e.each(function(a,c){n.set(c,a)});else if(Array.isArray(e)){var s=-1,r=e.length,i;if(t==null)for(;++s<r;)n.set(s,e[s]);else for(;++s<r;)n.set(t(i=e[s],s,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}function Qa(){}var an=Tu.prototype;Qa.prototype={constructor:Qa,has:an.has,add:function(e){return e+="",this[ue+e]=e,this},remove:an.remove,clear:an.clear,values:an.keys,size:an.size,empty:an.empty,each:an.each};function Ry(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ur(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Zn(e){return e=Ur(Math.abs(e)),e?e[1]:NaN}function Vy(e,t){return function(n,s){for(var r=n.length,i=[],o=0,a=e[0],c=0;r>0&&a>0&&(c+a+1>s&&(a=Math.max(1,s-c)),i.push(n.substring(r-=a,r+a)),!((c+=a+1)>s));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Py(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Fy=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jr(e){if(!(t=Fy.exec(e)))throw new Error("invalid format: "+e);var t;return new Yo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}jr.prototype=Yo.prototype;function Yo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ly(e){t:for(var t=e.length,n=1,s=-1,r;n<t;++n)switch(e[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+e[n])break t;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var xu;function qy(e,t){var n=Ur(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(xu=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Ur(e,Math.max(0,t+i-1))[0]}function Ka(e,t){var n=Ur(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const Ja={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:Ry,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Ka(e*100,t)},r:Ka,s:qy,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function tc(e){return e}var ec=Array.prototype.map,nc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zy(e){var t=e.grouping===void 0||e.thousands===void 0?tc:Vy(ec.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?tc:Py(ec.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"-":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(h){h=jr(h);var f=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,_=h.width,w=h.comma,y=h.precision,x=h.trim,v=h.type;v==="n"?(w=!0,v="g"):Ja[v]||(y===void 0&&(y=12),x=!0,v="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",C=m==="$"?s:/[%p]/.test(v)?o:"",S=Ja[v],M=/[defgprs%]/.test(v);y=y===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function N(A){var T=b,I=C,O,z,R;if(v==="c")I=S(A)+I,A="";else{A=+A;var P=A<0||1/A<0;if(A=isNaN(A)?c:S(Math.abs(A),y),x&&(A=Ly(A)),P&&+A==0&&p!=="+"&&(P=!1),T=(P?p==="("?p:a:p==="-"||p==="("?"":p)+T,I=(v==="s"?nc[8+xu/3]:"")+I+(P&&p==="("?")":""),M){for(O=-1,z=A.length;++O<z;)if(R=A.charCodeAt(O),48>R||R>57){I=(R===46?r+A.slice(O+1):A.slice(O))+I,A=A.slice(0,O);break}}}w&&!g&&(A=t(A,1/0));var U=T.length+A.length+I.length,q=U<_?new Array(_-U+1).join(f):"";switch(w&&g&&(A=t(q+A,q.length?_-I.length:1/0),q=""),d){case"<":A=T+A+I+q;break;case"=":A=T+q+A+I;break;case"^":A=q.slice(0,U=q.length>>1)+T+A+I+q.slice(U);break;default:A=q+T+A+I;break}return i(A)}return N.toString=function(){return h+""},N}function u(h,f){var d=l((h=jr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Zn(f)/3)))*3,m=Math.pow(10,-p),g=nc[8+p/3];return function(_){return d(m*_)+g}}return{format:l,formatPrefix:u}}var ir,gi,Cu;Wy({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Wy(e){return ir=zy(e),gi=ir.format,Cu=ir.formatPrefix,ir}function By(e){return Math.max(0,-Zn(Math.abs(e)))}function $y(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zn(t)/3)))*3-Zn(Math.abs(e)))}function Uy(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zn(t)-Zn(e))+1}function ns(){return Math.random()}(function e(t){function n(s,r){return s=s==null?0:+s,r=r==null?1:+r,arguments.length===1?(r=s,s=0):r-=s,function(){return t()*r+s}}return n.source=e,n})(ns);const jy=function e(t){function n(s,r){var i,o;return s=s==null?0:+s,r=r==null?1:+r,function(){var a;if(i!=null)a=i,i=null;else do i=t()*2-1,a=t()*2-1,o=i*i+a*a;while(!o||o>1);return s+r*a*Math.sqrt(-2*Math.log(o)/o)}}return n.source=e,n}(ns);(function e(t){function n(){var s=jy.source(t).apply(this,arguments);return function(){return Math.exp(s())}}return n.source=e,n})(ns);const Hy=function e(t){function n(s){return function(){for(var r=0,i=0;i<s;++i)r+=t();return r}}return n.source=e,n}(ns);(function e(t){function n(s){var r=Hy.source(t)(s);return function(){return r()/s}}return n.source=e,n})(ns);(function e(t){function n(s){return function(){return-Math.log(1-t())/s}}return n.source=e,n})(ns);function ku(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var Su=Array.prototype,Gy=Su.map,ro=Su.slice;function Xy(e){return function(){return e}}function Zy(e){return+e}var sc=[0,1];function En(e){return e}function io(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xy(isNaN(t)?NaN:.5)}function rc(e){var t=e[0],n=e[e.length-1],s;return t>n&&(s=t,t=n,n=s),function(r){return Math.max(t,Math.min(n,r))}}function Yy(e,t,n){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=io(r,s),i=n(o,i)):(s=io(s,r),i=n(i,o)),function(a){return i(s(a))}}function Qy(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=io(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(a){var c=Ul(e,a,1,s)-1;return i[c](r[c](a))}}function Ky(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jy(){var e=sc,t=sc,n=Bo,s,r,i,o=En,a,c,l;function u(){return a=Math.min(e.length,t.length)>2?Qy:Yy,c=l=null,h}function h(f){return isNaN(f=+f)?i:(c||(c=a(e.map(s),t,n)))(s(o(f)))}return h.invert=function(f){return o(r((l||(l=a(t,e.map(s),ge)))(f)))},h.domain=function(f){return arguments.length?(e=Gy.call(f,Zy),o===En||(o=rc(e)),u()):e.slice()},h.range=function(f){return arguments.length?(t=ro.call(f),u()):t.slice()},h.rangeRound=function(f){return t=ro.call(f),n=z1,u()},h.clamp=function(f){return arguments.length?(o=f?rc(e):En,h):o!==En},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,d){return s=f,r=d,u()}}function tw(e,t){return Jy()(e,t)}function ew(e,t,n,s){var r=K_(e,t,n),i;switch(s=jr(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=$y(r,o))&&(s.precision=i),Cu(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Uy(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=By(r))&&(s.precision=i-(s.type==="%")*2);break}}return gi(s)}function Au(e){var t=e.domain;return e.ticks=function(n){var s=t();return Q_(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var r=t();return ew(r[0],r[r.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),r=0,i=s.length-1,o=s[r],a=s[i],c;return a<o&&(c=o,o=a,a=c,c=r,r=i,i=c),c=lr(o,a,n),c>0?(o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c,c=lr(o,a,n)):c<0&&(o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c,c=lr(o,a,n)),c>0?(s[r]=Math.floor(o/c)*c,s[i]=Math.ceil(a/c)*c,t(s)):c<0&&(s[r]=Math.ceil(o*c)/c,s[i]=Math.floor(a*c)/c,t(s)),e},e}function Nu(){var e=tw(En,En);return e.copy=function(){return Ky(e,Nu())},ku.apply(e,arguments),Au(e)}function Mu(){var e=0,t=1,n=1,s=[.5],r=[0,1],i;function o(c){return c<=c?r[Ul(s,c,0,n)]:i}function a(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?(e=+c[0],t=+c[1],a()):[e,t]},o.range=function(c){return arguments.length?(n=(r=ro.call(c)).length-1,a()):r.slice()},o.invertExtent=function(c){var l=r.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,s[0]]:l>=n?[s[n-1],t]:[s[l-1],s[l]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return Mu().domain([e,t]).range(r).unknown(i)},ku.apply(Au(o),arguments)}function he(e){return function(){return e}}var ic=Math.abs,$t=Math.atan2,cn=Math.cos,nw=Math.max,Si=Math.min,Ae=Math.sin,On=Math.sqrt,Kt=1e-12,Ps=Math.PI,Hr=Ps/2,sw=2*Ps;function rw(e){return e>1?0:e<-1?Ps:Math.acos(e)}function oc(e){return e>=1?Hr:e<=-1?-Hr:Math.asin(e)}function iw(e){return e.innerRadius}function ow(e){return e.outerRadius}function aw(e){return e.startAngle}function cw(e){return e.endAngle}function lw(e){return e&&e.padAngle}function uw(e,t,n,s,r,i,o,a){var c=n-e,l=s-t,u=o-r,h=a-i,f=h*c-u*l;if(!(f*f<Kt))return f=(u*(t-i)-h*(e-r))/f,[e+f*c,t+f*l]}function or(e,t,n,s,r,i,o){var a=e-n,c=t-s,l=(o?i:-i)/On(a*a+c*c),u=l*c,h=-l*a,f=e+u,d=t+h,p=n+u,m=s+h,g=(f+p)/2,_=(d+m)/2,w=p-f,y=m-d,x=w*w+y*y,v=r-i,b=f*m-p*d,C=(y<0?-1:1)*On(nw(0,v*v*x-b*b)),S=(b*y-w*C)/x,M=(-b*w-y*C)/x,N=(b*y+w*C)/x,A=(-b*w+y*C)/x,T=S-g,I=M-_,O=N-g,z=A-_;return T*T+I*I>O*O+z*z&&(S=N,M=A),{cx:S,cy:M,x01:-u,y01:-h,x11:S*(r/v-1),y11:M*(r/v-1)}}function hw(){var e=iw,t=ow,n=he(0),s=null,r=aw,i=cw,o=lw,a=null;function c(){var l,u,h=+e.apply(this,arguments),f=+t.apply(this,arguments),d=r.apply(this,arguments)-Hr,p=i.apply(this,arguments)-Hr,m=ic(p-d),g=p>d;if(a||(a=l=Zo()),f<h&&(u=f,f=h,h=u),!(f>Kt))a.moveTo(0,0);else if(m>sw-Kt)a.moveTo(f*cn(d),f*Ae(d)),a.arc(0,0,f,d,p,!g),h>Kt&&(a.moveTo(h*cn(p),h*Ae(p)),a.arc(0,0,h,p,d,g));else{var _=d,w=p,y=d,x=p,v=m,b=m,C=o.apply(this,arguments)/2,S=C>Kt&&(s?+s.apply(this,arguments):On(h*h+f*f)),M=Si(ic(f-h)/2,+n.apply(this,arguments)),N=M,A=M,T,I;if(S>Kt){var O=oc(S/h*Ae(C)),z=oc(S/f*Ae(C));(v-=O*2)>Kt?(O*=g?1:-1,y+=O,x-=O):(v=0,y=x=(d+p)/2),(b-=z*2)>Kt?(z*=g?1:-1,_+=z,w-=z):(b=0,_=w=(d+p)/2)}var R=f*cn(_),P=f*Ae(_),U=h*cn(x),q=h*Ae(x);if(M>Kt){var F=f*cn(w),B=f*Ae(w),Q=h*cn(y),X=h*Ae(y),j;if(m<Ps&&(j=uw(R,P,Q,X,F,B,U,q))){var Z=R-j[0],st=P-j[1],at=F-j[0],$=B-j[1],Lt=1/Ae(rw((Z*at+st*$)/(On(Z*Z+st*st)*On(at*at+$*$)))/2),qt=On(j[0]*j[0]+j[1]*j[1]);N=Si(M,(h-qt)/(Lt-1)),A=Si(M,(f-qt)/(Lt+1))}}b>Kt?A>Kt?(T=or(Q,X,R,P,f,A,g),I=or(F,B,U,q,f,A,g),a.moveTo(T.cx+T.x01,T.cy+T.y01),A<M?a.arc(T.cx,T.cy,A,$t(T.y01,T.x01),$t(I.y01,I.x01),!g):(a.arc(T.cx,T.cy,A,$t(T.y01,T.x01),$t(T.y11,T.x11),!g),a.arc(0,0,f,$t(T.cy+T.y11,T.cx+T.x11),$t(I.cy+I.y11,I.cx+I.x11),!g),a.arc(I.cx,I.cy,A,$t(I.y11,I.x11),$t(I.y01,I.x01),!g))):(a.moveTo(R,P),a.arc(0,0,f,_,w,!g)):a.moveTo(R,P),!(h>Kt)||!(v>Kt)?a.lineTo(U,q):N>Kt?(T=or(U,q,F,B,h,-N,g),I=or(R,P,Q,X,h,-N,g),a.lineTo(T.cx+T.x01,T.cy+T.y01),N<M?a.arc(T.cx,T.cy,N,$t(T.y01,T.x01),$t(I.y01,I.x01),!g):(a.arc(T.cx,T.cy,N,$t(T.y01,T.x01),$t(T.y11,T.x11),!g),a.arc(0,0,h,$t(T.cy+T.y11,T.cx+T.x11),$t(I.cy+I.y11,I.cx+I.x11),g),a.arc(I.cx,I.cy,N,$t(I.y11,I.x11),$t(I.y01,I.x01),!g))):a.arc(0,0,h,x,y,g)}if(a.closePath(),l)return a=null,l+""||null}return c.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,u=(+r.apply(this,arguments)+ +i.apply(this,arguments))/2-Ps/2;return[cn(u)*l,Ae(u)*l]},c.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:he(+l),c):e},c.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:he(+l),c):t},c.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:he(+l),c):n},c.padRadius=function(l){return arguments.length?(s=l==null?null:typeof l=="function"?l:he(+l),c):s},c.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:he(+l),c):r},c.endAngle=function(l){return arguments.length?(i=typeof l=="function"?l:he(+l),c):i},c.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:he(+l),c):o},c.context=function(l){return arguments.length?(a=l??null,c):a},c}function Iu(e){this._context=e}Iu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fw(e){return new Iu(e)}function dw(e){return e[0]}function pw(e){return e[1]}function mw(){var e=dw,t=pw,n=he(!0),s=null,r=fw,i=null;function o(a){var c,l=a.length,u,h=!1,f;for(s==null&&(i=r(f=Zo())),c=0;c<=l;++c)!(c<l&&n(u=a[c],c,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,c,a),+t(u,c,a));if(f)return i=null,f+""||null}return o.x=function(a){return arguments.length?(e=typeof a=="function"?a:he(+a),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:he(+a),o):t},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:he(!!a),o):n},o.curve=function(a){return arguments.length?(r=a,s!=null&&(i=r(s)),o):r},o.context=function(a){return arguments.length?(a==null?s=i=null:i=r(s=a),o):s},o}function ac(e){return e<0?-1:1}function cc(e,t,n){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(n-e._y1)/(r||s<0&&-0),a=(i*r+o*s)/(s+r);return(ac(i)+ac(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function lc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ai(e,t,n){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,a=(i-s)/3;e._context.bezierCurveTo(s+a,r+a*t,i-a,o-a*n,i,o)}function Gr(e){this._context=e}Gr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ai(this,this._t0,lc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ai(this,lc(this,n=cc(this,e,t)),n);break;default:Ai(this,this._t0,n=cc(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(Gr.prototype).point=function(e,t){Gr.prototype.point.call(this,t,e)};function gw(e){return new Gr(e)}function Xr(){this._=null}function _i(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Xr.prototype={constructor:Xr,insert:function(e,t){var n,s,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=uc(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)s=n.U,n===s.L?(r=s.R,r&&r.C?(n.C=r.C=!1,s.C=!0,e=s):(e===n.R&&(os(this,n),e=n,n=e.U),n.C=!1,s.C=!0,as(this,s))):(r=s.L,r&&r.C?(n.C=r.C=!1,s.C=!0,e=s):(e===n.L&&(as(this,n),e=n,n=e.U),n.C=!1,s.C=!0,os(this,s))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,s=e.L,r=e.R,i,o;if(s?r?i=uc(r):i=s:i=r,t?t.L===e?t.L=i:t.R=i:this._=i,s&&r?(o=i.C,i.C=e.C,i.L=s,s.U=i,i!==r?(t=i.U,i.U=e.U,e=i.R,t.L=e,i.R=r,r.U=i):(i.U=t,t=i,e=i.R)):(o=e.C,e=i),e&&(e.U=t),!o){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,os(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,as(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,os(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,as(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,os(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,as(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function os(e,t){var n=t,s=t.R,r=n.U;r?r.L===n?r.L=s:r.R=s:e._=s,s.U=r,n.U=s,n.R=s.L,n.R&&(n.R.U=n),s.L=n}function as(e,t){var n=t,s=t.L,r=n.U;r?r.L===n?r.L=s:r.R=s:e._=s,s.U=r,n.U=s,n.L=s.R,n.L&&(n.L.U=n),s.R=n}function uc(e){for(;e.L;)e=e.L;return e}function fs(e,t,n,s){var r=[null,null],i=Ut.push(r)-1;return r.left=e,r.right=t,n&&Zr(r,e,t,n),s&&Zr(r,t,e,s),re[e.index].halfedges.push(i),re[t.index].halfedges.push(i),r}function cs(e,t,n){var s=[t,n];return s.left=e,s}function Zr(e,t,n,s){!e[0]&&!e[1]?(e[0]=s,e.left=t,e.right=n):e.left===n?e[1]=s:e[0]=s}function _w(e,t,n,s,r){var i=e[0],o=e[1],a=i[0],c=i[1],l=o[0],u=o[1],h=0,f=1,d=l-a,p=u-c,m;if(m=t-a,!(!d&&m>0)){if(m/=d,d<0){if(m<h)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>h&&(h=m)}if(m=s-a,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>h&&(h=m)}else if(d>0){if(m<h)return;m<f&&(f=m)}if(m=n-c,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>h&&(h=m)}if(m=r-c,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<f&&(f=m)}return!(h>0)&&!(f<1)||(h>0&&(e[0]=[a+h*d,c+h*p]),f<1&&(e[1]=[a+f*d,c+f*p])),!0}}}}}function vw(e,t,n,s,r){var i=e[1];if(i)return!0;var o=e[0],a=e.left,c=e.right,l=a[0],u=a[1],h=c[0],f=c[1],d=(l+h)/2,p=(u+f)/2,m,g;if(f===u){if(d<t||d>=s)return;if(l>h){if(!o)o=[d,n];else if(o[1]>=r)return;i=[d,r]}else{if(!o)o=[d,r];else if(o[1]<n)return;i=[d,n]}}else if(m=(l-h)/(f-u),g=p-m*d,m<-1||m>1)if(l>h){if(!o)o=[(n-g)/m,n];else if(o[1]>=r)return;i=[(r-g)/m,r]}else{if(!o)o=[(r-g)/m,r];else if(o[1]<n)return;i=[(n-g)/m,n]}else if(u<f){if(!o)o=[t,m*t+g];else if(o[0]>=s)return;i=[s,m*s+g]}else{if(!o)o=[s,m*s+g];else if(o[0]<t)return;i=[t,m*t+g]}return e[0]=o,e[1]=i,!0}function yw(e,t,n,s){for(var r=Ut.length,i;r--;)(!vw(i=Ut[r],e,t,n,s)||!_w(i,e,t,n,s)||!(Math.abs(i[0][0]-i[1][0])>yt||Math.abs(i[0][1]-i[1][1])>yt))&&delete Ut[r]}function ww(e){return re[e.index]={site:e,halfedges:[]}}function bw(e,t){var n=e.site,s=t.left,r=t.right;return n===r&&(r=s,s=n),r?Math.atan2(r[1]-s[1],r[0]-s[0]):(n===s?(s=t[1],r=t[0]):(s=t[0],r=t[1]),Math.atan2(s[0]-r[0],r[1]-s[1]))}function Eu(e,t){return t[+(t.left!==e.site)]}function Tw(e,t){return t[+(t.left===e.site)]}function xw(){for(var e=0,t=re.length,n,s,r,i;e<t;++e)if((n=re[e])&&(i=(s=n.halfedges).length)){var o=new Array(i),a=new Array(i);for(r=0;r<i;++r)o[r]=r,a[r]=bw(n,Ut[s[r]]);for(o.sort(function(c,l){return a[l]-a[c]}),r=0;r<i;++r)a[r]=s[o[r]];for(r=0;r<i;++r)s[r]=a[r]}}function Cw(e,t,n,s){var r=re.length,i,o,a,c,l,u,h,f,d,p,m,g,_=!0;for(i=0;i<r;++i)if(o=re[i]){for(a=o.site,l=o.halfedges,c=l.length;c--;)Ut[l[c]]||l.splice(c,1);for(c=0,u=l.length;c<u;)p=Tw(o,Ut[l[c]]),m=p[0],g=p[1],h=Eu(o,Ut[l[++c%u]]),f=h[0],d=h[1],(Math.abs(m-f)>yt||Math.abs(g-d)>yt)&&(l.splice(c,0,Ut.push(cs(a,p,Math.abs(m-e)<yt&&s-g>yt?[e,Math.abs(f-e)<yt?d:s]:Math.abs(g-s)<yt&&n-m>yt?[Math.abs(d-s)<yt?f:n,s]:Math.abs(m-n)<yt&&g-t>yt?[n,Math.abs(f-n)<yt?d:t]:Math.abs(g-t)<yt&&m-e>yt?[Math.abs(d-t)<yt?f:e,t]:null))-1),++u);u&&(_=!1)}if(_){var w,y,x,v=1/0;for(i=0,_=null;i<r;++i)(o=re[i])&&(a=o.site,w=a[0]-e,y=a[1]-t,x=w*w+y*y,x<v&&(v=x,_=o));if(_){var b=[e,t],C=[e,s],S=[n,s],M=[n,t];_.halfedges.push(Ut.push(cs(a=_.site,b,C))-1,Ut.push(cs(a,C,S))-1,Ut.push(cs(a,S,M))-1,Ut.push(cs(a,M,b))-1)}}for(i=0;i<r;++i)(o=re[i])&&(o.halfedges.length||delete re[i])}var Ou=[],Qo;function kw(){_i(this),this.x=this.y=this.arc=this.site=this.cy=null}function Dn(e){var t=e.P,n=e.N;if(!(!t||!n)){var s=t.site,r=e.site,i=n.site;if(s!==i){var o=r[0],a=r[1],c=s[0]-o,l=s[1]-a,u=i[0]-o,h=i[1]-a,f=2*(c*h-l*u);if(!(f>=-Iw)){var d=c*c+l*l,p=u*u+h*h,m=(h*d-l*p)/f,g=(c*p-u*d)/f,_=Ou.pop()||new kw;_.arc=e,_.site=r,_.x=m+o,_.y=(_.cy=g+a)+Math.sqrt(m*m+g*g),e.circle=_;for(var w=null,y=Fs._;y;)if(_.y<y.y||_.y===y.y&&_.x<=y.x)if(y.L)y=y.L;else{w=y.P;break}else if(y.R)y=y.R;else{w=y;break}Fs.insert(w,_),w||(Qo=_)}}}}function qn(e){var t=e.circle;t&&(t.P||(Qo=t.N),Fs.remove(t),Ou.push(t),_i(t),e.circle=null)}var Du=[];function Sw(){_i(this),this.edge=this.site=this.circle=null}function hc(e){var t=Du.pop()||new Sw;return t.site=e,t}function Ni(e){qn(e),zn.remove(e),Du.push(e),_i(e)}function Aw(e){var t=e.circle,n=t.x,s=t.cy,r=[n,s],i=e.P,o=e.N,a=[e];Ni(e);for(var c=i;c.circle&&Math.abs(n-c.circle.x)<yt&&Math.abs(s-c.circle.cy)<yt;)i=c.P,a.unshift(c),Ni(c),c=i;a.unshift(c),qn(c);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<yt&&Math.abs(s-l.circle.cy)<yt;)o=l.N,a.push(l),Ni(l),l=o;a.push(l),qn(l);var u=a.length,h;for(h=1;h<u;++h)l=a[h],c=a[h-1],Zr(l.edge,c.site,l.site,r);c=a[0],l=a[u-1],l.edge=fs(c.site,l.site,null,r),Dn(c),Dn(l)}function Nw(e){for(var t=e[0],n=e[1],s,r,i,o,a=zn._;a;)if(i=Ru(a,n)-t,i>yt)a=a.L;else if(o=t-Mw(a,n),o>yt){if(!a.R){s=a;break}a=a.R}else{i>-yt?(s=a.P,r=a):o>-yt?(s=a,r=a.N):s=r=a;break}ww(e);var c=hc(e);if(zn.insert(s,c),!(!s&&!r)){if(s===r){qn(s),r=hc(s.site),zn.insert(c,r),c.edge=r.edge=fs(s.site,c.site),Dn(s),Dn(r);return}if(!r){c.edge=fs(s.site,c.site);return}qn(s),qn(r);var l=s.site,u=l[0],h=l[1],f=e[0]-u,d=e[1]-h,p=r.site,m=p[0]-u,g=p[1]-h,_=2*(f*g-d*m),w=f*f+d*d,y=m*m+g*g,x=[(g*w-d*y)/_+u,(f*y-m*w)/_+h];Zr(r.edge,l,p,x),c.edge=fs(l,e,null,x),r.edge=fs(e,p,null,x),Dn(s),Dn(r)}}function Ru(e,t){var n=e.site,s=n[0],r=n[1],i=r-t;if(!i)return s;var o=e.P;if(!o)return-1/0;n=o.site;var a=n[0],c=n[1],l=c-t;if(!l)return a;var u=a-s,h=1/i-1/l,f=u/l;return h?(-f+Math.sqrt(f*f-2*h*(u*u/(-2*l)-c+l/2+r-i/2)))/h+s:(s+a)/2}function Mw(e,t){var n=e.N;if(n)return Ru(n,t);var s=e.site;return s[1]===t?s[0]:1/0}var yt=1e-6,Iw=1e-12,zn,re,Fs,Ut;function Ew(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function Ow(e,t){return t[1]-e[1]||t[0]-e[0]}function fc(e,t){var n=e.sort(Ow).pop(),s,r,i;for(Ut=[],re=new Array(e.length),zn=new Xr,Fs=new Xr;;)if(i=Qo,n&&(!i||n[1]<i.y||n[1]===i.y&&n[0]<i.x))(n[0]!==s||n[1]!==r)&&(Nw(n),s=n[0],r=n[1]),n=e.pop();else if(i)Aw(i.arc);else break;if(xw(),t){var o=+t[0][0],a=+t[0][1],c=+t[1][0],l=+t[1][1];yw(o,a,c,l),Cw(o,a,c,l)}this.edges=Ut,this.cells=re,zn=Fs=Ut=re=null}fc.prototype={constructor:fc,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(s){return Eu(t,e[s])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,s){if(a=(i=n.halfedges).length)for(var r=n.site,i,o=-1,a,c,l=t[i[a-1]],u=l.left===r?l.right:l.left;++o<a;)c=u,l=t[i[o]],u=l.left===r?l.right:l.left,c&&u&&s<c.index&&s<u.index&&Ew(r,c,u)<0&&e.push([r.data,c.data,u.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var s=this,r,i=s._found||0,o=s.cells.length,a;!(a=s.cells[i]);)if(++i>=o)return null;var c=e-a.site[0],l=t-a.site[1],u=c*c+l*l;do a=s.cells[r=i],i=null,a.halfedges.forEach(function(h){var f=s.edges[h],d=f.left;if(!((d===a.site||!d)&&!(d=f.right))){var p=e-d[0],m=t-d[1],g=p*p+m*m;g<u&&(u=g,i=d.index)}});while(i!==null);return s._found=r,n==null||u<=n*n?a.site:null}};function Rn(e,t,n){this.k=e,this.x=t,this.y=n}Rn.prototype={constructor:Rn,scale:function(e){return e===1?this:new Rn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Rn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Rn(1,0,0);Rn.prototype;var Dw=typeof global=="object"&&global&&global.Object===Object&&global;const Vu=Dw;var Rw=typeof self=="object"&&self&&self.Object===Object&&self,Vw=Vu||Rw||Function("return this")();const sn=Vw;var Pw=sn.Symbol;const Yr=Pw;var Pu=Object.prototype,Fw=Pu.hasOwnProperty,Lw=Pu.toString,ls=Yr?Yr.toStringTag:void 0;function qw(e){var t=Fw.call(e,ls),n=e[ls];try{e[ls]=void 0;var s=!0}catch{}var r=Lw.call(e);return s&&(t?e[ls]=n:delete e[ls]),r}var zw=Object.prototype,Ww=zw.toString;function Bw(e){return Ww.call(e)}var $w="[object Null]",Uw="[object Undefined]",dc=Yr?Yr.toStringTag:void 0;function Sn(e){return e==null?e===void 0?Uw:$w:dc&&dc in Object(e)?qw(e):Bw(e)}function Ys(e){return e!=null&&typeof e=="object"}var jw="[object Number]";function Hw(e){return typeof e=="number"||Ys(e)&&Sn(e)==jw}function Gw(e,t){for(var n,s=-1,r=e.length;++s<r;){var i=t(e[s]);i!==void 0&&(n=n===void 0?i:n+i)}return n}function Fu(e){return e}function Xw(e){return e&&e.length?Gw(e,Fu):0}var Zw=Object.prototype;function Lu(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Zw;return e===n}function Yw(e,t){return function(n){return e(t(n))}}var Qw=Yw(Object.keys,Object);const Kw=Qw;var Jw=Object.prototype,t2=Jw.hasOwnProperty;function e2(e){if(!Lu(e))return Kw(e);var t=[];for(var n in Object(e))t2.call(e,n)&&n!="constructor"&&t.push(n);return t}function Qr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var n2="[object AsyncFunction]",s2="[object Function]",r2="[object GeneratorFunction]",i2="[object Proxy]";function qu(e){if(!Qr(e))return!1;var t=Sn(e);return t==s2||t==r2||t==n2||t==i2}var o2=sn["__core-js_shared__"];const Mi=o2;var pc=function(){var e=/[^.]+$/.exec(Mi&&Mi.keys&&Mi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function a2(e){return!!pc&&pc in e}var c2=Function.prototype,l2=c2.toString;function An(e){if(e!=null){try{return l2.call(e)}catch{}try{return e+""}catch{}}return""}var u2=/[\\^$.*+?()[\]{}|]/g,h2=/^\[object .+?Constructor\]$/,f2=Function.prototype,d2=Object.prototype,p2=f2.toString,m2=d2.hasOwnProperty,g2=RegExp("^"+p2.call(m2).replace(u2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _2(e){if(!Qr(e)||a2(e))return!1;var t=qu(e)?g2:h2;return t.test(An(e))}function v2(e,t){return e==null?void 0:e[t]}function Qs(e,t){var n=v2(e,t);return _2(n)?n:void 0}var y2=Qs(sn,"DataView");const oo=y2;var w2=Qs(sn,"Map");const ao=w2;var b2=Qs(sn,"Promise");const co=b2;var T2=Qs(sn,"Set");const lo=T2;var x2=Qs(sn,"WeakMap");const uo=x2;var mc="[object Map]",C2="[object Object]",gc="[object Promise]",_c="[object Set]",vc="[object WeakMap]",yc="[object DataView]",k2=An(oo),S2=An(ao),A2=An(co),N2=An(lo),M2=An(uo),un=Sn;(oo&&un(new oo(new ArrayBuffer(1)))!=yc||ao&&un(new ao)!=mc||co&&un(co.resolve())!=gc||lo&&un(new lo)!=_c||uo&&un(new uo)!=vc)&&(un=function(e){var t=Sn(e),n=t==C2?e.constructor:void 0,s=n?An(n):"";if(s)switch(s){case k2:return yc;case S2:return mc;case A2:return gc;case N2:return _c;case M2:return vc}return t});const I2=un;var E2="[object Arguments]";function wc(e){return Ys(e)&&Sn(e)==E2}var zu=Object.prototype,O2=zu.hasOwnProperty,D2=zu.propertyIsEnumerable,R2=wc(function(){return arguments}())?wc:function(e){return Ys(e)&&O2.call(e,"callee")&&!D2.call(e,"callee")};const V2=R2;var P2=Array.isArray;const Ko=P2;var F2=9007199254740991;function Wu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=F2}function L2(e){return e!=null&&Wu(e.length)&&!qu(e)}function q2(){return!1}var Bu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bc=Bu&&typeof module=="object"&&module&&!module.nodeType&&module,z2=bc&&bc.exports===Bu,Tc=z2?sn.Buffer:void 0,W2=Tc?Tc.isBuffer:void 0,B2=W2||q2;const $2=B2;var U2="[object Arguments]",j2="[object Array]",H2="[object Boolean]",G2="[object Date]",X2="[object Error]",Z2="[object Function]",Y2="[object Map]",Q2="[object Number]",K2="[object Object]",J2="[object RegExp]",tb="[object Set]",eb="[object String]",nb="[object WeakMap]",sb="[object ArrayBuffer]",rb="[object DataView]",ib="[object Float32Array]",ob="[object Float64Array]",ab="[object Int8Array]",cb="[object Int16Array]",lb="[object Int32Array]",ub="[object Uint8Array]",hb="[object Uint8ClampedArray]",fb="[object Uint16Array]",db="[object Uint32Array]",dt={};dt[ib]=dt[ob]=dt[ab]=dt[cb]=dt[lb]=dt[ub]=dt[hb]=dt[fb]=dt[db]=!0;dt[U2]=dt[j2]=dt[sb]=dt[H2]=dt[rb]=dt[G2]=dt[X2]=dt[Z2]=dt[Y2]=dt[Q2]=dt[K2]=dt[J2]=dt[tb]=dt[eb]=dt[nb]=!1;function pb(e){return Ys(e)&&Wu(e.length)&&!!dt[Sn(e)]}function mb(e){return function(t){return e(t)}}var $u=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ms=$u&&typeof module=="object"&&module&&!module.nodeType&&module,gb=ms&&ms.exports===$u,Ii=gb&&Vu.process,_b=function(){try{var e=ms&&ms.require&&ms.require("util").types;return e||Ii&&Ii.binding&&Ii.binding("util")}catch{}}();const xc=_b;var Cc=xc&&xc.isTypedArray,vb=Cc?mb(Cc):pb;const yb=vb;var wb="[object Map]",bb="[object Set]",Tb=Object.prototype,xb=Tb.hasOwnProperty;function Jo(e){if(e==null)return!0;if(L2(e)&&(Ko(e)||typeof e=="string"||typeof e.splice=="function"||$2(e)||yb(e)||V2(e)))return!e.length;var t=I2(e);if(t==wb||t==bb)return!e.size;if(Lu(e))return!e2(e).length;for(var n in e)if(xb.call(e,n))return!1;return!0}function Cb(e){return e&&e.length?e[0]:void 0}function Uu(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ju(e,t,n){var s=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++s<r;)i[s]=e[s+t];return i}var kb=/\s/;function Sb(e){for(var t=e.length;t--&&kb.test(e.charAt(t)););return t}var Ab=/^\s+/;function Nb(e){return e&&e.slice(0,Sb(e)+1).replace(Ab,"")}var Mb="[object Symbol]";function Ib(e){return typeof e=="symbol"||Ys(e)&&Sn(e)==Mb}var kc=0/0,Eb=/^[-+]0x[0-9a-f]+$/i,Ob=/^0b[01]+$/i,Db=/^0o[0-7]+$/i,Rb=parseInt;function Vb(e){if(typeof e=="number")return e;if(Ib(e))return kc;if(Qr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Qr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Nb(e);var n=Ob.test(e);return n||Db.test(e)?Rb(e.slice(2),n?2:8):Eb.test(e)?kc:+e}var Sc=1/0,Pb=17976931348623157e292;function Fb(e){if(!e)return e===0?e:0;if(e=Vb(e),e===Sc||e===-Sc){var t=e<0?-1:1;return t*Pb}return e===e?e:0}function ta(e){var t=Fb(e),n=t%1;return t===t?n?t-n:t:0}function Lb(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===void 0?1:ta(t),ju(e,t<0?0:t,s)):[]}function qb(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}function zb(e){return typeof e=="function"?e:Fu}var Wb=9007199254740991,Ei=4294967295,Bb=Math.min;function $b(e,t){if(e=ta(e),e<1||e>Wb)return[];var n=Ei,s=Bb(e,Ei);t=zb(t),e-=Ei;for(var r=qb(s,t);++n<e;)t(n);return r}function Ub(e,t,n){return e&&e.length?(t=n||t===void 0?1:ta(t),ju(e,0,t<0?0:t)):[]}function Kr(e,t){return Xw(Ub(e,t))}function jb({tickData:e,customSegmentStops:t,min:n,max:s}){if(!Ko(t)||Jo(t))return e;if(Cb(t)!==n)throw new Error(`First value should be equivalent to min value given. Current min value - ${n}`);if(Uu(t)!==s)throw new Error(`Last value should be equivalent to max value given. Current min value - ${s}`);const r=t.map((i,o)=>{if(o!==0)return(i-t[o-1])/(s-n)});return Lb(r)}function Hb({heightRatio:e,radius:t}){if(e<0||e>1)throw new Error(`Invalid needleHeightRatio given - ${e}`);return Math.round(t*e)}function Gb({maxSegmentLabelCount:e,segmentCount:t}){const n=parseInt(e,10),s=parseInt(t,10);return Hw(n)&&n>=0&&n<=s?n:s}function Xb({min:e,max:t,segments:n}){return Nu().range([0,1]).domain([e,t])}function Zb(e,{min:t,max:n,segments:s}){let r=[];if(r=e.ticks(s),(Uu(r)!==n||s<r.length)&&r.length>1){const o=(n-t)/s;r=[t],$b(s,a=>{r.push(t+(a+1)*o)})}return r.length===1&&(r=[t,n]),r}function Yb(e,t){const n=t.labelFormat(e),s=t.currentValuePlaceholderStyle;return t.currentValueText.replace(s,n)}function Ac(e){return e*Math.PI/180}function Qb(e,t,n){return`translate(${e+t}, ${e+n})`}function Kb(e){return e.width/2}const ct={easeLinear:"easeLinear",easeQuadIn:"easeQuadIn",easeQuadOut:"easeQuadOut",easeQuadInOut:"easeQuadInOut",easeCubicIn:"easeCubicIn",easeCubicOut:"easeCubicOut",easeCubicInOut:"easeCubicInOut",easePolyIn:"easePolyIn",easePolyOut:"easePolyOut",easePolyInOut:"easePolyInOut",easeSinIn:"easeSinIn",easeSinOut:"easeSinOut",easeSinInOut:"easeSinInOut",easeExpIn:"easeExpIn",easeExpOut:"easeExpOut",easeExpInOut:"easeExpInOut",easeCircleIn:"easeCircleIn",easeCircleOut:"easeCircleOut",easeCircleInOut:"easeCircleInOut",easeBounceIn:"easeBounceIn",easeBounceOut:"easeBounceOut",easeBounceInOut:"easeBounceInOut",easeBackIn:"easeBackIn",easeBackOut:"easeBackOut",easeBackInOut:"easeBackInOut",easeElasticIn:"easeElasticIn",easeElasticOut:"easeElasticOut",easeElasticInOut:"easeElasticInOut",easeElastic:"easeElastic"},Nc={value:0,minValue:0,maxValue:1e3,forceRender:!1,width:300,height:300,paddingHorizontal:0,paddingVertical:0,fluidWidth:!1,dimensionUnit:"px",segments:5,maxSegmentLabels:-1,customSegmentStops:[],customSegmentLabels:[],needleColor:"steelblue",startColor:"#FF471A",endColor:"#33CC33",segmentColors:[],needleTransition:ct.easeQuadInOut,needleTransitionDuration:500,needleHeightRatio:.9,ringWidth:60,textColor:"#666",valueFormat:"",currentValueText:"${value}",currentValuePlaceholderStyle:"${value}",labelFontSize:"14px",valueTextFontSize:"16px",valueTextFontWeight:"bold"},Jb={ringInset:20,pointerWidth:10,pointerTailLength:5,minAngle:-90,maxAngle:90,labelInset:10},tT=({PROPS:e,parentWidth:t,parentHeight:n})=>{const s={width:e.fluidWidth?t:e.width,height:e.fluidWidth?n:e.height,paddingHorizontal:e.paddingHorizontal,paddingVertical:e.paddingVertical,dimensionUnit:e.dimensionUnit,ringWidth:e.ringWidth,minValue:e.minValue,maxValue:e.maxValue,needleColor:e.needleColor,majorTicks:e.segments,customSegmentStops:e.customSegmentStops,customSegmentLabels:e.customSegmentLabels,maxSegmentLabels:Gb({maxSegmentLabelCount:e.maxSegmentLabels,segmentCount:e.segments}),segmentColors:e.segmentColors,arcColorFn:e.segmentColors.length>0?Mu(e.segmentColors):H1(Rs(e.startColor),Rs(e.endColor)),needleTransition:e.needleTransition,needleTransitionDuration:e.needleTransitionDuration,needleHeightRatio:e.needleHeightRatio,textColor:e.textColor,labelFormat:gi(e.valueFormat),currentValueText:e.currentValueText,currentValuePlaceholderStyle:e.currentValuePlaceholderStyle,labelFontSize:e.labelFontSize,valueTextFontSize:e.valueTextFontSize,valueTextFontWeight:e.valueTextFontWeight};return Object.assign({},Jb,s)},eT=(e,t)=>({...e,...t});function nT(e){switch(e){case ct.easeLinear:return Jv;case ct.easeQuadIn:return ty;case ct.easeQuadOut:return ey;case ct.easeQuadInOut:return Za;case ct.easeCubicIn:return ny;case ct.easeCubicOut:return sy;case ct.easeCubicInOut:return yu;case ct.easePolyIn:return ry;case ct.easePolyOut:return iy;case ct.easePolyInOut:return oy;case ct.easeSinIn:return ay;case ct.easeSinOut:return cy;case ct.easeSinInOut:return ly;case ct.easeExpIn:return uy;case ct.easeExpOut:return hy;case ct.easeExpInOut:return fy;case ct.easeCircleIn:return dy;case ct.easeCircleOut:return py;case ct.easeCircleInOut:return my;case ct.easeBounceIn:return Cy;case ct.easeBounceOut:return Br;case ct.easeBounceInOut:return ky;case ct.easeBackIn:return Sy;case ct.easeBackOut:return Ay;case ct.easeBackInOut:return Ny;case ct.easeElasticIn:return My;case ct.easeElasticOut:return Ya;case ct.easeElasticInOut:return Iy;case ct.easeElastic:return Ya;default:return console.warn(`Warning: Invalid needle transition '${e}'. Switching to default transition 'easeQuadInOut'`),Za}}var Mc=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function sT(e,t){return!!(e===t||Mc(e)&&Mc(t))}function rT(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!sT(e[n],t[n]))return!1;return!0}function vi(e,t){t===void 0&&(t=rT);var n,s=[],r,i=!1;function o(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return i&&n===this&&t(a,s)||(r=e.apply(this,a),i=!0,n=this,s=a),r}return o}const ea=vi(aT),iT=vi(cT),na=vi(lT),oT=vi(uT);function aT(e){return Xb({min:e.minValue,max:e.maxValue,segments:e.maxSegmentLabels})}function cT(e){const t=ea(e);let n=Zb(t,{min:e.minValue,max:e.maxValue,segments:e.maxSegmentLabels});return e.customSegmentStops.length>0&&e.maxSegmentLabels!==0&&(n=e.customSegmentStops),n}function lT(e){const t=Y_(e.majorTicks).map(s=>1/e.majorTicks);return jb({tickData:t,customSegmentStops:e.customSegmentStops,min:e.minValue,max:e.maxValue})}function uT(e){const t=na(e),n=e.maxAngle-e.minAngle,s=e.width/2;return hw().innerRadius(s-e.ringWidth-e.ringInset).outerRadius(s-e.ringInset).startAngle((i,o)=>{const a=Kr(t,o);return Ac(e.minAngle+a*n)}).endAngle((i,o)=>{const a=Kr(t,o+1);return Ac(e.minAngle+a*n)})}const hT=({d3_refs:e,newValue:t,config:n})=>{const r=ea(n)(t),i=n.maxAngle-n.minAngle,o=n.minAngle+r*i;e.pointer.transition().duration(n.needleTransitionDuration).ease(nT(n.needleTransition)).attr("transform",`rotate(${o})`),e.current_value_text.text(Yb(t,n))},fT=({container:e,config:t})=>{const n=Kb(t),s=Qb(n,t.paddingHorizontal,t.paddingVertical),r=dT({container:e,config:t});return pT({config:t,svg:r,centerTx:s}),mT({config:t,svg:r,centerTx:s,r:n}),{current_value_text:_T({config:t,svg:r}),pointer:vT({config:t,svg:r,r:n,centerTx:s})}};function dT({container:e,config:t}){const n=t.width+2*t.paddingHorizontal,s=t.height+2*t.paddingVertical;return iu(e).append("svg:svg").attr("class","speedometer").attr("width",`${n}${t.dimensionUnit}`).attr("height",`${s}${t.dimensionUnit}`).style("width",`${n}${t.dimensionUnit}`).style("height",`${s}${t.dimensionUnit}`)}function pT({config:e,svg:t,centerTx:n}){const s=na(e),r=oT(e);t.append("g").attr("class","arc").attr("transform",n).selectAll("path").data(s).enter().append("path").attr("class","speedo-segment").attr("fill",(o,a)=>!Jo(e.segmentColors)&&e.segmentColors[a]?e.segmentColors[a]:e.arcColorFn(o*a)).attr("d",r)}function mT({config:e,svg:t,centerTx:n,r:s}){const r=iT(e),i=na(e),o=ea(e),a=e.maxAngle-e.minAngle,{customSegmentLabels:c}=e,l=Ko(c)&&!Jo(c),u=l&&c.length===i.length;if(l&&!u)throw new Error(`Custom Segment Labels should be an array with length of ${i.length}`);if(l&&u){gT({config:e,svg:t,centerTx:n,r:s,ticks:r,tickData:i,scale:o,range:a});return}t.append("g").attr("class","label").attr("transform",n).selectAll("text").data(r).enter().append("text").attr("transform",(f,d)=>{const p=e.customSegmentStops.length===0?o(f):Kr(i,d);return`rotate(${e.minAngle+p*a}) translate(0, ${e.labelInset-s})`}).text(e.labelFormat).attr("class","segment-value").style("text-anchor","middle").style("font-size",e.labelFontSize).style("font-weight","bold").style("fill",e.textColor)}function gT({config:e,svg:t,centerTx:n,r:s,ticks:r,tickData:i,scale:o,range:a}){const{customSegmentStops:c,customSegmentLabels:l}=e;function u(g,_){const w=c.length===0?o(g):Kr(i,_);return e.minAngle+w*a}const h=l.map((g,_)=>{const w=_,y=_+1,x=r[w],v=u(x,w),b=r[y];return(u(b,y)+v)/2}),f=s-e.ringWidth-e.ringInset,d=s-e.ringInset,p=d-(d-f)/2;t.append("g").attr("class","label").attr("transform",n).selectAll("text").data(l).enter().append("text").attr("transform",(g,_)=>{const w=h[_],y=`rotate(${w}) translate(0, ${e.labelInset-s})`,x=`rotate(${w}) translate(0, ${e.labelInset/2-p})`;return g.position==="OUTSIDE"?y:x}).text(g=>g.text||"").attr("class","segment-value").style("text-anchor","middle").style("font-size",g=>g.fontSize||e.labelFontSize).style("font-weight","bold").style("fill",g=>g.color||e.textColor)}function _T({config:e,svg:t}){const n=(e.width+2*e.paddingHorizontal)/2,s=(e.width+4*e.paddingVertical)/2;return t.append("g").attr("transform",`translate(${n}, ${s})`).append("text").attr("class","current-value").attr("text-anchor","middle").attr("y",23).text(e.currentValue).style("font-size",e.valueTextFontSize).style("font-weight",e.valueTextFontWeight).style("fill",e.textColor)}function vT({config:e,svg:t,r:n,centerTx:s}){const r=Hb({heightRatio:e.needleHeightRatio,radius:n}),i=[[e.pointerWidth/2,0],[0,-r],[-(e.pointerWidth/2),0],[0,e.pointerTailLength],[e.pointerWidth/2,0]],o=mw().curve(gw);return t.append("g").data([i]).attr("class","pointer").attr("transform",s).style("fill",e.needleColor).append("path").attr("d",o).attr("transform",`rotate(${e.minAngle})`)}function yT(e){let t;return{c(){t=H("div"),this.h()},l(n){t=G(n,"DIV",{id:!0}),V(t).forEach(E),this.h()},h(){k(t,"id","speedo-container")},m(n,s){it(n,t,s),e[2](t)},p:K,i:K,o:K,d(n){n&&E(t),e[2](null)}}}function wT(e,t,n){const s=["forceRender"];let r=sa(t,s),{forceRender:i=!1}=t,o=!1,a={},c={},l,u={pointer:!1,current_value_text:!1};function h(){c=Object.assign({},Nc,r),a=tT({PROPS:c,parentWidth:l.parentNode.clientWidth,parentHeight:l.parentNode.clientHeight}),iu(l).select("svg").remove(),u=fT({container:l,config:a})}function f(){hT({d3_refs:u,newValue:c.value||0,config:a})}Jr(()=>{h()}),Yu(()=>{i&&h(),o?(c=Object.assign({},Nc,r),a=eT(a,{labelFormat:gi(c.valueFormat||""),currentValueText:c.currentValueText||"${value}"})):o=!0,f()});function d(p){Ku[p?"unshift":"push"](()=>{l=p,n(0,l)})}return e.$$set=p=>{t=ra(ra({},t),Qu(p)),n(9,r=sa(t,s)),"forceRender"in p&&n(1,i=p.forceRender)},[l,i,d]}class Hu extends St{constructor(t){super(),At(this,t,wT,yT,Nt,{forceRender:1})}}function bT(e){let t,n,s,r,i,o;return r=new Hu({props:{value:e[0],minValue:0,maxValue:.2,ringWidth:8,width:96,height:60,segments:4,needleColor:"#4b5563",segmentColors:["#d1d5db","#d1d5db","#f87171","#dc2626"],maxSegmentLabels:0,currentValueText:" ",needleTransition:"easePolyOut",needleTransitionDuration:300,needleHeightRatio:"0.7",paddingHortizontal:"100px"}}),{c(){t=H("div"),n=H("div"),s=H("div"),pt(r.$$.fragment),this.h()},l(a){t=G(a,"DIV",{class:!0,style:!0});var c=V(t);n=G(c,"DIV",{class:!0});var l=V(n);s=G(l,"DIV",{class:!0});var u=V(s);mt(r.$$.fragment,u),u.forEach(E),l.forEach(E),c.forEach(E),this.h()},h(){k(s,"class","meter-wrapper-inner svelte-3lhgyl"),k(n,"class","meter-wrapper-outer svelte-3lhgyl"),k(t,"class","border-4 border-gray-500 bg-amber-50 rounded-md relative"),k(t,"style",i=`
				background-color: ${e[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`)},m(a,c){it(a,t,c),L(t,n),L(n,s),gt(r,s,null),o=!0},p(a,[c]){const l={};c&1&&(l.value=a[0]),r.$set(l),(!o||c&1&&i!==(i=`
				background-color: ${a[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`))&&k(t,"style",i)},i(a){o||(J(r.$$.fragment,a),o=!0)},o(a){et(r.$$.fragment,a),o=!1},d(a){a&&E(t),_t(r)}}}function TT(e,t,n){let{meterValue:s}=t;return e.$$set=r=>{"meterValue"in r&&n(0,s=r.meterValue)},[s]}class xT extends St{constructor(t){super(),At(this,t,TT,bT,Nt,{meterValue:0})}}function CT(e){let t,n,s=e[1]+1+"",r,i,o,a,c,l,u,h,f,d,p,m=e[0].instrumentNames[e[4]?1:0].toUpperCase()+"",g,_,w,y,x=e[4]?"ALT":"ORG",v,b,C,S,M,N=e[0].isMuted?"OFF":"ON",A,T,I,O,z,R,P,U=e[0].name.toUpperCase()+"",q,F,B,Q;return a=new xT({props:{meterValue:e[5]}}),h=new B_({props:{channelName:e[0].name,alternateTrack:e[4]}}),z=new Bl({props:{volume:e[3],handleVolumeChange:e[14]}}),{c(){t=H("div"),n=H("div"),r=_e(s),i=Ht(),o=H("div"),pt(a.$$.fragment),c=Ht(),l=H("div"),u=H("div"),pt(h.$$.fragment),d=Ht(),p=H("div"),g=_e(m),_=Ht(),w=H("div"),y=H("button"),v=_e(x),C=Ht(),S=H("div"),M=H("button"),A=_e(N),I=Ht(),O=H("div"),pt(z.$$.fragment),R=Ht(),P=H("div"),q=_e(U),this.h()},l(X){t=G(X,"DIV",{class:!0});var j=V(t);n=G(j,"DIV",{class:!0});var Z=V(n);r=ve(Z,s),Z.forEach(E),i=Gt(j),o=G(j,"DIV",{class:!0});var st=V(o);mt(a.$$.fragment,st),st.forEach(E),c=Gt(j),l=G(j,"DIV",{class:!0});var at=V(l);u=G(at,"DIV",{class:!0,style:!0});var $=V(u);mt(h.$$.fragment,$),$.forEach(E),d=Gt(at),p=G(at,"DIV",{class:!0});var Lt=V(p);g=ve(Lt,m),Lt.forEach(E),at.forEach(E),_=Gt(j),w=G(j,"DIV",{});var qt=V(w);y=G(qt,"BUTTON",{class:!0,style:!0});var ae=V(y);v=ve(ae,x),ae.forEach(E),qt.forEach(E),C=Gt(j),S=G(j,"DIV",{});var ce=V(S);M=G(ce,"BUTTON",{class:!0,style:!0});var rn=V(M);A=ve(rn,N),rn.forEach(E),ce.forEach(E),I=Gt(j),O=G(j,"DIV",{class:!0});var on=V(O);mt(z.$$.fragment,on),on.forEach(E),R=Gt(j),P=G(j,"DIV",{class:!0});var W=V(P);q=ve(W,U),W.forEach(E),j.forEach(E),this.h()},h(){k(n,"class","bg-stone-500 text-white w-7 h-7 mt-3 flex justify-center items-center font-bold rounded-full text-sm"),k(o,"class","w-full mt-1 p-1 px-2"),k(u,"class","bg-gray-600 text-white w-20 h-20 flex justify-center items-center rounded-t"),k(u,"style",f=`
				cursor: ${e[2]?"crosshair":"pointer"}
			`),k(p,"class","instrument-sign bg-gray-600 text-white w-20 h-5 text-xs font-extralight tracking-wide flex justify-center items-center mt-px rounded-b"),k(l,"class","mt-2 "),k(y,"class","button w-10 h-10 text-white shadow-xl m-5 rounded hover:bg-orange-600 focus:bg-orange-600 active:shadow-none text-sm"),k(y,"style",b=`background-color: ${e[4]?"#a78bfa":"#3b82f6"}`),k(M,"class","w-10 h-10 text-white shadow-xl m-5 mt-0 rounded hover:bg-orange-600 focus:bg-orange-600 active:shadow-none text-sm"),k(M,"style",T=`background-color: ${e[0].isMuted?"#f87171":"#4ade80"}`),k(O,"class","volume-container rounded-sm "),k(P,"class","bg-yellow-50 text-normal-400 w-5/6 mx-3 h-7 mt-4 flex justify-center items-center font-semibold rounded-sm text-sm"),k(t,"class","w-24 flex flex-col items-center bg-gray-300 m-1 pb-3")},m(X,j){it(X,t,j),L(t,n),L(n,r),L(t,i),L(t,o),gt(a,o,null),L(t,c),L(t,l),L(l,u),gt(h,u,null),L(l,d),L(l,p),L(p,g),L(t,_),L(t,w),L(w,y),L(y,v),L(t,C),L(t,S),L(S,M),L(M,A),L(t,I),L(t,O),gt(z,O,null),L(t,R),L(t,P),L(P,q),F=!0,B||(Q=[pe(l,"click",e[10]),pe(l,"keypress",e[10]),pe(y,"click",e[8]),pe(M,"click",e[13]),pe(O,"click",e[9]),pe(O,"keypress",e[9])],B=!0)},p(X,[j]){(!F||j&2)&&s!==(s=X[1]+1+"")&&hn(r,s);const Z={};j&32&&(Z.meterValue=X[5]),a.$set(Z);const st={};j&1&&(st.channelName=X[0].name),j&16&&(st.alternateTrack=X[4]),h.$set(st),(!F||j&4&&f!==(f=`
				cursor: ${X[2]?"crosshair":"pointer"}
			`))&&k(u,"style",f),(!F||j&17)&&m!==(m=X[0].instrumentNames[X[4]?1:0].toUpperCase()+"")&&hn(g,m),(!F||j&16)&&x!==(x=X[4]?"ALT":"ORG")&&hn(v,x),(!F||j&16&&b!==(b=`background-color: ${X[4]?"#a78bfa":"#3b82f6"}`))&&k(y,"style",b),(!F||j&1)&&N!==(N=X[0].isMuted?"OFF":"ON")&&hn(A,N),(!F||j&1&&T!==(T=`background-color: ${X[0].isMuted?"#f87171":"#4ade80"}`))&&k(M,"style",T);const at={};j&8&&(at.volume=X[3]),z.$set(at),(!F||j&1)&&U!==(U=X[0].name.toUpperCase()+"")&&hn(q,U)},i(X){F||(J(a.$$.fragment,X),J(h.$$.fragment,X),J(z.$$.fragment,X),F=!0)},o(X){et(a.$$.fragment,X),et(h.$$.fragment,X),et(z.$$.fragment,X),F=!1},d(X){X&&E(t),_t(a),_t(h),_t(z),B=!1,Dc(Q)}}}function kT(e,t,n){let{channelNr:s}=t,{channel:r}=t,{isPlaying:i}=t,{isAltKeyPressed:o}=t,a=0,c=!1;Jr(()=>{r.players.forEach((y,x)=>{y.mute=x===0?r.isMuted:!0})});const l=y=>{y==="turnon"?(n(0,r.players[0].mute=!!c,r),n(0,r.players[1].mute=!c,r),n(0,r.isMuted=!1,r)):(r.players.forEach(x=>x.mute=!0),n(0,r.isMuted=!0,r))},u=y=>{y<=1&&(r.gainNode.gain.rampTo(y,0),n(3,a=y))},h=()=>{n(4,c=!c),r.isMuted||(n(0,r.players[0].mute=!!c,r),n(0,r.players[1].mute=!c,r))};let f=0,d=null;const p=y=>{typeof y=="number"&&(y<0?n(5,f=0):y>.2?n(5,f=.2):n(5,f=Math.round(y*100)/100))},m=()=>{o&&u(.8)},g=()=>{o?l(r.isMuted?"turnon":"turnoff"):r.isMuted?l("turnon"):h()},_=()=>l(r.isMuted?"turnon":"turnoff"),w=y=>u(y.target.value);return e.$$set=y=>{"channelNr"in y&&n(1,s=y.channelNr),"channel"in y&&n(0,r=y.channel),"isPlaying"in y&&n(11,i=y.isPlaying),"isAltKeyPressed"in y&&n(2,o=y.isAltKeyPressed)},e.$$.update=()=>{if(e.$$.dirty&1&&n(3,a=r.gainNode.gain.value),e.$$.dirty&6145){let y=20;if(i&&!r.isMuted){let x=setInterval(()=>{p(r.meter.getValue())},y);n(12,d=x)}else d&&(clearInterval(d),n(12,d=null),n(5,f=0))}},[r,s,o,a,c,f,l,u,h,m,g,i,d,_,w]}class ST extends St{constructor(t){super(),At(this,t,kT,CT,Nt,{channelNr:1,channel:0,isPlaying:11,isAltKeyPressed:2})}}function AT(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 448 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class NT extends St{constructor(t){super(),At(this,t,null,AT,Nt,{})}}function MT(e){let t,n;return{c(){t=Tt("svg"),n=Tt("path"),this.h()},l(s){t=xt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=V(t);n=xt(r,"path",{d:!0}),V(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 448 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){it(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class IT extends St{constructor(t){super(),At(this,t,null,MT,Nt,{})}}function ET(e){let t,n,s,r;return n=new Hu({props:{value:e[0],minValue:0,maxValue:.2,ringWidth:10,width:130,height:80,segments:4,needleColor:"#4b5563",segmentColors:["#d1d5db","#d1d5db","#f87171","#dc2626"],maxSegmentLabels:0,currentValueText:" ",needleTransition:"easePolyOut",needleTransitionDuration:300}}),{c(){t=H("div"),pt(n.$$.fragment),this.h()},l(i){t=G(i,"DIV",{class:!0,style:!0});var o=V(t);mt(n.$$.fragment,o),o.forEach(E),this.h()},h(){k(t,"class","border-4 border-gray-500 bg-amber-50 rounded-md"),k(t,"style",s=`
				background-color: ${e[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`)},m(i,o){it(i,t,o),gt(n,t,null),r=!0},p(i,[o]){const a={};o&1&&(a.value=i[0]),n.$set(a),(!r||o&1&&s!==(s=`
				background-color: ${i[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`))&&k(t,"style",s)},i(i){r||(J(n.$$.fragment,i),r=!0)},o(i){et(n.$$.fragment,i),r=!1},d(i){i&&E(t),_t(n)}}}function OT(e,t,n){let{meterValue:s}=t;return e.$$set=r=>{"meterValue"in r&&n(0,s=r.meterValue)},[s]}class DT extends St{constructor(t){super(),At(this,t,OT,ET,Nt,{meterValue:0})}}function RT(e){let t,n,s;return n=new NT({}),{c(){t=H("span"),pt(n.$$.fragment),this.h()},l(r){t=G(r,"SPAN",{class:!0});var i=V(t);mt(n.$$.fragment,i),i.forEach(E),this.h()},h(){k(t,"class","text-3xl")},m(r,i){it(r,t,i),gt(n,t,null),s=!0},i(r){s||(J(n.$$.fragment,r),s=!0)},o(r){et(n.$$.fragment,r),s=!1},d(r){r&&E(t),_t(n)}}}function VT(e){let t,n;return t=new r_({props:{size:"40",color:"#FFFFFF",unit:"px",duration:"1s"}}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function PT(e){let t,n,s,r,i,o,a,c,l,u,h,f,d,p,m,g,_,w,y,x,v,b,C,S,M,N,A,T,I,O,z,R;c=new DT({props:{meterValue:e[5]}}),d=new Bl({props:{volume:e[4],handleVolumeChange:e[12]}});const P=[VT,RT],U=[];function q(F,B){return F[3]?1:0}return w=q(e),y=U[w]=P[w](e),M=new IT({}),{c(){t=H("div"),n=H("div"),s=H("section"),r=H("h1"),i=_e("MIXER"),o=Ht(),a=H("div"),pt(c.$$.fragment),l=Ht(),u=H("section"),h=H("div"),f=H("div"),pt(d.$$.fragment),p=Ht(),m=H("section"),g=H("div"),_=H("button"),y.c(),b=Ht(),C=H("button"),S=H("span"),pt(M.$$.fragment),A=Ht(),T=H("div"),I=_e("MASTER"),this.h()},l(F){t=G(F,"DIV",{class:!0});var B=V(t);n=G(B,"DIV",{class:!0});var Q=V(n);s=G(Q,"SECTION",{});var X=V(s);r=G(X,"H1",{class:!0});var j=V(r);i=ve(j,"MIXER"),j.forEach(E),o=Gt(X),a=G(X,"DIV",{class:!0});var Z=V(a);mt(c.$$.fragment,Z),Z.forEach(E),X.forEach(E),l=Gt(Q),u=G(Q,"SECTION",{});var st=V(u);h=G(st,"DIV",{class:!0});var at=V(h);f=G(at,"DIV",{class:!0});var $=V(f);mt(d.$$.fragment,$),$.forEach(E),at.forEach(E),st.forEach(E),p=Gt(Q),m=G(Q,"SECTION",{class:!0});var Lt=V(m);g=G(Lt,"DIV",{class:!0});var qt=V(g);_=G(qt,"BUTTON",{id:!0,class:!0});var ae=V(_);y.l(ae),ae.forEach(E),b=Gt(qt),C=G(qt,"BUTTON",{id:!0,class:!0});var ce=V(C);S=G(ce,"SPAN",{class:!0});var rn=V(S);mt(M.$$.fragment,rn),rn.forEach(E),ce.forEach(E),qt.forEach(E),A=Gt(Lt),T=G(Lt,"DIV",{class:!0,style:!0});var on=V(T);I=ve(on,"MASTER"),on.forEach(E),Lt.forEach(E),Q.forEach(E),B.forEach(E),this.h()},h(){k(r,"class","text-gray-700 flex justify-center font-thin tracking-wider text-3xl pt-2"),k(a,"class","mt-5 mb-3"),k(f,"class","master-volume-container svelte-1vn2afs"),k(h,"class","bg-gray-400 rounded w-20 h-72 relative mb-2"),k(_,"id","play-button"),_.disabled=x=!e[3],k(_,"class",v=ia(`mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500  focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center ${e[2]?"play-button--active":""}`)+" svelte-1vn2afs"),k(S,"class","text-3xl"),k(C,"id","stop-button"),C.disabled=N=!e[3],k(C,"class","mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500 focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center svelte-1vn2afs"),k(g,"class","flex"),k(T,"class","bg-yellow-50 text-normal-400 mx-3 h-7 mt-4 flex justify-center items-center font-semibold rounded-sm text-sm"),k(T,"style",`
          width: 176px
        `),k(m,"class","flex flex-col items-center"),k(n,"class","flex flex-col justify-between items-center bg-gray-300 w-full m-2 ml-1 pb-3"),k(t,"class","flex justify-center bg-gray-400 w-64")},m(F,B){it(F,t,B),L(t,n),L(n,s),L(s,r),L(r,i),L(s,o),L(s,a),gt(c,a,null),L(n,l),L(n,u),L(u,h),L(h,f),gt(d,f,null),L(n,p),L(n,m),L(m,g),L(g,_),U[w].m(_,null),L(g,b),L(g,C),L(C,S),gt(M,S,null),L(m,A),L(m,T),L(T,I),O=!0,z||(R=[pe(h,"click",e[7]),pe(h,"keypress",e[7]),pe(_,"click",function(){oa(e[0])&&e[0].apply(this,arguments)}),pe(C,"click",function(){oa(e[1])&&e[1].apply(this,arguments)})],z=!0)},p(F,[B]){e=F;const Q={};B&32&&(Q.meterValue=e[5]),c.$set(Q);const X={};B&16&&(X.volume=e[4]),d.$set(X);let j=w;w=q(e),w!==j&&(Be(),et(U[j],1,1,()=>{U[j]=null}),$e(),y=U[w],y||(y=U[w]=P[w](e),y.c()),J(y,1),y.m(_,null)),(!O||B&8&&x!==(x=!e[3]))&&(_.disabled=x),(!O||B&4&&v!==(v=ia(`mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500  focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center ${e[2]?"play-button--active":""}`)+" svelte-1vn2afs"))&&k(_,"class",v),(!O||B&8&&N!==(N=!e[3]))&&(C.disabled=N)},i(F){O||(J(c.$$.fragment,F),J(d.$$.fragment,F),J(y),J(M.$$.fragment,F),O=!0)},o(F){et(c.$$.fragment,F),et(d.$$.fragment,F),et(y),et(M.$$.fragment,F),O=!1},d(F){F&&E(t),_t(c),_t(d),U[w].d(),_t(M),z=!1,Dc(R)}}}function FT(e,t,n){let{handlePlay:s}=t,{handleStop:r}=t,{isPlaying:i}=t,{masterGainNode:o}=t,{masterMeter:a}=t,{isAudioLoaded:c}=t,{isAltKeyPressed:l}=t,u=0;const h=_=>{_<=1&&(o==null||o.gain.rampTo(_,0),n(4,u=_))};let f=0,d=null;const p=_=>{typeof _=="number"&&(_<0?n(5,f=0):_>.2?n(5,f=.2):n(5,f=Math.round(_*100)/100))},m=()=>{l&&h(.8)},g=_=>h(_.target.value);return e.$$set=_=>{"handlePlay"in _&&n(0,s=_.handlePlay),"handleStop"in _&&n(1,r=_.handleStop),"isPlaying"in _&&n(2,i=_.isPlaying),"masterGainNode"in _&&n(8,o=_.masterGainNode),"masterMeter"in _&&n(9,a=_.masterMeter),"isAudioLoaded"in _&&n(3,c=_.isAudioLoaded),"isAltKeyPressed"in _&&n(10,l=_.isAltKeyPressed)},e.$$.update=()=>{if(e.$$.dirty&256&&n(4,u=(o==null?void 0:o.gain.value)||.8),e.$$.dirty&2564){let _=20;if(i){let w=setInterval(()=>{p(a.getValue())},_);n(11,d=w)}else d&&(clearInterval(d),n(11,d=null),n(5,f=0))}if(e.$$.dirty&8&&c){const _=document.getElementById("play-button");setTimeout(()=>{_==null||_.focus()},0)}},[s,r,i,c,u,f,h,m,o,a,l,d,g]}class LT extends St{constructor(t){super(),At(this,t,FT,PT,Nt,{handlePlay:0,handleStop:1,isPlaying:2,masterGainNode:8,masterMeter:9,isAudioLoaded:3,isAltKeyPressed:10})}}function Ic(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function qT(e){let t,n,s;return n=new a_({props:{size:"100",color:"#e5e7eb",unit:"px",duration:"1s"}}),{c(){t=H("div"),pt(n.$$.fragment),this.h()},l(r){t=G(r,"DIV",{class:!0});var i=V(t);mt(n.$$.fragment,i),i.forEach(E),this.h()},h(){k(t,"class","h-full border-4 border-gray-400 flex justify-center items-center")},m(r,i){it(r,t,i),gt(n,t,null),s=!0},p:K,i(r){s||(J(n.$$.fragment,r),s=!0)},o(r){et(n.$$.fragment,r),s=!1},d(r){r&&E(t),_t(n)}}}function zT(e){let t,n,s,r,i,o,a,c=e[3],l=[];for(let h=0;h<c.length;h+=1)l[h]=Ec(Ic(e,c,h));const u=h=>et(l[h],1,1,()=>{l[h]=null});return i=new LT({props:{handlePlay:e[0],handleStop:e[1],isPlaying:e[2],masterGainNode:e[4],masterMeter:e[5],isAudioLoaded:e[6],isAltKeyPressed:e[7]}}),{c(){t=H("div"),n=H("div"),s=H("div");for(let h=0;h<l.length;h+=1)l[h].c();r=Ht(),pt(i.$$.fragment),this.h()},l(h){t=G(h,"DIV",{class:!0});var f=V(t);n=G(f,"DIV",{class:!0});var d=V(n);s=G(d,"DIV",{class:!0});var p=V(s);for(let m=0;m<l.length;m+=1)l[m].l(p);p.forEach(E),d.forEach(E),r=Gt(f),mt(i.$$.fragment,f),f.forEach(E),this.h()},h(){k(s,"class","flex"),k(n,"class","channels-container flex pl-1 py-1 bg-gray-400 svelte-os3m6x"),k(t,"class","flex")},m(h,f){it(h,t,f),L(t,n),L(n,s);for(let d=0;d<l.length;d+=1)l[d].m(s,null);L(t,r),gt(i,t,null),a=!0},p(h,f){if(f&140){c=h[3];let p;for(p=0;p<c.length;p+=1){const m=Ic(h,c,p);l[p]?(l[p].p(m,f),J(l[p],1)):(l[p]=Ec(m),l[p].c(),J(l[p],1),l[p].m(s,null))}for(Be(),p=c.length;p<l.length;p+=1)u(p);$e()}const d={};f&1&&(d.handlePlay=h[0]),f&2&&(d.handleStop=h[1]),f&4&&(d.isPlaying=h[2]),f&16&&(d.masterGainNode=h[4]),f&32&&(d.masterMeter=h[5]),f&64&&(d.isAudioLoaded=h[6]),f&128&&(d.isAltKeyPressed=h[7]),i.$set(d)},i(h){if(!a){for(let f=0;f<c.length;f+=1)J(l[f]);J(i.$$.fragment,h),Ju(()=>{o||(o=aa(t,Na,{},!0)),o.run(1)}),a=!0}},o(h){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)et(l[f]);et(i.$$.fragment,h),o||(o=aa(t,Na,{},!1)),o.run(0),a=!1},d(h){h&&E(t),Oc(l,h),_t(i),h&&o&&o.end()}}}function Ec(e){let t,n;return t=new ST({props:{channelNr:e[10],channel:e[8],isPlaying:e[2],isAltKeyPressed:e[7]}}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},p(s,r){const i={};r&8&&(i.channel=s[8]),r&4&&(i.isPlaying=s[2]),r&128&&(i.isAltKeyPressed=s[7]),t.$set(i)},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function WT(e){let t,n,s,r,i,o,a,c,l;const u=[zT,qT],h=[];function f(d,p){return d[3].length>0?0:1}return a=f(e),c=h[a]=u[a](e),{c(){t=H("div"),n=H("div"),s=H("div"),r=Ht(),i=H("div"),o=H("div"),c.c(),this.h()},l(d){t=G(d,"DIV",{class:!0});var p=V(t);n=G(p,"DIV",{class:!0});var m=V(n);s=G(m,"DIV",{class:!0}),V(s).forEach(E),r=Gt(m),i=G(m,"DIV",{class:!0});var g=V(i);o=G(g,"DIV",{class:!0});var _=V(o);c.l(_),_.forEach(E),g.forEach(E),m.forEach(E),p.forEach(E),this.h()},h(){k(s,"class","mixer-bottom-wrapper absolute w-full h-full rounded-lg shadow-2xl svelte-os3m6x"),k(o,"class","mixer-container bg-gray-400 rounded overflow-hidden h-full svelte-os3m6x"),k(i,"class","mixer-top-wrapper box-shadow-3d p-5 bg-gray-600 rounded-lg relative z-10 h-full svelte-os3m6x"),k(n,"class","relative outer-wrapper svelte-os3m6x"),k(t,"class","app flex justify-center p-5 mt-5")},m(d,p){it(d,t,p),L(t,n),L(n,s),L(n,r),L(n,i),L(i,o),h[a].m(o,null),l=!0},p(d,[p]){let m=a;a=f(d),a===m?h[a].p(d,p):(Be(),et(h[m],1,1,()=>{h[m]=null}),$e(),c=h[a],c?c.p(d,p):(c=h[a]=u[a](d),c.c()),J(c,1),c.m(o,null))},i(d){l||(J(c),l=!0)},o(d){et(c),l=!1},d(d){d&&E(t),h[a].d()}}}function BT(e,t,n){let{handlePlay:s}=t,{handleStop:r}=t,{isPlaying:i}=t,{channels:o}=t,{masterGainNode:a}=t,{masterMeter:c}=t,{isAudioLoaded:l}=t,u=!1;return Jr(()=>{const h=d=>{d.key==="Alt"&&n(7,u=!0)},f=d=>{d.key==="Alt"&&n(7,u=!1)};return addEventListener("keydown",h),addEventListener("keyup",f),()=>{removeEventListener("keydown",h),removeEventListener("keyup",f)}}),e.$$set=h=>{"handlePlay"in h&&n(0,s=h.handlePlay),"handleStop"in h&&n(1,r=h.handleStop),"isPlaying"in h&&n(2,i=h.isPlaying),"channels"in h&&n(3,o=h.channels),"masterGainNode"in h&&n(4,a=h.masterGainNode),"masterMeter"in h&&n(5,c=h.masterMeter),"isAudioLoaded"in h&&n(6,l=h.isAudioLoaded)},[s,r,i,o,a,c,l,u]}class $T extends St{constructor(t){super(),At(this,t,BT,WT,Nt,{handlePlay:0,handleStop:1,isPlaying:2,channels:3,masterGainNode:4,masterMeter:5,isAudioLoaded:6})}}function UT(e){let t,n;return t=new $T({props:{handlePlay:e[6],handleStop:e[5],isPlaying:e[0],channels:e[3],masterGainNode:e[1],masterMeter:e[2],isAudioLoaded:e[4]}}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},p(s,[r]){const i={};r&1&&(i.isPlaying=s[0]),r&8&&(i.channels=s[3]),r&2&&(i.masterGainNode=s[1]),r&4&&(i.masterMeter=s[2]),r&16&&(i.isAudioLoaded=s[4]),t.$set(i)},i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}function jT(e,t,n){let s=!1,r,i,o=[],a=!1,c=!0;const l=(d,p,m)=>bi.map((g,_)=>{const w=y=>y.slice(y.indexOf("_")+1);return{name:g,gainNode:d[_],meter:p[_],players:m.slice(_*2,_*2+2),isMuted:!0,instrumentNames:[w(se[_*2]),w(se[_*2+1])]}}),u=()=>{n(3,o[0].isMuted=!1,o),o[1].gainNode.gain.rampTo(.7,0),o[3].gainNode.gain.rampTo(.4,0),o[4].gainNode.gain.rampTo(.6,0)};return Jr(async()=>{n(1,r=await new Wt(.8).toDestination()),n(2,i=new Es({normalRange:!0,smoothing:.95})),r.connect(i);const p=await(async()=>await bi.map(x=>new Wt(.8).connect(r)))(),g=await(async()=>{const x=await bi.map(v=>new Es({normalRange:!0,smoothing:.95}));return x.forEach((v,b)=>p[b].connect(x[b])),x})(),_=await new Er(e_),w=se.map(x=>_.player(x));w.forEach((x,v)=>{const b=Math.floor(v/2);x.mute=!0,x.loop=!0,x.connect(p[b]).sync().start()}),n(3,o=await l(p,g,w)),u();let y=null;y=setInterval(()=>{w.every(v=>v.loaded)&&(n(4,a=!0),console.log("All tracks loaded..."),y&&(clearInterval(y),y=null))},200)}),[s,r,i,o,a,()=>{Aa.stop(),n(0,s=!1)},async()=>{c&&(await Cg(),c=!1,console.log("Initial audio start...")),a&&(Aa.start(),n(0,s=!0))}]}class HT extends St{constructor(t){super(),At(this,t,jT,UT,Nt,{})}}function GT(e){let t,n;return t=new HT({}),{c(){pt(t.$$.fragment)},l(s){mt(t.$$.fragment,s)},m(s,r){gt(t,s,r),n=!0},p:K,i(s){n||(J(t.$$.fragment,s),n=!0)},o(s){et(t.$$.fragment,s),n=!1},d(s){_t(t,s)}}}class kx extends St{constructor(t){super(),At(this,t,null,GT,Nt,{})}}export{kx as default};
