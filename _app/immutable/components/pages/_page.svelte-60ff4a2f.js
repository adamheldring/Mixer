import{I as Bl,S as Nt,i as Mt,s as It,J as vt,K as yt,m as F,h as E,n as k,b as at,D as L,B as K,k as H,l as G,g as Je,t as nt,d as tn,f as tt,w as wt,x as bt,y as xt,z as Tt,a as Ht,c as Gt,L as me,q as he,r as fe,u as Xe,M as ea,o as Vs,j as zl,N as na,O as Ul,P as jl,Q as Sc,R as sa,T as ra,U as Hl,V as ia,W as Gl}from"../../chunks/index-208105db.js";const Ac="14.7.77",oa=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),aa=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),Ii=(e,t)=>({startTime:t,type:"setValue",value:e}),Nc=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),Mc=(e,t,{startTime:n,target:s,timeConstant:r})=>s+(t-s)*Math.exp((n-e)/r),An=e=>e.type==="exponentialRampToValue",dr=e=>e.type==="linearRampToValue",Ge=e=>An(e)||dr(e),uo=e=>e.type==="setValue",Ve=e=>e.type==="setValueCurve",pr=(e,t,n,s)=>{const r=e[t];return r===void 0?s:Ge(r)||uo(r)?r.value:Ve(r)?r.values[r.values.length-1]:Mc(n,pr(e,t-1,r.startTime,s),r)},ca=(e,t,n,s,r)=>n===void 0?[s.insertTime,r]:Ge(n)?[n.endTime,n.value]:uo(n)?[n.startTime,n.value]:Ve(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,pr(e,t-1,n.startTime,r)],Ei=e=>e.type==="cancelAndHold",Oi=e=>e.type==="cancelScheduledValues",He=e=>Ei(e)||Oi(e)?e.cancelTime:An(e)||dr(e)?e.endTime:e.startTime,ua=(e,t,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((e-t)/(s-t)):0,la=(e,t,n,{endTime:s,value:r})=>n+(e-t)/(s-t)*(r-n),Xl=(e,t)=>{const n=Math.floor(t),s=Math.ceil(t);return n===s?e[n]:(1-(t-n))*e[n]+(1-(s-t))*e[s]},Zl=(e,{duration:t,startTime:n,values:s})=>{const r=(e-n)/t*(s.length-1);return Xl(s,r)},Ks=e=>e.type==="setTarget";class Yl{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=He(t);if(Ei(t)||Oi(t)){const s=this._automationEvents.findIndex(i=>Oi(t)&&Ve(i)?i.startTime+i.duration>=n:He(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Ei(t)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ge(r)){if(Ks(i))throw new Error("The internal list is malformed.");const o=Ve(i)?i.startTime+i.duration:He(i),a=Ve(i)?i.values[i.values.length-1]:i.value,c=An(r)?ua(n,o,a,r):la(n,o,a,r),u=An(r)?oa(c,n,this._currenTime):aa(c,n,this._currenTime);this._automationEvents.push(u)}i!==void 0&&Ks(i)&&this._automationEvents.push(Ii(this.getValue(n),n)),i!==void 0&&Ve(i)&&i.startTime+i.duration>n&&(this._automationEvents[this._automationEvents.length-1]=Nc(new Float32Array([6,7]),i.startTime,n-i.startTime))}}else{const s=this._automationEvents.findIndex(o=>He(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Ve(r)&&He(r)+r.duration>n)return!1;const i=An(t)?oa(t.value,t.endTime,this._currenTime):dr(t)?aa(t.value,n,this._currenTime):t;if(s===-1)this._automationEvents.push(i);else{if(Ve(t)&&n+t.duration>He(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(t){const n=this._automationEvents.findIndex(s=>He(s)>t);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];Ks(r)&&s.unshift(Ii(pr(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>He(o)>t),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&Ks(i)&&(s===void 0||!Ge(s)||s.insertTime>t))return Mc(t,pr(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&uo(i)&&(s===void 0||!Ge(s)))return i.value;if(i!==void 0&&Ve(i)&&(s===void 0||!Ge(s)||i.startTime+i.duration>t))return t<i.startTime+i.duration?Zl(t,i):i.values[i.values.length-1];if(i!==void 0&&Ge(i)&&(s===void 0||!Ge(s)))return i.value;if(s!==void 0&&An(s)){const[o,a]=ca(this._automationEvents,r,i,s,this._defaultValue);return ua(t,o,a,s)}if(s!==void 0&&dr(s)){const[o,a]=ca(this._automationEvents,r,i,s,this._defaultValue);return la(t,o,a,s)}return this._defaultValue}}const Ql=e=>({cancelTime:e,type:"cancelAndHold"}),Kl=e=>({cancelTime:e,type:"cancelScheduledValues"}),Jl=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),th=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),eh=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),nh=()=>new DOMException("","AbortError"),sh=e=>(t,n,[s,r,i],o)=>{e(t[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},rh=e=>(t,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);e.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},ih=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Ln=new WeakSet,Ic=new WeakMap,lo=new WeakMap,Ec=new WeakMap,ho=new WeakMap,Kr=new WeakMap,Oc=new WeakMap,Di=new WeakMap,Ri=new WeakMap,Vi=new WeakMap,Dc={construct(){return Dc}},oh=e=>{try{const t=new Proxy(e,Dc);new t}catch{return!1}return!0},ha=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,fa=(e,t)=>{const n=[];let s=e.replace(/^[\s]+/,""),r=s.match(ha);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,t).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(ha)}return[n.join(";"),s]},da=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},pa=e=>{if(!oh(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},ah=(e,t,n,s,r,i,o,a,c,u,l,h,f)=>{let d=0;return(p,m,g={credentials:"omit"})=>{const _=l.get(p);if(_!==void 0&&_.has(m))return Promise.resolve();const w=u.get(p);if(w!==void 0){const v=w.get(m);if(v!==void 0)return v}const y=i(p),T=y.audioWorklet===void 0?r(m).then(([v,b])=>{const[C,S]=fa(v,b),M=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}
})})(window,'_AWGS')`;return n(M)}).then(()=>{const v=f._AWGS.pop();if(v===void 0)throw new SyntaxError;s(y.currentTime,y.sampleRate,()=>v(class{},void 0,(b,C)=>{if(b.trim()==="")throw t();const S=Ri.get(y);if(S!==void 0){if(S.has(b))throw t();pa(C),da(C.parameterDescriptors),S.set(b,C)}else pa(C),da(C.parameterDescriptors),Ri.set(y,new Map([[b,C]]))},y.sampleRate,void 0,void 0))}):Promise.all([r(m),Promise.resolve(e(h,h))]).then(([[v,b],C])=>{const S=d+1;d=S;const[M,N]=fa(v,b),O=`${M};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`,q=new Blob([O],{type:"application/javascript; charset=utf-8"}),V=URL.createObjectURL(q);return y.audioWorklet.addModule(V,g).then(()=>{if(a(y))return y;const D=o(y);return D.audioWorklet.addModule(V,g).then(()=>D)}).then(D=>{if(c===null)throw new SyntaxError;try{new c(D,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(V))});return w===void 0?u.set(p,new Map([[m,T]])):w.set(m,T),T.then(()=>{const v=l.get(p);v===void 0?l.set(p,new Set([m])):v.add(m)}).finally(()=>{const v=u.get(p);v!==void 0&&v.delete(m)}),T}},be=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Jr=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return e.delete(s),s},Rc=(e,t,n,s)=>{const r=be(e,t),i=Jr(r,o=>o[0]===n&&o[1]===s);return r.size===0&&e.delete(t),i},Ps=e=>be(Oc,e),qn=e=>{if(Ln.has(e))throw new Error("The AudioNode is already stored.");Ln.add(e),Ps(e).forEach(t=>t(!0))},Vc=e=>"port"in e,Fs=e=>{if(!Ln.has(e))throw new Error("The AudioNode is not stored.");Ln.delete(e),Ps(e).forEach(t=>t(!1))},Pi=(e,t)=>{!Vc(e)&&t.every(n=>n.size===0)&&Fs(e)},ch=(e,t,n,s,r,i,o,a,c,u,l,h,f)=>{const d=new WeakMap;return(p,m,g,_,w)=>{const{activeInputs:y,passiveInputs:T}=i(m),{outputs:v}=i(p),b=a(p),C=S=>{const M=c(m),N=c(p);if(S){const A=Rc(T,p,g,_);e(y,p,A,!1),!w&&!h(p)&&n(N,M,g,_),f(m)&&qn(m)}else{const A=s(y,p,g,_);t(T,_,A,!1),!w&&!h(p)&&r(N,M,g,_);const x=o(m);if(x===0)l(m)&&Pi(m,y);else{const I=d.get(m);I!==void 0&&clearTimeout(I),d.set(m,setTimeout(()=>{l(m)&&Pi(m,y)},x*1e3))}}};return u(v,[m,g,_],S=>S[0]===m&&S[1]===g&&S[2]===_,!0)?(b.add(C),l(p)?e(y,p,[g,_,C],!0):t(T,_,[p,g,C],!0),!0):!1}},uh=e=>(t,n,[s,r,i],o)=>{const a=t.get(s);a===void 0?t.set(s,new Set([[r,n,i]])):e(a,[r,n,i],c=>c[0]===r&&c[1]===n,o)},lh=e=>(t,n)=>{const s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(t.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},hh=e=>(t,n)=>{e(t).add(n)},fh={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},dh=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=r(a),l={...fh,...c},h=s(u,l),f=i(u)?t():null;super(a,!1,h,f),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},jt=(e,t)=>e.context===t,ph=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},mr=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Ee=()=>new DOMException("","IndexSizeError"),fo=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(s){throw s.code===12?Ee():s}})(e.getChannelData)},mh={numberOfChannels:1},gh=(e,t,n,s,r,i,o,a)=>{let c=null;return class Pc{constructor(l){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:f,sampleRate:d}={...mh,...l};c===null&&(c=new r(1,1,44100));const p=s!==null&&t(i,i)?new s({length:h,numberOfChannels:f,sampleRate:d}):c.createBuffer(f,h,d);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),fo(p)):t(mr,()=>mr(p))||a(p),e.add(p),p}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===Pc.prototype||e.has(l)}}},Kt=-34028234663852886e22,Xt=-Kt,Fe=e=>Ln.has(e),_h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},vh=(e,t,n,s,r,i,o,a)=>class extends e{constructor(u,l){const h=i(u),f={..._h,...l},d=r(h,f),p=o(h),m=p?t():null;super(u,!1,d,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=d,this._onended=null,this._playbackRate=n(this,p,d.playbackRate,Xt,Kt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const l=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===l?u:h}get playbackRate(){return this._playbackRate}start(u=0,l=0,h){if(this._nativeAudioBufferSourceNode.start(u,l,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[u,l]:[u,l,h]),this.context.state!=="closed"){qn(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Fe(this)&&Fs(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},yh=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=n(u);const f=jt(h,l);if(!f){const d={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(l,d),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(l,h),f?await e(l,u.playbackRate,h.playbackRate):await s(l,u.playbackRate,h.playbackRate),await r(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},wh=e=>"playbackRate"in e,bh=e=>"frequency"in e&&"gain"in e,xh=e=>"offset"in e,Th=e=>!("frequency"in e)&&"gain"in e,Ch=e=>"detune"in e&&"frequency"in e,kh=e=>"pan"in e,Zt=e=>be(Ic,e),Ls=e=>be(Ec,e),Fi=(e,t)=>{const{activeInputs:n}=Zt(e);n.forEach(r=>r.forEach(([i])=>{t.includes(e)||Fi(i,[...t,e])}));const s=wh(e)?[e.playbackRate]:Vc(e)?Array.from(e.parameters.values()):bh(e)?[e.Q,e.detune,e.frequency,e.gain]:xh(e)?[e.offset]:Th(e)?[e.gain]:Ch(e)?[e.detune,e.frequency]:kh(e)?[e.pan]:[];for(const r of s){const i=Ls(r);i!==void 0&&i.activeInputs.forEach(([o])=>Fi(o,t))}Fe(e)&&Fs(e)},Fc=e=>{Fi(e.destination,[])},Sh=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),Ah=(e,t,n,s,r,i,o,a,c)=>class extends e{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(l)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(h===null)throw s();if(!Sh(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&h.sampleRate!==l.sampleRate)throw n();super(h,2);const{latencyHint:f}=l,{sampleRate:d}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:f==="balanced"?512/d:f==="interactive"||f===void 0?256/d:f==="playback"?1024/d:Math.max(2,Math.min(128,Math.round(f*d/128)))*128/d,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Fc(this)}))}createMediaElementSource(l){return new r(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new o(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,h)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?l():this.resume().then(l,h)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?t():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?t():l})}},Nh=(e,t,n,s,r,i,o,a)=>class extends e{constructor(u,l){const h=i(u),f=o(h),d=r(h,l,f),p=f?t(a):null;super(u,!1,d,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=d}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Mh=e=>{const t=new WeakMap,n=async(s,r)=>{const i=r.destination;return t.set(r,i),await e(s,r,i),i};return{render(s,r){const i=t.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},Ih=(e,t,n,s,r,i,o,a)=>(c,u)=>{const l=u.listener,h=()=>{const v=new Float32Array(1),b=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(u);let S=!1,M=[0,0,-1,0,1,0],N=[0,0,0];const A=()=>{if(S)return;S=!0;const q=s(u,256,9,0);q.onaudioprocess=({inputBuffer:V})=>{const D=[i(V,v,0),i(V,v,1),i(V,v,2),i(V,v,3),i(V,v,4),i(V,v,5)];D.some((P,B)=>P!==M[B])&&(l.setOrientation(...D),M=D);const W=[i(V,v,6),i(V,v,7),i(V,v,8)];W.some((P,B)=>P!==N[B])&&(l.setPosition(...W),N=W)},b.connect(q)},x=q=>V=>{V!==M[q]&&(M[q]=V,l.setOrientation(...M))},I=q=>V=>{V!==N[q]&&(N[q]=V,l.setPosition(...N))},O=(q,V,D)=>{const W=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V});W.connect(b,0,q),W.start(),Object.defineProperty(W.offset,"defaultValue",{get(){return V}});const P=e({context:c},C,W.offset,Xt,Kt);return a(P,"value",B=>()=>B.call(P),B=>U=>{try{B.call(P,U)}catch(st){if(st.code!==9)throw st}A(),C&&D(U)}),P.cancelAndHoldAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.cancelAndHoldAtTime),P.cancelScheduledValues=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.cancelScheduledValues),P.exponentialRampToValueAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.exponentialRampToValueAtTime),P.linearRampToValueAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.linearRampToValueAtTime),P.setTargetAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.setTargetAtTime),P.setValueAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.setValueAtTime),P.setValueCurveAtTime=(B=>C?()=>{throw r()}:(...U)=>{const st=B.apply(P,U);return A(),st})(P.setValueCurveAtTime),P};return{forwardX:O(0,0,x(0)),forwardY:O(1,0,x(1)),forwardZ:O(2,-1,x(2)),positionX:O(6,0,I(0)),positionY:O(7,0,I(1)),positionZ:O(8,0,I(2)),upX:O(3,0,x(3)),upY:O(4,1,x(4)),upZ:O(5,0,x(5))}},{forwardX:f,forwardY:d,forwardZ:p,positionX:m,positionY:g,positionZ:_,upX:w,upY:y,upZ:T}=l.forwardX===void 0?h():l;return{get forwardX(){return f},get forwardY(){return d},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return _},get upX(){return w},get upY(){return y},get upZ(){return T}}},gr=e=>"context"in e,qs=e=>gr(e[0]),wn=(e,t,n,s)=>{for(const r of e)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},ma=(e,t,[n,s],r)=>{wn(e,[t,n,s],i=>i[0]===t&&i[1]===n,r)},ga=(e,[t,n,s],r)=>{const i=e.get(t);i===void 0?e.set(t,new Set([[n,s]])):wn(i,[n,s],o=>o[0]===n,r)},Gn=e=>"inputs"in e,_r=(e,t,n,s)=>{if(Gn(t)){const r=t.inputs[s];return e.connect(r,n,0),[r,n,0]}return e.connect(t,n,s),[t,n,s]},Lc=(e,t,n)=>{for(const s of e)if(s[0]===t&&s[1]===n)return e.delete(s),s;return null},Eh=(e,t,n)=>Jr(e,s=>s[0]===t&&s[1]===n),qc=(e,t)=>{if(!Ps(e).delete(t))throw new Error("Missing the expected event listener.")},$c=(e,t,n)=>{const s=be(e,t),r=Jr(s,i=>i[0]===n);return s.size===0&&e.delete(t),r},vr=(e,t,n,s)=>{Gn(t)?e.disconnect(t.inputs[s],n,0):e.disconnect(t,n,s)},pt=e=>be(lo,e),ds=e=>be(ho,e),fn=e=>Di.has(e),ar=e=>!Ln.has(e),_a=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const s=e.createScriptProcessor(256,1,1),r=e.createGain(),i=e.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=e.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(e.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(e.destination)},a.start()}}),vi=(e,t)=>{const n=new Map;for(const s of e)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>t(r,s))},yr=e=>"context"in e,Oh=e=>{const t=new Map;e.connect=(n=>(s,r=0,i=0)=>{const o=yr(s)?n(s,r,i):n(s,r),a=t.get(s);return a===void 0?t.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(e.connect.bind(e)),e.disconnect=(n=>(s,r,i)=>{if(n.apply(e),s===void 0)t.clear();else if(typeof s=="number")for(const[o,a]of t){const c=a.filter(u=>u.output!==s);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(s))if(r===void 0)t.delete(s);else{const o=t.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?t.delete(s):t.set(s,a)}}for(const[o,a]of t)a.forEach(c=>{yr(o)?e.connect(o,c.output,c.input):e.connect(o,c.output)})})(e.disconnect)},Dh=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=Ls(t),{outputs:o}=Zt(e),a=Ps(e),c=u=>{const l=pt(e),h=ds(t);if(u){const f=$c(i,e,n);ma(r,e,f,!1),!s&&!fn(e)&&l.connect(h,n)}else{const f=Eh(r,e,n);ga(i,f,!1),!s&&!fn(e)&&l.disconnect(h,n)}};return wn(o,[t,n],u=>u[0]===t&&u[1]===n,!0)?(a.add(c),Fe(e)?ma(r,e,[n,c],!0):ga(i,[e,n,c],!0),!0):!1},Rh=(e,t,n,s)=>{const{activeInputs:r,passiveInputs:i}=Zt(t),o=Lc(r[s],e,n);return o===null?[Rc(i,e,n,s)[2],!1]:[o[2],!0]},Vh=(e,t,n)=>{const{activeInputs:s,passiveInputs:r}=Ls(t),i=Lc(s,e,n);return i===null?[$c(r,e,n)[1],!1]:[i[2],!0]},po=(e,t,n,s,r)=>{const[i,o]=Rh(e,n,s,r);if(i!==null&&(qc(e,i),o&&!t&&!fn(e)&&vr(pt(e),pt(n),s,r)),Fe(n)){const{activeInputs:a}=Zt(n);Pi(n,a)}},mo=(e,t,n,s)=>{const[r,i]=Vh(e,n,s);r!==null&&(qc(e,r),i&&!t&&!fn(e)&&pt(e).disconnect(ds(n),s))},Ph=(e,t)=>{const n=Zt(e),s=[];for(const r of n.outputs)qs(r)?po(e,t,...r):mo(e,t,...r),s.push(r[0]);return n.outputs.clear(),s},Fh=(e,t,n)=>{const s=Zt(e),r=[];for(const i of s.outputs)i[1]===n&&(qs(i)?po(e,t,...i):mo(e,t,...i),r.push(i[0]),s.outputs.delete(i));return r},Lh=(e,t,n,s,r)=>{const i=Zt(e);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(qs(o)?po(e,t,...o):mo(e,t,...o),i.outputs.delete(o),o[0]))},qh=(e,t,n,s,r,i,o,a,c,u,l,h,f,d,p,m)=>class extends u{constructor(_,w,y,T){super(y),this._context=_,this._nativeAudioNode=y;const v=l(_);h(v)&&n(_a,()=>_a(v,m))!==!0&&Oh(y),lo.set(this,y),Oc.set(this,new Set),_.state!=="closed"&&w&&qn(this),e(this,T,y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(_){this._nativeAudioNode.channelCount=_}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(_){this._nativeAudioNode.channelCountMode=_}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(_){this._nativeAudioNode.channelInterpretation=_}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(_,w=0,y=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const T=l(this._context),v=p(T);if(f(_)||d(_))throw i();if(gr(_)){const S=pt(_);try{const N=_r(this._nativeAudioNode,S,w,y),A=ar(this);(v||A)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!A&&ar(_)&&qn(_)}catch(N){throw N.code===12?i():N}if(t(this,_,w,y,v)){const N=c([this],_);vi(N,s(v))}return _}const b=ds(_);if(b.name==="playbackRate"&&b.maxValue===1024)throw o();try{this._nativeAudioNode.connect(b,w),(v||ar(this))&&this._nativeAudioNode.disconnect(b,w)}catch(S){throw S.code===12?i():S}if(Dh(this,_,w,v)){const S=c([this],_);vi(S,s(v))}}disconnect(_,w,y){let T;const v=l(this._context),b=p(v);if(_===void 0)T=Ph(this,b);else if(typeof _=="number"){if(_<0||_>=this.numberOfOutputs)throw r();T=Fh(this,b,_)}else{if(w!==void 0&&(w<0||w>=this.numberOfOutputs)||gr(_)&&y!==void 0&&(y<0||y>=_.numberOfInputs))throw r();if(T=Lh(this,b,_,w,y),T.length===0)throw i()}for(const C of T){const S=c([this],C);vi(S,a)}}},$h=(e,t,n,s,r,i,o,a,c,u,l,h,f)=>(d,p,m,g=null,_=null)=>{const w=new Yl(m.defaultValue),y=p?s(w):null,T={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return _===null?m.minValue:_},get value(){return m.value},set value(v){m.value=v,T.setValueAtTime(v,d.context.currentTime)},cancelAndHoldAtTime(v){if(typeof m.cancelAndHoldAtTime=="function")y===null&&w.flush(d.context.currentTime),w.add(r(v)),m.cancelAndHoldAtTime(v);else{const b=Array.from(w).pop();y===null&&w.flush(d.context.currentTime),w.add(r(v));const C=Array.from(w).pop();m.cancelScheduledValues(v),b!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?m.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?m.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&m.setValueCurveAtTime(C.values,C.startTime,C.duration))}return T},cancelScheduledValues(v){return y===null&&w.flush(d.context.currentTime),w.add(i(v)),m.cancelScheduledValues(v),T},exponentialRampToValueAtTime(v,b){if(v===0)throw new RangeError;if(!Number.isFinite(b)||b<0)throw new RangeError;return y===null&&w.flush(d.context.currentTime),w.add(o(v,b)),m.exponentialRampToValueAtTime(v,b),T},linearRampToValueAtTime(v,b){return y===null&&w.flush(d.context.currentTime),w.add(a(v,b)),m.linearRampToValueAtTime(v,b),T},setTargetAtTime(v,b,C){return y===null&&w.flush(d.context.currentTime),w.add(c(v,b,C)),m.setTargetAtTime(v,b,C),T},setValueAtTime(v,b){return y===null&&w.flush(d.context.currentTime),w.add(u(v,b)),m.setValueAtTime(v,b),T},setValueCurveAtTime(v,b,C){const S=v instanceof Float32Array?v:new Float32Array(v);if(h!==null&&h.name==="webkitAudioContext"){const M=b+C,N=d.context.sampleRate,A=Math.ceil(b*N),x=Math.floor(M*N),I=x-A,O=new Float32Array(I);for(let V=0;V<I;V+=1){const D=(S.length-1)/C*((A+V)/N-b),W=Math.floor(D),P=Math.ceil(D);O[V]=W===P?S[W]:(1-(D-W))*S[W]+(1-(P-D))*S[P]}y===null&&w.flush(d.context.currentTime),w.add(l(O,b,C)),m.setValueCurveAtTime(O,b,C);const q=x/N;q<M&&f(T,O[O.length-1],q),f(T,S[S.length-1],M)}else y===null&&w.flush(d.context.currentTime),w.add(l(S,b,C)),m.setValueCurveAtTime(S,b,C);return T}};return n.set(T,m),t.set(T,d),e(T,y),T},Wh=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;t.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;t.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;t.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;t.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;t.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class Wc{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((s,r)=>t.call(n,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Bh={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},zh=(e,t,n,s,r,i,o,a,c,u,l,h,f,d)=>class extends t{constructor(m,g,_){var w;const y=a(m),T=c(y),v=l({...Bh,..._});f(v);const b=Ri.get(y),C=b==null?void 0:b.get(g),S=T||y.state!=="closed"?y:(w=o(y))!==null&&w!==void 0?w:y,M=r(S,T?null:m.baseLatency,u,g,C,v),N=T?s(g,v,C):null;super(m,!0,M,N);const A=[];M.parameters.forEach((I,O)=>{const q=n(this,T,I);A.push([O,q])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new Wc(A),T&&e(y,this);const{activeInputs:x}=i(this);h(M,x)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;const _=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=_!==null&&_===g?m:_}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function wr(e,t,n,s,r){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],s,r);else{const i=e.getChannelData(s);if(t[n].byteLength===0)t[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(o)}}}const Bc=(e,t,n,s,r)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],s,r):t[n].byteLength!==0&&e.getChannelData(s).set(t[n],r)},br=(e,t)=>{const n=[];for(let s=0;s<e;s+=1){const r=[],i=typeof t=="number"?t:t[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},Uh=(e,t)=>{const n=be(Vi,e),s=pt(t);return be(n,s)},jh=async(e,t,n,s,r,i,o)=>{const a=t===null?Math.ceil(e.context.length/128)*128:t.length,c=s.channelCount*s.numberOfInputs,u=r.reduce((g,_)=>g+_,0),l=u===0?null:n.createBuffer(u,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=Zt(e),f=await Uh(n,e),d=br(s.numberOfInputs,s.channelCount),p=br(s.numberOfOutputs,r),m=Array.from(e.parameters.keys()).reduce((g,_)=>({...g,[_]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(s.numberOfInputs>0&&t!==null)for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<s.channelCount;w+=1)wr(t,d[_],w,w,g);i.parameterDescriptors!==void 0&&t!==null&&i.parameterDescriptors.forEach(({name:_},w)=>{wr(t,m,_,c+w,g)});for(let _=0;_<s.numberOfInputs;_+=1)for(let w=0;w<r[_];w+=1)p[_][w].byteLength===0&&(p[_][w]=new Float32Array(128));try{const _=d.map((y,T)=>h.activeInputs[T].size===0?[]:y),w=o(g/n.sampleRate,n.sampleRate,()=>f.process(_,p,m));if(l!==null)for(let y=0,T=0;y<s.numberOfOutputs;y+=1){for(let v=0;v<r[y];v+=1)Bc(l,p[y],v,T+v,g);T+=r[y]}if(!w)break}catch(_){e.dispatchEvent(new ErrorEvent("processorerror",{colno:_.colno,filename:_.filename,lineno:_.lineno,message:_.message}));break}}return l},Hh=(e,t,n,s,r,i,o,a,c,u,l,h,f,d,p,m)=>(g,_,w)=>{const y=new WeakMap;let T=null;const v=async(b,C)=>{let S=l(b),M=null;const N=jt(S,C),A=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(h===null){const x=A.reduce((V,D)=>V+D,0),I=r(C,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),O=[];for(let V=0;V<b.numberOfOutputs;V+=1)O.push(s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[V]}));const q=o(C,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});q.connect=t.bind(null,O),q.disconnect=c.bind(null,O),M=[I,O,q]}else N||(S=new h(C,g));if(y.set(C,M===null?S:M[2]),M!==null){if(T===null){if(w===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=b.channelCount*b.numberOfInputs,W=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length,P=D+W;T=jh(b,P===0?null:await(async()=>{const U=new f(P,Math.ceil(b.context.length/128)*128,C.sampleRate),st=[],Z=[];for(let et=0;et<_.numberOfInputs;et+=1)st.push(o(U,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),Z.push(r(U,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const j=await Promise.all(Array.from(b.parameters.values()).map(async et=>{const it=i(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:et.value});return await d(U,et,it.offset),it})),X=s(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,D+W)});for(let et=0;et<_.numberOfInputs;et+=1){st[et].connect(Z[et]);for(let it=0;it<_.channelCount;it+=1)Z[et].connect(X,it,et*_.channelCount+it)}for(const[et,it]of j.entries())it.connect(X,0,D+et),it.start(0);return X.connect(U.destination),await Promise.all(st.map(et=>p(b,U,et))),m(U)})(),C,_,A,w,u)}const x=await T,I=n(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[O,q,V]=M;x!==null&&(I.buffer=x,I.start(0)),I.connect(O);for(let D=0,W=0;D<b.numberOfOutputs;D+=1){const P=q[D];for(let B=0;B<A[D];B+=1)O.connect(P,W+B,B);W+=A[D]}return V}if(N)for(const[x,I]of b.parameters.entries())await e(C,I,S.parameters.get(x));else for(const[x,I]of b.parameters.entries())await d(C,I,S.parameters.get(x));return await p(b,C,S),S};return{render(b,C){a(C,b);const S=y.get(C);return S!==void 0?Promise.resolve(S):v(b,C)}}},Gh=(e,t,n,s,r,i,o,a,c,u,l,h,f,d,p,m,g,_,w,y)=>class extends p{constructor(v,b){super(v,b),this._nativeContext=v,this._audioWorklet=e===void 0?void 0:{addModule:(C,S)=>e(this,C,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(v,b,C){return new n({length:b,numberOfChannels:v,sampleRate:C})}createBufferSource(){return new s(this)}createChannelMerger(v=6){return new i(this,{numberOfInputs:v})}createChannelSplitter(v=6){return new o(this,{numberOfOutputs:v})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(v=1){return new l(this,{maxDelayTime:v})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(v,b){return new d(this,{feedback:b,feedforward:v})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(v,b,C={disableNormalization:!1}){return new _(this,{...C,imag:b,real:v})}createStereoPanner(){return new w(this)}createWaveShaper(){return new y(this)}decodeAudioData(v,b,C){return u(this._nativeContext,v).then(S=>(typeof b=="function"&&b(S),S),S=>{throw typeof C=="function"&&C(S),S})}},Xh={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Zh=(e,t,n,s,r,i,o,a)=>class extends e{constructor(u,l){const h=i(u),f={...Xh,...l},d=r(h,f),p=o(h),m=p?n():null;super(u,!1,d,m),this._Q=t(this,p,d.Q,Xt,Kt),this._detune=t(this,p,d.detune,1200*Math.log2(Xt),-1200*Math.log2(Xt)),this._frequency=t(this,p,d.frequency,u.sampleRate/2,0),this._gain=t(this,p,d.gain,40*Math.log10(Xt),Kt),this._nativeBiquadFilterNode=d,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,h)}catch(f){throw f.code===11?s():f}if(u.length!==l.length||l.length!==h.length)throw s()}},Yh=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=n(a);const l=jt(u,c);if(!l){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=t(c,h)}return i.set(c,u),l?(await e(c,a.Q,u.Q),await e(c,a.detune,u.detune),await e(c,a.frequency,u.frequency),await e(c,a.gain,u.gain)):(await s(c,a.Q,u.Q),await s(c,a.detune,u.detune),await s(c,a.frequency,u.frequency),await s(c,a.gain,u.gain)),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},Qh=(e,t)=>(n,s)=>{const r=t.get(n);if(r!==void 0)return r;const i=e.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(e.set(n,o),o.catch(()=>!1).then(a=>(e.delete(n),t.set(n,a),a))):(t.set(n,o),o)}catch{return t.set(n,!1),!1}},Kh={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Jh=(e,t,n,s,r)=>class extends e{constructor(o,a){const c=s(o),u={...Kh,...a},l=n(c,u),h=r(c)?t():null;super(o,!1,l,h)}},tf=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ef={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},nf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=s(a),l=i({...ef,...c}),h=n(u,l),f=r(u)?t():null;super(a,!1,h,f)}},sf=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(o,u)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},rf=e=>(t,n,s)=>e(n,t,s),of=e=>(t,n,s=0,r=0)=>{const i=t[s];if(i===void 0)throw e();return yr(n)?i.connect(n,0,r):i.connect(n,0)},af=e=>(t,n)=>{const s=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},cf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},uf=(e,t,n,s,r,i,o)=>class extends e{constructor(c,u){const l=r(c),h={...cf,...u},f=s(l,h),d=i(l),p=d?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=t(this,d,f.offset,Xt,Kt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=u;const l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){qn(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),Fe(this)&&Fs(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},lf=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=n(u);const f=jt(h,l);if(!f){const d={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(l,d),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(l,h),f?await e(l,u.offset,h.offset):await s(l,u.offset,h.offset),await r(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},hf=e=>t=>(e[0]=t,e[0]),ff={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},df=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=s(a),l={...ff,...c},h=n(u,l),d=r(u)?t():null;super(a,!1,h,d),this._isBufferNullified=!1,this._nativeConvolverNode=h,l.buffer!==null&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},pf=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(o,u)}return s.set(o,a),Gn(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},mf=(e,t)=>(n,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,s,r)}catch(i){throw i.name==="SyntaxError"?e():i}},gf=()=>new DOMException("","DataCloneError"),va=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,t.close(),n.close(),s()};n.onmessage=()=>r();try{t.postMessage(e,[e])}finally{r()}})},_f=(e,t,n,s,r,i,o,a,c,u,l)=>(h,f)=>{const d=o(h)?h:i(h);if(r.has(f)){const p=n();return Promise.reject(p)}try{r.add(f)}catch{}return t(c,()=>c(d))?d.decodeAudioData(f).then(p=>(va(f).catch(()=>{}),t(a,()=>a(p))||l(p),e.add(p),p)):new Promise((p,m)=>{const g=async()=>{try{await va(f)}catch{}},_=w=>{m(w),g()};try{d.decodeAudioData(f,w=>{typeof w.copyFromChannel!="function"&&(u(w),fo(w)),e.add(w),g().then(()=>p(w))},w=>{_(w===null?s():w)})}catch(w){_(w)}})},vf=(e,t,n,s,r,i,o,a)=>(c,u)=>{const l=t.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),f=a(h);if(l===u){if(t.delete(c),!f&&o(c)){const d=s(c),{outputs:p}=n(c);for(const m of p)if(qs(m)){const g=s(m[0]);e(d,g,m[1],m[2])}else{const g=r(m[0]);d.connect(g,m[1])}}}else t.set(c,l-u)},yf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},wf=(e,t,n,s,r,i,o)=>class extends e{constructor(c,u){const l=r(c),h={...yf,...u},f=s(l,h),d=i(l),p=d?n(h.maxDelayTime):null;super(c,!1,f,p),this._delayTime=t(this,d,f.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},bf=(e,t,n,s,r)=>i=>{const o=new WeakMap,a=async(c,u)=>{let l=n(c);const h=jt(l,u);if(!h){const f={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:i};l=t(u,f)}return o.set(u,l),h?await e(u,c.delayTime,l.delayTime):await s(u,c.delayTime,l.delayTime),await r(c,u,l),l};return{render(c,u){const l=o.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}},xf=e=>(t,n,s,r)=>e(t[r],i=>i[0]===n&&i[1]===s),Tf=e=>(t,n)=>{e(t).delete(n)},Cf=e=>"delayTime"in e,kf=(e,t,n)=>function s(r,i){const o=gr(i)?i:n(e,i);if(Cf(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,u)=>c.concat(u),[])},Js=(e,t,n)=>{const s=t[n];if(s===void 0)throw e();return s},Sf=e=>(t,n=void 0,s=void 0,r=0)=>n===void 0?t.forEach(i=>i.disconnect()):typeof n=="number"?Js(e,t,n).disconnect():yr(n)?s===void 0?t.forEach(i=>i.disconnect(n)):r===void 0?Js(e,t,s).disconnect(n,0):Js(e,t,s).disconnect(n,0,r):s===void 0?t.forEach(i=>i.disconnect(n)):Js(e,t,s).disconnect(n,0),Af={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Nf=(e,t,n,s,r,i,o,a)=>class extends e{constructor(u,l){const h=i(u),f={...Af,...l},d=s(h,f),p=o(h),m=p?n():null;super(u,!1,d,m),this._attack=t(this,p,d.attack),this._knee=t(this,p,d.knee),this._nativeDynamicsCompressorNode=d,this._ratio=t(this,p,d.ratio),this._release=t(this,p,d.release),this._threshold=t(this,p,d.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Mf=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=n(a);const l=jt(u,c);if(!l){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=t(c,h)}return i.set(c,u),l?(await e(c,a.attack,u.attack),await e(c,a.knee,u.knee),await e(c,a.ratio,u.ratio),await e(c,a.release,u.release),await e(c,a.threshold,u.threshold)):(await s(c,a.attack,u.attack),await s(c,a.knee,u.knee),await s(c,a.ratio,u.ratio),await s(c,a.release,u.release),await s(c,a.threshold,u.threshold)),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},If=()=>new DOMException("","EncodingError"),Ef=e=>t=>new Promise((n,s)=>{if(e===null){s(new SyntaxError);return}const r=e.document.head;if(r===null)s(new SyntaxError);else{const i=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=e.onerror,u=()=>{e.onerror=c,URL.revokeObjectURL(a)};e.onerror=(l,h,f,d,p)=>{if(h===a||h===e.location.href&&f===1&&d===1)return u(),s(p),!1;if(c!==null)return c(l,h,f,d,p)},i.onerror=()=>{u(),s(new SyntaxError)},i.onload=()=>{u(),n()},i.src=a,i.type="module",r.appendChild(i)}}),Of=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=e(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},Df=e=>(t,n,s)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},Rf=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},Vf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Pf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=r(a),l={...Vf,...c},h=s(u,l),f=i(u),d=f?n():null;super(a,!1,h,d),this._gain=t(this,f,h.gain,Xt,Kt)}get gain(){return this._gain}},Ff=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=n(a);const l=jt(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=t(c,h)}return i.set(c,u),l?await e(c,a.gain,u.gain):await s(c,a.gain,u.gain),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},Lf=(e,t)=>n=>t(e,n),qf=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},$f=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},Wf=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Bf=e=>t=>e.get(t),Lt=()=>new DOMException("","InvalidStateError"),zf=e=>t=>{const n=e.get(t);if(n===void 0)throw Lt();return n},Uf=(e,t)=>n=>{let s=e.get(n);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),e.set(n,s),s},jf=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},ti=()=>new DOMException("","InvalidAccessError"),Hf=e=>{e.getFrequencyResponse=(t=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw ti();return t.call(e,n,s,r)})(e.getFrequencyResponse)},Gf={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Xf=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=s(a),l=r(u),h={...Gf,...c},f=t(u,l?null:a.baseLatency,h),d=l?n(h.feedback,h.feedforward):null;super(a,!1,f,d),Hf(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}},zc=(e,t,n,s,r,i,o,a,c,u,l)=>{const h=u.length;let f=a;for(let d=0;d<h;d+=1){let p=n[0]*u[d];for(let m=1;m<r;m+=1){const g=f-m&c-1;p+=n[m]*i[g],p-=e[m]*o[g]}for(let m=r;m<s;m+=1)p+=n[m]*i[f-m&c-1];for(let m=r;m<t;m+=1)p-=e[m]*o[f-m&c-1];i[f]=u[d],o[f]=p,f=f+1&c-1,l[d]=p}return f},Zf=(e,t,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const u=32,l=new Float32Array(u),h=new Float32Array(u),f=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let p=0;p<d;p+=1){const m=e.getChannelData(p),g=f.getChannelData(p);l.fill(0),h.fill(0),zc(r,o,i,a,c,l,h,0,u,m,g)}return f},Yf=(e,t,n,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const u=async(l,h)=>{let f=null,d=t(l);const p=jt(d,h);if(h.createIIRFilter===void 0?f=e(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,i)),a.set(h,f===null?d:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const g=new n(l.context.destination.channelCount,l.context.length,h.sampleRate);c=(async()=>{await s(l,g,g.destination);const _=await r(g);return Zf(_,h,i,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await s(l,h,d),d};return{render(l,h){const f=a.get(h);return f!==void 0?Promise.resolve(f):u(l,h)}}},Qf=(e,t,n,s,r,i)=>o=>(a,c)=>{const u=e.get(a);if(u===void 0){if(!o&&i(a)){const l=s(a),{outputs:h}=n(a);for(const f of h)if(qs(f)){const d=s(f[0]);t(l,d,f[1],f[2])}else{const d=r(f[0]);l.disconnect(d,f[1])}}e.set(a,c)}else e.set(a,u+c)},Kf=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},Jf=(e,t)=>n=>e.has(n)||t(n),td=(e,t)=>n=>e.has(n)||t(n),ed=(e,t)=>n=>{const s=e.get(n);return t(s)||t(n)},nd=e=>t=>e!==null&&t instanceof e,sd=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,rd=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,id=(e,t)=>n=>e(n)||t(n),od=e=>t=>e!==null&&t instanceof e,ad=e=>e!==null&&e.isSecureContext,cd=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},ud={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ld=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const c={...ud,...o},u=t(a,c);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},hd=(e,t,n,s)=>class extends e{constructor(i,o){const a=n(i),c=t(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},fd=(e,t,n)=>class extends e{constructor(r,i){const o=n(r),a=t(o,i);super(r,!0,a,null)}},dd=(e,t,n,s,r,i)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Kr.set(this,a),s(a)&&r.set(a,new Set),this._destination=new e(this,c),this._listener=t(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ps=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},pd=(e,t)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,c=0,u=0)=>{const l=i.size===0;if(t(a))return o.call(n,a,c,u),e(i,[a,c,u],h=>h[0]===a&&h[1]===c&&h[2]===u,!0),l&&s(),a;o.call(n,a,c),e(i,[a,c],h=>h[0]===a&&h[1]===c,!0),l&&s()})(n.connect),n.disconnect=(o=>(a,c,u)=>{const l=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{t(a)?o.call(n,a,c,u):o.call(n,a,c);for(const f of i)f[0]===a&&(c===void 0||f[1]===c)&&(u===void 0||f[2]===u)&&i.delete(f)}const h=i.size===0;l&&h&&r()})(n.disconnect),n},_t=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n]&&(e[n]=s)},Pt=(e,t)=>{_t(e,t,"channelCount"),_t(e,t,"channelCountMode"),_t(e,t,"channelInterpretation")},ya=e=>typeof e.getFloatTimeDomainData=="function",md=e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const s=Math.max(n.length,e.fftSize);for(let r=0;r<s;r+=1)t[r]=(n[r]-128)*.0078125;return t}},gd=(e,t)=>(n,s)=>{const r=n.createAnalyser();if(Pt(r,s),!(s.maxDecibels>s.minDecibels))throw t();return _t(r,s,"fftSize"),_t(r,s,"maxDecibels"),_t(r,s,"minDecibels"),_t(r,s,"smoothingTimeConstant"),e(ya,()=>ya(r))||md(r),r},_d=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,At=(e,t,n)=>{const s=t[n];s!==void 0&&s!==e[n].value&&(e[n].value=s)},vd=e=>{e.start=(t=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw Lt();t.call(e,s,r,i),n=!0}})(e.start)},go=e=>{e.start=(t=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,s,r)})(e.start)},_o=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},yd=(e,t,n,s,r,i,o,a,c,u,l)=>(h,f)=>{const d=h.createBufferSource();return Pt(d,f),At(d,f,"playbackRate"),_t(d,f,"buffer"),_t(d,f,"loop"),_t(d,f,"loopEnd"),_t(d,f,"loopStart"),t(n,()=>n(h))||vd(d),t(s,()=>s(h))||c(d),t(r,()=>r(h))||u(d,h),t(i,()=>i(h))||go(d),t(o,()=>o(h))||l(d,h),t(a,()=>a(h))||_o(d),e(h,d),d},wd=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,bd=(e,t)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=e(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},xd=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,Td=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},Cd=(e,t,n,s,r)=>(i,o,a,c,u,l)=>{if(a!==null)try{const h=new a(i,c,l),f=new Map;let d=null;if(Object.defineProperties(h,{channelCount:{get:()=>l.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>d,set:p=>{typeof d=="function"&&h.removeEventListener("processorerror",d),d=typeof p=="function"?p:null,typeof d=="function"&&h.addEventListener("processorerror",d)}}}),h.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){const _=f.get(m[1]);_!==void 0?m[1]=_:(m[1]=w=>{w.type==="error"?(Object.defineProperties(w,{type:{value:"processorerror"}}),g(w)):g(new ErrorEvent(m[0],{...w}))},f.set(g,m[1]))}}return p.call(h,"error",m[1],m[2]),p.call(h,...m)})(h.addEventListener),h.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return p.call(h,"error",m[1],m[2]),p.call(h,m[0],m[1],m[2])})(h.removeEventListener),l.numberOfOutputs!==0){const p=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(u===void 0)throw s();return Td(l),t(i,o,u,l)},Uc=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),kd=e=>new Promise((t,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),t(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(e)}),Sd=async(e,t)=>{const n=await kd(t);return new e(n)},Ad=(e,t,n,s)=>{let r=Vi.get(e);r===void 0&&(r=new WeakMap,Vi.set(e,r));const i=Sd(n,s);return r.set(t,i),i},Nd=(e,t,n,s,r,i,o,a,c,u,l,h,f)=>(d,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some($=>$<1))throw c();if(_.length!==g.numberOfOutputs)throw t();if(g.channelCountMode!=="explicit")throw c();const w=g.channelCount*g.numberOfInputs,y=_.reduce(($,Y)=>$+Y,0),T=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(w+T>6||y>6)throw c();const v=new MessageChannel,b=[],C=[];for(let $=0;$<g.numberOfInputs;$+=1)b.push(o(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),C.push(r(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:$,maxValue:Y,minValue:Vt,name:Ct}of m.parameterDescriptors){const ot=i(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[Ct]!==void 0?g.parameterData[Ct]:$===void 0?0:$});Object.defineProperties(ot.offset,{defaultValue:{get:()=>$===void 0?0:$},maxValue:{get:()=>Y===void 0?Xt:Y},minValue:{get:()=>Vt===void 0?Kt:Vt}}),S.push(ot)}const M=s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+T)}),N=Uc(p,d.sampleRate),A=a(d,N,w+T,Math.max(1,y)),x=r(d,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),I=[];for(let $=0;$<g.numberOfOutputs;$+=1)I.push(s(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[$]}));for(let $=0;$<g.numberOfInputs;$+=1){b[$].connect(C[$]);for(let Y=0;Y<g.channelCount;Y+=1)C[$].connect(M,Y,$*g.channelCount+Y)}const O=new Wc(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:$},Y)=>{const Vt=S[Y];return Vt.connect(M,0,w+Y),Vt.start(0),[$,Vt.offset]}));M.connect(A);let q=g.channelInterpretation,V=null;const D=g.numberOfOutputs===0?[A]:I,W={get bufferSize(){return N},get channelCount(){return g.channelCount},set channelCount($){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode($){throw n()},get channelInterpretation(){return q},set channelInterpretation($){for(const Y of b)Y.channelInterpretation=$;q=$},get context(){return A.context},get inputs(){return b},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return V},set onprocessorerror($){typeof V=="function"&&W.removeEventListener("processorerror",V),V=typeof $=="function"?$:null,typeof V=="function"&&W.addEventListener("processorerror",V)},get parameters(){return O},get port(){return v.port2},addEventListener(...$){return A.addEventListener($[0],$[1],$[2])},connect:e.bind(null,D),disconnect:u.bind(null,D),dispatchEvent(...$){return A.dispatchEvent($[0])},removeEventListener(...$){return A.removeEventListener($[0],$[1],$[2])}},P=new Map;v.port1.addEventListener=($=>(...Y)=>{if(Y[0]==="message"){const Vt=typeof Y[1]=="function"?Y[1]:typeof Y[1]=="object"&&Y[1]!==null&&typeof Y[1].handleEvent=="function"?Y[1].handleEvent:null;if(Vt!==null){const Ct=P.get(Y[1]);Ct!==void 0?Y[1]=Ct:(Y[1]=ot=>{l(d.currentTime,d.sampleRate,()=>Vt(ot))},P.set(Vt,Y[1]))}}return $.call(v.port1,Y[0],Y[1],Y[2])})(v.port1.addEventListener),v.port1.removeEventListener=($=>(...Y)=>{if(Y[0]==="message"){const Vt=P.get(Y[1]);Vt!==void 0&&(P.delete(Y[1]),Y[1]=Vt)}return $.call(v.port1,Y[0],Y[1],Y[2])})(v.port1.removeEventListener);let B=null;Object.defineProperty(v.port1,"onmessage",{get:()=>B,set:$=>{typeof B=="function"&&v.port1.removeEventListener("message",B),B=typeof $=="function"?$:null,typeof B=="function"&&(v.port1.addEventListener("message",B),v.port1.start())}}),m.prototype.port=v.port1;let U=null;Ad(d,W,m,g).then($=>U=$);const Z=br(g.numberOfInputs,g.channelCount),j=br(g.numberOfOutputs,_),X=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce(($,{name:Y})=>({...$,[Y]:new Float32Array(128)}),{});let et=!0;const it=()=>{g.numberOfOutputs>0&&A.disconnect(x);for(let $=0,Y=0;$<g.numberOfOutputs;$+=1){const Vt=I[$];for(let Ct=0;Ct<_[$];Ct+=1)x.disconnect(Vt,Y+Ct,Ct);Y+=_[$]}},z=new Map;A.onaudioprocess=({inputBuffer:$,outputBuffer:Y})=>{if(U!==null){const Vt=h(W);for(let Ct=0;Ct<N;Ct+=128){for(let ot=0;ot<g.numberOfInputs;ot+=1)for(let St=0;St<g.channelCount;St+=1)wr($,Z[ot],St,St,Ct);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:ot},St)=>{wr($,X,ot,w+St,Ct)});for(let ot=0;ot<g.numberOfInputs;ot+=1)for(let St=0;St<_[ot];St+=1)j[ot][St].byteLength===0&&(j[ot][St]=new Float32Array(128));try{const ot=Z.map((ce,je)=>{if(Vt[je].size>0)return z.set(je,N/128),ce;const _i=z.get(je);return _i===void 0?[]:(ce.every($l=>$l.every(Wl=>Wl===0))&&(_i===1?z.delete(je):z.set(je,_i-1)),ce)});et=l(d.currentTime+Ct/d.sampleRate,d.sampleRate,()=>U.process(ot,j,X));for(let ce=0,je=0;ce<g.numberOfOutputs;ce+=1){for(let ts=0;ts<_[ce];ts+=1)Bc(Y,j[ce],ts,je+ts,Ct);je+=_[ce]}}catch(ot){et=!1,W.dispatchEvent(new ErrorEvent("processorerror",{colno:ot.colno,filename:ot.filename,lineno:ot.lineno,message:ot.message}))}if(!et){for(let ot=0;ot<g.numberOfInputs;ot+=1){b[ot].disconnect(C[ot]);for(let St=0;St<g.channelCount;St+=1)C[Ct].disconnect(M,St,ot*g.channelCount+St)}if(m.parameterDescriptors!==void 0){const ot=m.parameterDescriptors.length;for(let St=0;St<ot;St+=1){const ce=S[St];ce.disconnect(M,0,w+St),ce.stop()}}M.disconnect(A),A.onaudioprocess=null,Wt?it():ae();break}}}};let Wt=!1;const Bt=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),oe=()=>A.connect(Bt).connect(d.destination),ae=()=>{A.disconnect(Bt),Bt.disconnect()},Ys=()=>{if(et){ae(),g.numberOfOutputs>0&&A.connect(x);for(let $=0,Y=0;$<g.numberOfOutputs;$+=1){const Vt=I[$];for(let Ct=0;Ct<_[$];Ct+=1)x.connect(Vt,Y+Ct,Ct);Y+=_[$]}}Wt=!0},Qs=()=>{et&&(oe(),it()),Wt=!1};return oe(),f(W,Ys,Qs)},jc=(e,t)=>{const n=e.createBiquadFilter();return Pt(n,t),At(n,t,"Q"),At(n,t,"detune"),At(n,t,"frequency"),At(n,t,"gain"),_t(n,t,"type"),n},Md=(e,t)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,r),Pt(r,s),r},Id=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw Lt()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Lt()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Lt()}})},$s=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Pt(n,t),Id(n),n},Ed=(e,t,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Pt(a,o),At(a,o,"offset"),t(s,()=>s(i))||go(a),t(r,()=>r(i))||_o(a),e(i,a),a},Xn=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Od=(e,t,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(r,{...o,gain:i}),l=a.getChannelData(0);l[0]=1,l[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(u),d=()=>c.disconnect(u);return e(r,c),s(Xn(h,u),f,d)},Dd=(e,t)=>(n,s)=>{const r=n.createConvolver();if(Pt(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),_t(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw e();return i.call(r,o)}),s.channelCountMode==="max"))throw e();return t(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw e();return i.call(r,o)}),r},Hc=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Pt(n,t),At(n,t,"delayTime"),n},Rd=e=>(t,n)=>{const s=t.createDynamicsCompressor();if(Pt(s,n),n.channelCount>2||n.channelCountMode==="max")throw e();return At(s,n,"attack"),At(s,n,"knee"),At(s,n,"ratio"),At(s,n,"release"),At(s,n,"threshold"),s},te=(e,t)=>{const n=e.createGain();return Pt(n,t),At(n,t,"gain"),n},Vd=e=>(t,n,s)=>{if(t.createIIRFilter===void 0)return e(t,n,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return Pt(r,s),r};function Pd(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function Fd(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function wa(e,t){let n=[0,0];for(let s=e.length-1;s>=0;s-=1)n=Fd(n,t),n[0]+=e[s];return n}const Ld=(e,t,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const h=Uc(i,r.sampleRate),f=u instanceof Float64Array?u:new Float64Array(u),d=l instanceof Float64Array?l:new Float64Array(l),p=f.length,m=d.length,g=Math.min(p,m);if(p===0||p>20)throw s();if(f[0]===0)throw t();if(m===0||m>20)throw s();if(d[0]===0)throw t();if(f[0]!==1){for(let S=0;S<m;S+=1)d[S]/=f[0];for(let S=1;S<p;S+=1)f[S]/=f[0]}const _=n(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=c;const w=32,y=[],T=[],v=[];for(let S=0;S<o;S+=1){y.push(0);const M=new Float32Array(w),N=new Float32Array(w);M.fill(0),N.fill(0),T.push(M),v.push(N)}_.onaudioprocess=S=>{const M=S.inputBuffer,N=S.outputBuffer,A=M.numberOfChannels;for(let x=0;x<A;x+=1){const I=M.getChannelData(x),O=N.getChannelData(x);y[x]=zc(f,p,d,m,g,T[x],v[x],y[x],w,I,O)}};const b=r.sampleRate/2;return Xn({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(S){_.channelCount=S},get channelCountMode(){return _.channelCountMode},set channelCountMode(S){_.channelCountMode=S},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(S){_.channelInterpretation=S},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener(...S){return _.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return _.dispatchEvent(S[0])},getFrequencyResponse(S,M,N){if(S.length!==M.length||M.length!==N.length)throw e();const A=S.length;for(let x=0;x<A;x+=1){const I=-Math.PI*(S[x]/b),O=[Math.cos(I),Math.sin(I)],q=wa(d,O),V=wa(f,O),D=Pd(q,V);M[x]=Math.sqrt(D[0]*D[0]+D[1]*D[1]),N[x]=Math.atan2(D[1],D[0])}},removeEventListener(...S){return _.removeEventListener(S[0],S[1],S[2])}},_)},qd=(e,t)=>e.createMediaElementSource(t.mediaElement),$d=(e,t)=>{const n=e.createMediaStreamDestination();return Pt(n,t),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Wd=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=e.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},Bd=(e,t)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw e();if(t(n))throw new TypeError;return i},zd=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,Ud=(e,t,n,s,r,i)=>(o,a)=>{const c=o.createOscillator();return Pt(c,a),At(c,a,"detune"),At(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):_t(c,a,"type"),t(n,()=>n(o))||go(c),t(s,()=>s(o))||i(c,o),t(r,()=>r(o))||_o(c),e(o,c),c},jd=e=>(t,n)=>{const s=t.createPanner();return s.orientationX===void 0?e(t,n):(Pt(s,n),At(s,n,"orientationX"),At(s,n,"orientationY"),At(s,n,"orientationZ"),At(s,n,"positionX"),At(s,n,"positionY"),At(s,n,"positionZ"),_t(s,n,"coneInnerAngle"),_t(s,n,"coneOuterAngle"),_t(s,n,"coneOuterGain"),_t(s,n,"distanceModel"),_t(s,n,"maxDistance"),_t(s,n,"panningModel"),_t(s,n,"refDistance"),_t(s,n,"rolloffFactor"),s)},Hd=(e,t,n,s,r,i,o,a,c,u)=>(l,{coneInnerAngle:h,coneOuterAngle:f,coneOuterGain:d,distanceModel:p,maxDistance:m,orientationX:g,orientationY:_,orientationZ:w,panningModel:y,positionX:T,positionY:v,positionZ:b,refDistance:C,rolloffFactor:S,...M})=>{const N=l.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw o();Pt(N,M);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},x=n(l,{...A,channelInterpretation:"speakers",numberOfInputs:6}),I=s(l,{...M,gain:1}),O=s(l,{...A,gain:1}),q=s(l,{...A,gain:0}),V=s(l,{...A,gain:0}),D=s(l,{...A,gain:0}),W=s(l,{...A,gain:0}),P=s(l,{...A,gain:0}),B=r(l,256,6,1),U=i(l,{...A,curve:new Float32Array([1,1]),oversample:"none"});let st=[g,_,w],Z=[T,v,b];const j=new Float32Array(1);B.onaudioprocess=({inputBuffer:z})=>{const Wt=[c(z,j,0),c(z,j,1),c(z,j,2)];Wt.some((oe,ae)=>oe!==st[ae])&&(N.setOrientation(...Wt),st=Wt);const Bt=[c(z,j,3),c(z,j,4),c(z,j,5)];Bt.some((oe,ae)=>oe!==Z[ae])&&(N.setPosition(...Bt),Z=Bt)},Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const X={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(z){if(z>2)throw o();I.channelCount=z,N.channelCount=z},get channelCountMode(){return N.channelCountMode},set channelCountMode(z){if(z==="max")throw o();I.channelCountMode=z,N.channelCountMode=z},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(z){I.channelInterpretation=z,N.channelInterpretation=z},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(z){N.coneInnerAngle=z},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(z){N.coneOuterAngle=z},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(z){if(z<0||z>1)throw t();N.coneOuterGain=z},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(z){N.distanceModel=z},get inputs(){return[I]},get maxDistance(){return N.maxDistance},set maxDistance(z){if(z<0)throw new RangeError;N.maxDistance=z},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return q.gain},get orientationZ(){return V.gain},get panningModel(){return N.panningModel},set panningModel(z){N.panningModel=z},get positionX(){return D.gain},get positionY(){return W.gain},get positionZ(){return P.gain},get refDistance(){return N.refDistance},set refDistance(z){if(z<0)throw new RangeError;N.refDistance=z},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(z){if(z<0)throw new RangeError;N.rolloffFactor=z},addEventListener(...z){return I.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return I.dispatchEvent(z[0])},removeEventListener(...z){return I.removeEventListener(z[0],z[1],z[2])}};h!==X.coneInnerAngle&&(X.coneInnerAngle=h),f!==X.coneOuterAngle&&(X.coneOuterAngle=f),d!==X.coneOuterGain&&(X.coneOuterGain=d),p!==X.distanceModel&&(X.distanceModel=p),m!==X.maxDistance&&(X.maxDistance=m),g!==X.orientationX.value&&(X.orientationX.value=g),_!==X.orientationY.value&&(X.orientationY.value=_),w!==X.orientationZ.value&&(X.orientationZ.value=w),y!==X.panningModel&&(X.panningModel=y),T!==X.positionX.value&&(X.positionX.value=T),v!==X.positionY.value&&(X.positionY.value=v),b!==X.positionZ.value&&(X.positionZ.value=b),C!==X.refDistance&&(X.refDistance=C),S!==X.rolloffFactor&&(X.rolloffFactor=S),(st[0]!==1||st[1]!==0||st[2]!==0)&&N.setOrientation(...st),(Z[0]!==0||Z[1]!==0||Z[2]!==0)&&N.setPosition(...Z);const et=()=>{I.connect(N),e(I,U,0,0),U.connect(O).connect(x,0,0),U.connect(q).connect(x,0,1),U.connect(V).connect(x,0,2),U.connect(D).connect(x,0,3),U.connect(W).connect(x,0,4),U.connect(P).connect(x,0,5),x.connect(B).connect(l.destination)},it=()=>{I.disconnect(N),a(I,U,0,0),U.disconnect(O),O.disconnect(x),U.disconnect(q),q.disconnect(x),U.disconnect(V),V.disconnect(x),U.disconnect(D),D.disconnect(x),U.disconnect(W),W.disconnect(x),U.disconnect(P),P.disconnect(x),x.disconnect(B),B.disconnect(l.destination)};return u(Xn(X,N),et,it)},Gd=e=>(t,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=t.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw e();return a},Ws=(e,t,n,s)=>e.createScriptProcessor(t,n,s),Xd=(e,t)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(n.createStereoPanner===void 0)return e(n,s);const i=n.createStereoPanner();return Pt(i,s),At(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw t()}}),i},Zd=(e,t,n,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},h=(p,m,g,_)=>{const w=new Float32Array(16385),y=new Float32Array(16385);for(let M=0;M<16385;M+=1){const N=M/16384*c;w[M]=Math.cos(N),y[M]=Math.sin(N)}const T=n(p,{...u,gain:0}),v=s(p,{...l,curve:w}),b=s(p,{...l,curve:a}),C=n(p,{...u,gain:0}),S=s(p,{...l,curve:y});return{connectGraph(){m.connect(T),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(C),b.connect(g),g.connect(v.inputs===void 0?v:v.inputs[0]),g.connect(S.inputs===void 0?S:S.inputs[0]),v.connect(T.gain),S.connect(C.gain),T.connect(_,0,0),C.connect(_,0,1)},disconnectGraph(){m.disconnect(T),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(C),b.disconnect(g),g.disconnect(v.inputs===void 0?v:v.inputs[0]),g.disconnect(S.inputs===void 0?S:S.inputs[0]),v.disconnect(T.gain),S.disconnect(C.gain),T.disconnect(_,0,0),C.disconnect(_,0,1)}}},f=(p,m,g,_)=>{const w=new Float32Array(16385),y=new Float32Array(16385),T=new Float32Array(16385),v=new Float32Array(16385),b=Math.floor(16385/2);for(let D=0;D<16385;D+=1)if(D>b){const W=(D-b)/(16384-b)*c;w[D]=Math.cos(W),y[D]=Math.sin(W),T[D]=0,v[D]=1}else{const W=D/(16384-b)*c;w[D]=1,y[D]=0,T[D]=Math.cos(W),v[D]=Math.sin(W)}const C=t(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=n(p,{...u,gain:0}),M=s(p,{...l,curve:w}),N=n(p,{...u,gain:0}),A=s(p,{...l,curve:y}),x=s(p,{...l,curve:a}),I=n(p,{...u,gain:0}),O=s(p,{...l,curve:T}),q=n(p,{...u,gain:0}),V=s(p,{...l,curve:v});return{connectGraph(){m.connect(C),m.connect(x.inputs===void 0?x:x.inputs[0]),C.connect(S,0),C.connect(N,0),C.connect(I,1),C.connect(q,1),x.connect(g),g.connect(M.inputs===void 0?M:M.inputs[0]),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(O.inputs===void 0?O:O.inputs[0]),g.connect(V.inputs===void 0?V:V.inputs[0]),M.connect(S.gain),A.connect(N.gain),O.connect(I.gain),V.connect(q.gain),S.connect(_,0,0),I.connect(_,0,0),N.connect(_,0,1),q.connect(_,0,1)},disconnectGraph(){m.disconnect(C),m.disconnect(x.inputs===void 0?x:x.inputs[0]),C.disconnect(S,0),C.disconnect(N,0),C.disconnect(I,1),C.disconnect(q,1),x.disconnect(g),g.disconnect(M.inputs===void 0?M:M.inputs[0]),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(O.inputs===void 0?O:O.inputs[0]),g.disconnect(V.inputs===void 0?V:V.inputs[0]),M.disconnect(S.gain),A.disconnect(N.gain),O.disconnect(I.gain),V.disconnect(q.gain),S.disconnect(_,0,0),I.disconnect(_,0,0),N.disconnect(_,0,1),q.disconnect(_,0,1)}}},d=(p,m,g,_,w)=>{if(m===1)return h(p,g,_,w);if(m===2)return f(p,g,_,w);throw r()};return(p,{channelCount:m,channelCountMode:g,pan:_,...w})=>{if(g==="max")throw r();const y=e(p,{...w,channelCount:1,channelCountMode:g,numberOfInputs:2}),T=n(p,{...w,channelCount:m,channelCountMode:g,gain:1}),v=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:_});let{connectGraph:b,disconnectGraph:C}=d(p,m,T,v,y);Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"maxValue",{get:()=>1}),Object.defineProperty(v.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(x){T.channelCount!==x&&(M&&C(),{connectGraph:b,disconnectGraph:C}=d(p,x,T,v,y),M&&b()),T.channelCount=x},get channelCountMode(){return T.channelCountMode},set channelCountMode(x){if(x==="clamped-max"||x==="max")throw r();T.channelCountMode=x},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(x){T.channelInterpretation=x},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get pan(){return v.gain},addEventListener(...x){return T.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return T.dispatchEvent(x[0])},removeEventListener(...x){return T.removeEventListener(x[0],x[1],x[2])}};let M=!1;const N=()=>{b(),M=!0},A=()=>{C(),M=!1};return i(Xn(S,y),N,A)}},Yd=(e,t,n,s,r,i,o)=>(a,c)=>{const u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Pt(u,c);const l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw t();_t(u,{curve:l},"curve"),_t(u,c,"oversample");let h=null,f=!1;return o(u,"curve",m=>()=>m.call(u),m=>g=>(m.call(u,g),f&&(s(g)&&h===null?h=e(a,u):!s(g)&&h!==null&&(h(),h=null)),g)),r(u,()=>{f=!0,s(u.curve)&&(h=e(a,u))},()=>{f=!1,h!==null&&(h(),h=null)})},Qd=(e,t,n,s,r)=>(i,{curve:o,oversample:a,...c})=>{const u=i.createWaveShaper(),l=i.createWaveShaper();Pt(u,c),Pt(l,c);const h=n(i,{...c,gain:1}),f=n(i,{...c,gain:-1}),d=n(i,{...c,gain:1}),p=n(i,{...c,gain:-1});let m=null,g=!1,_=null;const w={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(v){h.channelCount=v,f.channelCount=v,u.channelCount=v,d.channelCount=v,l.channelCount=v,p.channelCount=v},get channelCountMode(){return u.channelCountMode},set channelCountMode(v){h.channelCountMode=v,f.channelCountMode=v,u.channelCountMode=v,d.channelCountMode=v,l.channelCountMode=v,p.channelCountMode=v},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(v){h.channelInterpretation=v,f.channelInterpretation=v,u.channelInterpretation=v,d.channelInterpretation=v,l.channelInterpretation=v,p.channelInterpretation=v},get context(){return u.context},get curve(){return _},set curve(v){if(v!==null&&v.length<2)throw t();if(v===null)u.curve=v,l.curve=v;else{const b=v.length,C=new Float32Array(b+2-b%2),S=new Float32Array(b+2-b%2);C[0]=v[0],S[0]=-v[b-1];const M=Math.ceil((b+1)/2),N=(b+1)/2-1;for(let A=1;A<M;A+=1){const x=A/M*N,I=Math.floor(x),O=Math.ceil(x);C[A]=I===O?v[I]:(1-(x-I))*v[I]+(1-(O-x))*v[O],S[A]=I===O?-v[b-1-I]:-((1-(x-I))*v[b-1-I])-(1-(O-x))*v[b-1-O]}C[M]=b%2===1?v[M-1]:(v[M-2]+v[M-1])/2,u.curve=C,l.curve=S}_=v,g&&(s(_)&&m===null?m=e(i,h):m!==null&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(v){u.oversample=v,l.oversample=v},addEventListener(...v){return h.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return h.dispatchEvent(v[0])},removeEventListener(...v){return h.removeEventListener(v[0],v[1],v[2])}};o!==null&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a);const y=()=>{h.connect(u).connect(d),h.connect(f).connect(l).connect(p).connect(d),g=!0,s(_)&&(m=e(i,h))},T=()=>{h.disconnect(u),u.disconnect(d),h.disconnect(f),f.disconnect(l),l.disconnect(p),p.disconnect(d),g=!1,m!==null&&(m(),m=null)};return r(Xn(w,d),y,T)},Yt=()=>new DOMException("","NotSupportedError"),Kd={numberOfChannels:1},Jd=(e,t,n,s,r)=>class extends e{constructor(o,a,c){let u;if(typeof o=="number"&&a!==void 0&&c!==void 0)u={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")u=o;else throw new Error("The given parameters are not valid.");const{length:l,numberOfChannels:h,sampleRate:f}={...Kd,...u},d=s(h,l,f);t(ps,()=>ps(d))||d.addEventListener("statechange",(()=>{let p=0;const m=g=>{this._state==="running"&&(p>0?(d.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(d,h),this._length=l,this._nativeOfflineAudioContext=d,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Fc(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},tp={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ep=(e,t,n,s,r,i,o)=>class extends e{constructor(c,u){const l=r(c),h={...tp,...u},f=n(l,h),d=i(l),p=d?s():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=t(this,d,f.detune,153600,-153600),this._frequency=t(this,d,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=u;const l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){qn(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),Fe(this)&&Fs(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},np=(e,t,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const u=async(l,h)=>{let f=n(l);const d=jt(f,h);if(!d){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=t(h,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(h,f),d?(await e(h,l.detune,f.detune),await e(h,l.frequency,f.frequency)):(await s(h,l.detune,f.detune),await s(h,l.frequency,f.frequency)),await r(l,h,f),f};return{set periodicWave(l){o=l},set start(l){a=l},set stop(l){c=l},render(l,h){const f=i.get(h);return f!==void 0?Promise.resolve(f):u(l,h)}}},sp={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},rp=(e,t,n,s,r,i,o)=>class extends e{constructor(c,u){const l=r(c),h={...sp,...u},f=n(l,h),d=i(l),p=d?s():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=t(this,d,f.orientationX,Xt,Kt),this._orientationY=t(this,d,f.orientationY,Xt,Kt),this._orientationZ=t(this,d,f.orientationZ,Xt,Kt),this._positionX=t(this,d,f.positionX,Xt,Kt),this._positionY=t(this,d,f.positionY,Xt,Kt),this._positionZ=t(this,d,f.positionZ,Xt,Kt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},ip=(e,t,n,s,r,i,o,a,c,u)=>()=>{const l=new WeakMap;let h=null;const f=async(d,p)=>{let m=null,g=i(d);const _={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},w={..._,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},y=jt(g,p);if("bufferSize"in g)m=s(p,{..._,gain:1});else if(!y){const T={...w,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,T)}if(l.set(p,m===null?g:m),m!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new o(6,d.context.length,p.sampleRate),x=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});x.connect(A.destination),h=(async()=>{const I=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(O,q)=>{const V=n(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q===0?1:0});return await a(A,O,V.offset),V}));for(let O=0;O<6;O+=1)I[O].connect(x,0,O),I[O].start(0);return u(A)})()}const T=await h,v=s(p,{..._,gain:1});await c(d,p,v);const b=[];for(let A=0;A<T.numberOfChannels;A+=1)b.push(T.getChannelData(A));let C=[b[0][0],b[1][0],b[2][0]],S=[b[3][0],b[4][0],b[5][0]],M=s(p,{..._,gain:1}),N=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:S[0],positionY:S[1],positionZ:S[2]});v.connect(M).connect(N.inputs[0]),N.connect(m);for(let A=128;A<T.length;A+=128){const x=[b[0][A],b[1][A],b[2][A]],I=[b[3][A],b[4][A],b[5][A]];if(x.some((O,q)=>O!==C[q])||I.some((O,q)=>O!==S[q])){C=x,S=I;const O=A/p.sampleRate;M.gain.setValueAtTime(0,O),M=s(p,{..._,gain:0}),N=r(p,{...w,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:S[0],positionY:S[1],positionZ:S[2]}),M.gain.setValueAtTime(1,O),v.connect(M).connect(N.inputs[0]),N.connect(m)}}return m}return y?(await e(p,d.orientationX,g.orientationX),await e(p,d.orientationY,g.orientationY),await e(p,d.orientationZ,g.orientationZ),await e(p,d.positionX,g.positionX),await e(p,d.positionY,g.positionY),await e(p,d.positionZ,g.positionZ)):(await a(p,d.orientationX,g.orientationX),await a(p,d.orientationY,g.orientationY),await a(p,d.orientationZ,g.orientationZ),await a(p,d.positionX,g.positionX),await a(p,d.positionY,g.positionY),await a(p,d.positionZ,g.positionZ)),Gn(g)?await c(d,p,g.inputs[0]):await c(d,p,g),g};return{render(d,p){const m=l.get(p);return m!==void 0?Promise.resolve(m):f(d,p)}}},op={disableNormalization:!1},ap=(e,t,n,s)=>class Gc{constructor(i,o){const a=t(i),c=s({...op,...o}),u=e(a,c);return n.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Gc.prototype||n.has(i)}},cp=(e,t)=>(n,s,r)=>(e(s).replay(r),t(s,n,r)),up=(e,t,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([u,l])=>{const f=await t(u).render(u,r),d=s.context.destination;!n(u)&&(s!==d||!n(s))&&f.connect(i,l,c)})).reduce((a,c)=>[...a,...c],[]))},lp=(e,t,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const l=await e(a).render(a,r);n(a)||l.connect(i,c)}))},hp=(e,t,n,s)=>r=>e(ps,()=>ps(r))?Promise.resolve(e(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),fp=e=>(t,n)=>{e.set(t,n)},dp=e=>(t,n)=>e.set(t,n),pp=(e,t,n,s,r,i,o,a)=>(c,u)=>n(c).render(c,u).then(()=>Promise.all(Array.from(s(u)).map(l=>n(l).render(l,u)))).then(()=>r(u)).then(l=>(typeof l.copyFromChannel!="function"?(o(l),fo(l)):t(i,()=>i(l))||a(l),e.add(l),l)),mp={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},gp=(e,t,n,s,r,i)=>class extends e{constructor(a,c){const u=r(a),l={...mp,...c},h=n(u,l),f=i(u),d=f?s():null;super(a,!1,h,d),this._pan=t(this,f,h.pan)}get pan(){return this._pan}},_p=(e,t,n,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=n(a);const l=jt(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=t(c,h)}return i.set(c,u),l?await e(c,a.pan,u.pan):await s(c,a.pan,u.pan),Gn(u)?await r(a,c,u.inputs[0]):await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},vp=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},yp=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new e(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},wp=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),s=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},bp=()=>new DOMException("","UnknownError"),xp={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Tp=(e,t,n,s,r,i,o)=>class extends e{constructor(c,u){const l=r(c),h={...xp,...u},f=n(l,h),p=i(l)?s():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},Cp=(e,t,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=t(i);if(!jt(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(o,u)}return s.set(o,a),Gn(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},kp=()=>typeof window>"u"?null:window,Sp=(e,t)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)s[h]=u[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=e(i),a=e(r);if(a>=n.numberOfChannels)throw t();const c=n.length,u=n.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)u[h+o]=s[h]}},Ap=e=>t=>{t.copyFromChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyFromChannel),t.copyToChannel=(n=>(s,r,i=0)=>{const o=e(i),a=e(r);if(o<t.length)return n.call(t,s,a,o)})(t.copyToChannel)},Np=e=>(t,n)=>{const s=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),e(t,"buffer",r=>()=>{const i=r.call(t);return i===s?null:i},r=>i=>r.call(t,i===null?s:i))},Mp=(e,t)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=n.createBufferSource();t(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},Xc=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Zc=e=>{if(e===null)return!1;const t=e.length;return t%2!==0?e[Math.floor(t/2)]!==0:e[t/2-1]+e[t/2]!==0},Bs=(e,t,n,s)=>{let r=e;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,{get:n(i),set:s(o)})},Ip=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Ep=e=>({...e,channelCount:e.numberOfOutputs}),Op=e=>{const{imag:t,real:n}=e;return t===void 0?n===void 0?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:n===void 0?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}},Yc=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(s){if(s.code!==9)throw s;Yc(e,t,n+1e-7)}},Dp=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},Rp=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},Vp=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},vo=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},Qc=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},yo=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Pp=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Fp=e=>{e.start=(t=>(n=0,s=0,r)=>{const i=e.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,r)})(e.start)},Kc=(e,t)=>{const n=t.createGain();e.connect(n);const s=(r=>()=>{r.call(e,n),e.removeEventListener("ended",s)})(e.disconnect);e.addEventListener("ended",s),Xn(e,n),e.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(e,o),i=!0}})(e.stop)},Zn=(e,t)=>n=>{const s={value:e};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Lp=sh(wn),qp=uh(wn),$p=xf(Jr),Jc=new WeakMap,Wp=$f(Jc),xe=Qh(new Map,new WeakMap),Me=kp(),tu=gd(xe,Ee),wo=qf(Zt),$t=up(Zt,wo,fn),Bp=ph(tu,pt,$t),ft=zf(Kr),We=zd(Me),lt=od(We),eu=new WeakMap,nu=Of(Zn),zs=wd(Me),bo=nd(zs),xo=sd(Me),su=rd(Me),ms=xd(Me),Dt=qh(rh(Ic),ch(Lp,qp,_r,$p,vr,Zt,Wp,Ps,pt,wn,Fe,fn,ar),xe,Qf(Di,vr,Zt,pt,ds,Fe),Ee,ti,Yt,vf(_r,Di,Zt,pt,ds,ft,Fe,lt),kf(eu,Zt,be),nu,ft,bo,xo,su,lt,ms),zp=dh(Dt,Bp,Ee,tu,ft,lt),To=new WeakSet,ba=_d(Me),ru=hf(new Uint32Array(1)),Co=Sp(ru,Ee),ko=Ap(ru),Up=gh(To,xe,Yt,ba,We,vp(ba),Co,ko),ei=lh(te),iu=lp(wo,Ls,fn),Oe=rf(iu),Yn=yd(ei,xe,Dp,Rp,Vp,vo,Qc,yo,Fp,Np(Bs),Kc),De=cp(Wf(Ls),iu),jp=yh(Oe,Yn,pt,De,$t),Te=$h(ih(Ec),eu,ho,Wh,Ql,Kl,Jl,th,eh,Ii,Nc,zs,Yc),Hp=vh(Dt,jp,Te,Lt,Yn,ft,lt,Zn),Gp=Nh(Dt,Mh,Ee,Lt,bd(te,Bs),ft,lt,$t),Xp=Yh(Oe,jc,pt,De,$t),bn=dp(Jc),Zp=Zh(Dt,Te,Xp,ti,jc,ft,lt,bn),en=pd(wn,xo),Yp=Mp(Lt,en),nn=Md(zs,Yp),Qp=tf(nn,pt,$t),Kp=Jh(Dt,Qp,nn,ft,lt),Jp=sf($s,pt,$t),tm=nf(Dt,Jp,$s,ft,lt,Ep),em=Od(ei,Yn,te,en),Qn=Ed(ei,xe,em,vo,yo),nm=lf(Oe,Qn,pt,De,$t),sm=uf(Dt,Te,nm,Qn,ft,lt,Zn),ou=Dd(Yt,Bs),rm=pf(ou,pt,$t),im=df(Dt,rm,ou,ft,lt,bn),om=bf(Oe,Hc,pt,De,$t),am=wf(Dt,Te,om,Hc,ft,lt,bn),au=Rd(Yt),cm=Mf(Oe,au,pt,De,$t),um=Nf(Dt,Te,cm,au,Yt,ft,lt,bn),lm=Ff(Oe,te,pt,De,$t),hm=Pf(Dt,Te,lm,te,ft,lt),fm=Ld(ti,Lt,Ws,Yt),ni=hp(xe,te,Ws,wp(te,We)),dm=Yf(Yn,pt,We,$t,ni),pm=Vd(fm),mm=Xf(Dt,pm,dm,ft,lt,bn),gm=Ih(Te,nn,Qn,Ws,Yt,Xc,lt,Bs),cu=new WeakMap,_m=dd(Gp,gm,nu,lt,cu,Zn),uu=Ud(ei,xe,vo,Qc,yo,Kc),vm=np(Oe,uu,pt,De,$t),ym=ep(Dt,Te,uu,vm,ft,lt,Zn),lu=af(Yn),wm=Qd(lu,Lt,te,Zc,en),si=Yd(lu,Lt,wm,Zc,en,zs,Bs),bm=Hd(_r,Lt,nn,te,Ws,si,Yt,vr,Xc,en),hu=jd(bm),xm=ip(Oe,nn,Qn,te,hu,pt,We,De,$t,ni),Tm=rp(Dt,Te,hu,xm,ft,lt,bn),Cm=Gd(Ee),km=ap(Cm,ft,new WeakSet,Op),Sm=Zd(nn,$s,te,si,Yt,en),fu=Xd(Sm,Yt),Am=_p(Oe,fu,pt,De,$t),Nm=gp(Dt,Te,fu,Am,ft,lt),Mm=Cp(si,pt,$t),Im=Tp(Dt,Lt,si,Mm,ft,lt,bn),du=ad(Me),So=Df(Me),pu=new WeakMap,Em=Uf(pu,We),Om=du?ah(xe,Yt,Ef(Me),So,Rf(nh),ft,Em,lt,ms,new WeakMap,new WeakMap,yp(ms,We),Me):void 0,Dm=id(bo,lt),Rm=_f(To,xe,gf,If,new WeakSet,ft,Dm,mr,ps,Co,ko),mu=Gh(Om,zp,Up,Hp,Zp,Kp,tm,sm,im,Rm,am,um,hm,mm,_m,ym,Tm,km,Nm,Im),Vm=cd(Dt,qd,ft,lt),Pm=ld(Dt,$d,ft,lt),Fm=hd(Dt,Wd,ft,lt),Lm=Bd(Lt,lt),qm=fd(Dt,Lm,ft),$m=Ah(mu,Lt,Yt,bp,Vm,Pm,Fm,qm,zs),Ao=jf(cu),Wm=hh(Ao),gu=of(Ee),Bm=Tf(Ao),_u=Sf(Ee),vu=new WeakMap,zm=Lf(vu,be),Um=Nd(gu,Ee,Lt,nn,$s,Qn,te,Ws,Yt,_u,So,zm,en),jm=Cd(Lt,Um,te,Yt,en),Hm=Hh(Oe,gu,Yn,nn,$s,Qn,te,Bm,_u,So,pt,ms,We,De,$t,ni),Gm=Bf(pu),Xm=fp(vu),xa=du?zh(Wm,Dt,Te,Hm,jm,Zt,Gm,ft,lt,ms,Ip,Xm,Pp,Zn):void 0,Zm=mf(Yt,We),Ym=pp(To,xe,wo,Ao,ni,mr,Co,ko),Qm=Jd(mu,xe,Lt,Zm,Ym),Km=Kf(Kr,bo),Jm=Jf(lo,xo),tg=td(ho,su),eg=ed(Kr,lt);function Q(e,t){if(!e)throw new Error(t)}function Le(e,t,n=1/0){if(!(t<=e&&e<=n))throw new RangeError(`Value must be within [${t}, ${n}], got: ${e}`)}function yu(e){!e.isOffline&&e.state!=="running"&&No('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let wu=console;function ng(...e){wu.log(...e)}function No(...e){wu.warn(...e)}function pe(e){return typeof e>"u"}function rt(e){return!pe(e)}function sg(e){return typeof e=="function"}function dn(e){return typeof e=="number"}function ln(e){return Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object}function rg(e){return typeof e=="boolean"}function we(e){return Array.isArray(e)}function Ie(e){return typeof e=="string"}function tr(e){return Ie(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function ig(e){return new $m(e)}function og(e,t,n){return new Qm(e,t,n)}const hn=typeof self=="object"?self:null,ag=hn&&(hn.hasOwnProperty("AudioContext")||hn.hasOwnProperty("webkitAudioContext"));function cg(e,t,n){return Q(rt(xa),"This node only works in a secure context (https or localhost)"),new xa(e,t,n)}function Ce(e,t,n,s){var r=arguments.length,i=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function Rt(e,t,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(e,t||[])).next())})}class ug{constructor(t,n,s){this._callback=t,this._type=n,this._updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(t),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(t*1e3,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function pn(e){return tg(e)}function Ze(e){return Jm(e)}function cr(e){return eg(e)}function Sn(e){return Km(e)}function bu(e){return e instanceof AudioBuffer}function lg(e,t){return e==="value"||pn(t)||Ze(t)||bu(t)}function On(e,...t){if(!t.length)return e;const n=t.shift();if(ln(e)&&ln(n))for(const s in n)lg(s,n[s])?e[s]=n[s]:ln(n[s])?(e[s]||Object.assign(e,{[s]:{}}),On(e[s],n[s])):Object.assign(e,{[s]:n[s]});return On(e,...t)}function hg(e,t){return e.length===t.length&&e.every((n,s)=>t[s]===n)}function R(e,t,n=[],s){const r={},i=Array.from(t);if(ln(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(e,a))||(On(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&ln(i[0]))On(r,i[0]);else for(let o=0;o<n.length;o++)rt(i[o])&&(r[n[o]]=i[o]);return On(e,r)}function fg(e){return e.constructor.getDefaults()}function Dn(e,t){return pe(e)?t:e}function Ta(e,t){return t.forEach(n=>{Reflect.has(e,n)&&delete e[n]}),e}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class Be{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||hn&&this.toString()===hn.TONE_DEBUG_CLASS)&&ng(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Be.version=Ac;const Mo=1e-6;function xr(e,t){return e>t+Mo}function Li(e,t){return xr(e,t)||ge(e,t)}function xu(e,t){return e+Mo<t}function ge(e,t){return Math.abs(e-t)<Mo}function dg(e,t,n){return Math.max(Math.min(e,n),t)}class Re extends Be{constructor(){super(),this.name="Timeline",this._timeline=[];const t=R(Re.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Q(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Q(Li(t.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(t){const n=this._timeline.indexOf(t);return n!==-1&&this._timeline.splice(n,1),this}get(t,n="time"){const s=this._search(t,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,n="time"){const s=this._search(t,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<t)return this._timeline[n-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let n=this._search(t);if(n>=0)if(ge(this._timeline[n].time,t)){for(let s=n;s>=0&&ge(this._timeline[s].time,t);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Li(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const n=this._search(t);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(t){const n=this._timeline.indexOf(t);return n>0?this._timeline[n-1]:null}_search(t,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=t)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(ge(a[n],t)){for(let u=o;u<this._timeline.length;u++){const l=this._timeline[u];if(ge(l[n],t))o=u;else break}return o}else{if(xu(a[n],t)&&xr(c[n],t))return o;xr(a[n],t)?i=o:s=o+1}}return-1}_iterate(t,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,n){const s=this._search(t);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(t,n){const s=this._search(t);return this._iterate(n,s+1),this}forEachBetween(t,n,s){let r=this._search(t),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(t,n){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(n,s+1),this}forEachAtTime(t,n){const s=this._search(t);if(s!==-1&&ge(this._timeline[s].time,t)){let r=s;for(let i=s;i>=0&&ge(this._timeline[i].time,t);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Tu=[];function ri(e){Tu.push(e)}function pg(e){Tu.forEach(t=>t(e))}const Cu=[];function ii(e){Cu.push(e)}function mg(e){Cu.forEach(t=>t(e))}class Us extends Be{constructor(){super(...arguments),this.name="Emitter"}on(t,n){return t.split(/\W+/).forEach(r=>{pe(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(t,n){const s=(...r)=>{n(...r),this.off(t,s)};return this.on(t,s),this}off(t,n){return t.split(/\W+/).forEach(r=>{if(pe(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(pe(n))this._events[t]=[];else{const i=this._events[t];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(t,...n){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(t){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Us.prototype,n);Object.defineProperty(t.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class ku extends Us{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class js extends ku{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Re,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=R(js.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=ig({latencyHint:t.latencyHint}),this._ticker=new ug(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(pg(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,n,s){return this._context.createBuffer(t,n,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,n){return this._context.createIIRFilter(t,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,n,s){return this._context.createPeriodicWave(t,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Q(Sn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Q(Sn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Q(Sn(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Q(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Q(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Q(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Q(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,n){return cg(this.rawContext,t,n)}addAudioWorkletModule(t,n){return Rt(this,void 0,void 0,function*(){Q(rt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(n)})}workletsAreReady(){return Rt(this,void 0,void 0,function*(){const t=[];this._workletModules.forEach(n=>t.push(n)),yield Promise.all(t)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let n=0;if(this._latencyHint=t,Ie(t))switch(t){case"interactive":n=.1;break;case"playback":n=.5;break;case"balanced":n=.25;break}this.lookAhead=n,this.updateInterval=n/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Sn(this._context)?this._context.resume():Promise.resolve()}close(){return Rt(this,void 0,void 0,function*(){Sn(this._context)&&(yield this._context.close()),this._initialized&&mg(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=t;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(t,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(n=>{n.id===t&&this._timeouts.remove(n)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:i+n})};return r(),s}}class gg extends ku{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,n,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,n){return{}}createPanner(){return{}}createPeriodicWave(t,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,n){return{}}get rawContext(){return{}}addAudioWorkletModule(t,n){return Rt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,n){return 0}clearTimeout(t){return this}setInterval(t,n){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function kt(e,t){we(t)?t.forEach(n=>kt(e,n)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function Su(e,t){we(t)?t.forEach(n=>Su(e,n)):Object.defineProperty(e,t,{writable:!0})}const ut=()=>{};class ht extends Be{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ut;const t=R(ht.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&bu(t.url)||t.url instanceof ht?this.set(t.url):Ie(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:ut,onload:ut,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:ve().sampleRate}set(t){return t instanceof ht?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Rt(this,void 0,void 0,function*(){const n=ht.load(t).then(s=>{this.set(s),this.onload(this)});ht.downloads.push(n);try{yield n}finally{const s=ht.downloads.indexOf(n);ht.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const n=we(t)&&t[0].length>0,s=n?t.length:1,r=n?t[0].length:t.length,i=ve(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[t]:t;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(t){if(dn(t))this.fromArray(this.toArray(t));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(t){if(dn(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,n=this.duration){const s=Math.floor(t*this.sampleRate),r=Math.floor(n*this.sampleRate);Q(s<r,"The start time must be less than the end time");const i=r-s,o=ve().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ht(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new ht().fromArray(t)}static fromUrl(t){return Rt(this,void 0,void 0,function*(){return yield new ht().load(t)})}static load(t){return Rt(this,void 0,void 0,function*(){const n=t.match(/\[([^\]\[]+\|.+)\]$/);if(n){const a=n[1].split("|");let c=a[0];for(const u of a)if(ht.supportsType(u)){c=u;break}t=t.replace(n[0],c)}const s=ht.baseUrl===""||ht.baseUrl.endsWith("/")?ht.baseUrl:ht.baseUrl+"/",r=yield fetch(s+t);if(!r.ok)throw new Error(`could not load url: ${t}`);const i=yield r.arrayBuffer();return yield ve().decodeAudioData(i)})}static supportsType(t){const n=t.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Rt(this,void 0,void 0,function*(){for(yield Promise.resolve();ht.downloads.length;)yield ht.downloads[0]})}}ht.baseUrl="";ht.downloads=[];class Io extends js{constructor(){super({clockSource:"offline",context:cr(arguments[0])?arguments[0]:og(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:cr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=cr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Rt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);t&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(t=!0){return Rt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(t);const n=yield this._context.startRendering();return new ht(n)})}close(){return Promise.resolve()}}const Au=new gg;let Rn=Au;function ve(){return Rn===Au&&ag&&_g(new js),Rn}function _g(e){Sn(e)?Rn=new js(e):cr(e)?Rn=new Io(e):Rn=e}function vg(){return Rn.resume()}if(hn&&!hn.TONE_SILENCE_LOGGING){const t=` * Tone.js v${Ac} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function yg(e){return Math.pow(10,e/20)}function Nu(e){return 20*(Math.log(e)/Math.LN10)}function Mu(e){return Math.pow(2,e/12)}let oi=440;function wg(){return oi}function bg(e){oi=e}function qi(e){return Math.round(Iu(e))}function Iu(e){return 69+12*Math.log2(e/oi)}function xg(e){return oi*Math.pow(2,(e-69)/12)}class Eo extends Be{constructor(t,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,n)=>{const s=parseInt(t,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const n=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,n,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Eo&&this.fromType(this._val),pe(this._val))return this._noArg();if(Ie(this._val)&&pe(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(ln(this._val)){let t=0;for(const n in this._val)if(rt(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;t+=r}return t}if(rt(this._units)){const t=this._expressions[this._units],n=this._val.toString().trim().match(t.regexp);return n?t.method.apply(this,n.slice(1)):t.method.call(this,this._val)}else return Ie(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ye extends Eo{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const n=new ye(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(t,n=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const t=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new ye(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new ye(this.context,i).toSeconds();Math.abs(o-t)<Math.abs(r-t)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let n=this.valueOf()/t;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.round(n*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return qi(this.toFrequency())}_now(){return this.context.now()}}class de extends ye{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return wg()}static set A4(t){bg(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:de.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,n){const r=Tg[t.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:de.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,n,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new de(this.context,this.valueOf()*Mu(t))}harmonize(t){return t.map(n=>this.transpose(n))}toMidi(){return qi(this.valueOf())}toNote(){const t=this.toFrequency(),n=Math.log2(t/de.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),Cg[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),n=this.valueOf()/t;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return xg(t)}static ftom(t){return qi(t)}}const Tg={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Cg=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class ls extends ye{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Jt extends Be{constructor(){super();const t=R(Jt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:ve()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new ye(this.context,t).toSeconds()}toFrequency(t){return new de(this.context,t).toFrequency()}toTicks(t){return new ls(this.context,t).toTicks()}_getPartialProperties(t){const n=this.get();return Object.keys(n).forEach(s=>{pe(t[s])&&delete n[s]}),n}get(){const t=fg(this);return Object.keys(t).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];rt(s)&&rt(s.value)&&rt(s.setValueAtTime)?t[n]=s.value:s instanceof Jt?t[n]=s._getPartialProperties(t[n]):we(s)||dn(s)||Ie(s)||rg(s)?t[n]=s:delete t[n]}}),t}set(t){return Object.keys(t).forEach(n=>{Reflect.has(this,n)&&rt(this[n])&&(this[n]&&rt(this[n].value)&&rt(this[n].setValueAtTime)?this[n].value!==t[n]&&(this[n].value=t[n]):this[n]instanceof Jt?this[n].set(t[n]):this[n]=t[n])}),this}}class Oo extends Re{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const n=this.get(t);return n!==null?n.state:this._initial}setStateAtTime(t,n,s){return Le(n,0),this.add(Object.assign({},s,{state:t,time:n})),this}getLastState(t,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===t)return i}}getNextState(t,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===t)return i}}}class gt extends Jt{constructor(){super(R(gt.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=R(gt.getDefaults(),arguments,["param","units","convert"]);for(Q(rt(t.param)&&(pn(t.param)||t.param instanceof gt),"param must be an AudioParam");!pn(t.param);)t.param=t.param._param;this._swappable=rt(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Re(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,rt(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Jt.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return rt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return rt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,n){return this.units===n}_assertRange(t){return rt(this.maxValue)&&rt(this.minValue)&&Le(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?yg(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?Nu(t):t}setValueAtTime(t,n){const s=this.toSeconds(n),r=this._fromType(t);return Q(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const n=Math.max(this.toSeconds(t),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let n=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,t),this}linearRampToValueAtTime(t,n){const s=this._fromType(t),r=this.toSeconds(n);return Q(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,n){let s=this._fromType(t);s=ge(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return Q(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(n)),this}linearRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(n)),this}targetRampTo(t,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,n),this}exponentialApproachValueAtTime(t,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(t,n+s),this}setTargetAtTime(t,n,s){const r=this._fromType(t);Q(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),Q(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(t,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(t.length-1);for(let a=1;a<t.length;a++){const c=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(c),n+a*o)}return this}cancelScheduledValues(t){const n=this.toSeconds(t);return Q(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(t){const n=this.toSeconds(t),s=this._fromType(this.getValueAtTime(n));Q(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&ge(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(t,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,n,s):this.linearRampTo(t,n,s),this}apply(t){const n=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)t.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){Q(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(t),this._param=t,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,n,s,r,i){return s+(n-s)*Math.exp(-(i-t)/r)}_linearInterpolate(t,n,s,r,i){return n+(r-n)*((i-t)/(s-t))}_exponentialInterpolate(t,n,s,r,i){return n*Math.pow(r/n,(i-t)/(s-t))}}class J extends Jt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return rt(this.input)?pn(this.input)||this.input instanceof gt?1:this.input.numberOfInputs:0}get numberOfOutputs(){return rt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return rt(t)&&(t instanceof J||Ze(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();Q(t.length>0,"ToneAudioNode does not have any internal nodes");const n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))}connect(t,n=0,s=0){return Kn(this,t,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return No("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,n=0,s=0){return kg(this,t,n,s),this}chain(...t){return $i(this,...t),this}fan(...t){return t.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),rt(this.input)&&(this.input instanceof J?this.input.dispose():Ze(this.input)&&this.input.disconnect()),rt(this.output)&&(this.output instanceof J?this.output.dispose():Ze(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function $i(...e){const t=e.shift();e.reduce((n,s)=>(n instanceof J?n.connect(s):Ze(n)&&Kn(n,s),s),t)}function Kn(e,t,n=0,s=0){for(Q(rt(e),"Cannot connect from undefined node"),Q(rt(t),"Cannot connect to undefined node"),(t instanceof J||Ze(t))&&Q(t.numberOfInputs>0,"Cannot connect to node with no inputs"),Q(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof J||t instanceof gt;)rt(t.input)&&(t=t.input);for(;e instanceof J;)rt(e.output)&&(e=e.output);pn(t)?e.connect(t,n):e.connect(t,n,s)}function kg(e,t,n=0,s=0){if(rt(t))for(;t instanceof J;)t=t.input;for(;!Ze(e);)rt(e.output)&&(e=e.output);pn(t)?e.disconnect(t,n):Ze(t)?e.disconnect(t,n,s):e.disconnect()}class qt extends J{constructor(){super(R(qt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=R(qt.getDefaults(),arguments,["gain","units"]);this.gain=new gt({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),kt(this,"gain")}static getDefaults(){return Object.assign(J.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class $n extends J{constructor(t){super(t),this.onended=ut,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new qt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(J.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ut})}_startGain(t,n=1){Q(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,t+s):this._gainNode.gain.exponentialApproachValueAtTime(n,t,s)):this._gainNode.gain.setValueAtTime(n,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Q(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ut&&(this.onended(this),this.onended=ut,!this.context.isOffline)){const t=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Q(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Tr extends $n{constructor(){super(R(Tr.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=R(Tr.getDefaults(),arguments,["offset"]);Kn(this._source,this._gainNode),this.offset=new gt({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign($n.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ft extends J{constructor(){super(R(Ft.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=R(Ft.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Tr({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(J.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,n=0,s=0){return Do(this,t,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,n){return this._param.setValueAtTime(t,n),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,n){return this._param.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,n){return this._param.exponentialRampToValueAtTime(t,n),this}exponentialRampTo(t,n,s){return this._param.exponentialRampTo(t,n,s),this}linearRampTo(t,n,s){return this._param.linearRampTo(t,n,s),this}targetRampTo(t,n,s){return this._param.targetRampTo(t,n,s),this}exponentialApproachValueAtTime(t,n,s){return this._param.exponentialApproachValueAtTime(t,n,s),this}setTargetAtTime(t,n,s){return this._param.setTargetAtTime(t,n,s),this}setValueCurveAtTime(t,n,s,r){return this._param.setValueCurveAtTime(t,n,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,n,s){return this._param.rampTo(t,n,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function Do(e,t,n,s){(t instanceof gt||pn(t)||t instanceof Ft&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ft&&(t.overridden=!0)),Kn(e,t,n,s)}class Cr extends gt{constructor(){super(R(Cr.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Re(1/0),this._multiplier=1;const t=R(Cr.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(gt.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(t),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+n,u=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(t,n){const s=this.toSeconds(n);super.setValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(t,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,n){n=this.toSeconds(n);const s=this._fromType(t),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,u=this._exponentialInterpolate(r.time,r.value,n,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(t,n){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(pe(t.ticks)){const o=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(o,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const n=this.toSeconds(t),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const n=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(n&&n.ticks===t)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-t)),c=(-r+a)/o,u=(-r-a)/o;return(c>0?c:u)+n.time}else return n?n.value===0?1/0:n.time+(t-n.ticks)/n.value:t/this._initialValue}ticksToTime(t,n){return this.getDurationOfTicks(t,n)}timeToTicks(t,n){const s=this.toSeconds(n),r=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const n=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class kr extends Ft{constructor(){super(R(kr.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=R(kr.getDefaults(),arguments,["value"]);this.input=this._param=new Cr({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,n){return this._param.ticksToTime(t,n)}timeToTicks(t,n){return this._param.timeToTicks(t,n)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,n){return this._param.getDurationOfTicks(t,n)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Sr extends Jt{constructor(){super(R(Sr.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Oo,this._tickOffset=new Re;const t=R(Sr.getDefaults(),arguments,["frequency"]);this.frequency=new kr({context:this.context,units:t.units,value:t.frequency}),kt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Jt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,n){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),rt(n)&&this.setTicksAtTime(n,s)),this}stop(t){const n=this.toSeconds(t);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&this._state.setStateAtTime("paused",n),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const n=this.toSeconds(t),s=this._state.getLastState("stopped",n),r={state:"paused",time:n};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,n+this.sampleTime,a=>{let c=i.time;const u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(o=u.ticks,c=u.time),i.state==="started"&&a.state!=="started"&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const n=this.now(),s=this.frequency.timeToTicks(t,n);this.setTicksAtTime(s,n)}getSecondsAtTime(t){t=this.toSeconds(t);const n=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);let r=n,i=0;return this._state.forEachBetween(n.time,t+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),r.state==="started"&&o.state!=="started"&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(t,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,n),ticks:t,time:n}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,n,s){let r=this._state.get(t);this._state.forEachBetween(t,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),u=a-c;let l=Math.ceil(u)-u;l=ge(l,1)?0:l;let h=this.frequency.getTimeOfTick(a+l);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(f){i=f;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class gs extends Jt{constructor(){super(R(gs.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ut,this._lastUpdate=0,this._state=new Oo("stopped"),this._boundLoop=this._loop.bind(this);const t=R(gs.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new Sr({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,kt(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Jt.getDefaults(),{callback:ut,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,n){yu(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(t){const n=this.toSeconds(t);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,n){return this._tickSource.setTicksAtTime(t,n),this}getTimeOfTick(t,n=this.now()){return this._tickSource.getTimeOfTick(t,n)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",t,n),t!==n&&(this._state.forEachBetween(t,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const n=this.toSeconds(t);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Us.mixin(gs);class ai extends Be{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=R(ai.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(n=>{this._loadingCount++;const s=t.urls[n];this.add(n,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ut,onload:ut,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Q(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,n])=>n.loaded)}add(t,n,s=ut,r=ut){return Ie(n)?this._buffers.set(t.toString(),new ht(this.baseUrl+n,s,r)):this._buffers.set(t.toString(),new ht(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Pe extends ls{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Sg extends Jt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Re,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,n){return this._events.add({callback:t,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const n=this._events.shift();n&&t-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ri(e=>{e.draw=new Sg({context:e})});ii(e=>{e.draw.dispose()});class Ag extends Be{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Q(rt(t.time),"Events must have a time property"),Q(rt(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let n=new Ng(t.time,t.time+t.duration,t);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(t){if(this._root!==null){const n=[];this._root.search(t.time,n);for(const s of n)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,n=>this.remove(n)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,n){t.parent!==null?(t.isLeftChild()?t.parent.left=n:t.parent.right=n,this._rebalance(t.parent)):this._setRoot(n)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const n=t.getBalance();let s,r=null;if(n>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const n=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(t){const n=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(t){const n=t.getBalance();n>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):n<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const n=[];if(this._root.search(t,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(t){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,n){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(t,n){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class Ng{constructor(t,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=n,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,n){t>this.max||(this.left!==null&&this.left.search(t,n),this.low<=t&&this.high>t&&n.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,n))}searchAfter(t,n){this.low>=t&&(n.push(this),this.left!==null&&this.left.searchAfter(t,n)),this.right!==null&&this.right.searchAfter(t,n)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ye extends J{constructor(){super(R(Ye.getDefaults(),arguments,["volume"])),this.name="Volume";const t=R(Ye.getDefaults(),arguments,["volume"]);this.input=this.output=new qt({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,kt(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ar extends J{constructor(){super(R(Ar.getDefaults(),arguments)),this.name="Destination",this.input=new Ye({context:this.context}),this.output=new qt({context:this.context}),this.volume=this.input.volume;const t=R(Ar.getDefaults(),arguments);$i(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),$i(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ri(e=>{e.destination=new Ar({context:e})});ii(e=>{e.destination.dispose()});class Mg extends Be{constructor(t){super(),this.name="TimelineValue",this._timeline=new Re({memory:10}),this._initialValue=t}set(t,n){return this._timeline.add({value:t,time:n}),this}get(t){const n=this._timeline.get(t);return n?n.value:this._initialValue}}class Qe{constructor(t,n){this.id=Qe._eventId++;const s=Object.assign(Qe.getDefaults(),n);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=s.time}static getDefaults(){return{callback:ut,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Qe._eventId=0;class Ro extends Qe{constructor(t,n){super(t,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Ro.getDefaults(),n);this.duration=new Pe(t.context,s.duration).valueOf(),this._interval=new Pe(t.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Qe.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const n=this.transport.getTicksAtTime(t);n>=this.time&&n>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Pe(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const n=this.transport.getTicksAtTime(t);n>this.time&&(this._nextTick=this.time+Math.ceil((n-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Pe(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Pe(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let Nr=class extends Jt{constructor(){super(R(Nr.getDefaults(),arguments)),this.name="Transport",this._loop=new Mg(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Re,this._repeatedEvents=new Ag,this._syncedSignals=[],this._swingAmount=0;const t=R(Nr.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new gs({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),kt(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Jt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,n){if(this._loop.get(t)&&n>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),n=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new Pe(this.context,this._swingTicks*2/3).toSeconds()*r}this._timeline.forEachAtTime(n,s=>s.invoke(t))}schedule(t,n){const s=new Qe(this,{callback:t,time:new ls(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,n,s,r=1/0){const i=new Ro(this,{callback:t,duration:new ye(this.context,r).toTicks(),interval:new ye(this.context,n).toTicks(),time:new ls(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,n){const s=new Qe(this,{callback:t,once:!0,time:new ls(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const n=this._scheduledEvents[t.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,n){return this._scheduledEvents[t.id.toString()]={event:t,timeline:n},n.add(t),t.id}cancel(t=0){const n=this.toTicks(t);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,n)=>{n=new Pe(this.context,n).toSeconds(),this.emit("start",t,n)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,n){let s;return rt(n)&&(s=this.toTicks(n)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){we(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new ye(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new ye(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Pe(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),n=this._clock.getTicksAtTime(t);return new Pe(this.context,n).toBarsBeatsSixteenths()}set position(t){const n=this.toTicks(t);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(t){const n=this.now(),s=this._clock.frequency.timeToTicks(t,n);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,n)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=t-s%t;return this._clock.nextTickTime(r,n)}}syncSignal(t,n){if(!n){const r=this.now();if(t.getValueAtTime(r)!==0){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);n=t.getValueAtTime(r)/o}else n=0}const s=new qt(n);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this}unsyncSignal(t){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===t&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Su(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Us.mixin(Nr);ri(e=>{e.transport=new Nr({context:e})});ii(e=>{e.transport.dispose()});class ee extends J{constructor(t){super(t),this.input=void 0,this._state=new Oo("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ut,this._syncedStop=ut,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ye({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,onstop:ut,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,n,s){let r=pe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Q(xr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Dn(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else yu(this.context),this._start(r,n,s);return this}stop(t){let n=pe(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||rt(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(t,n,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,n)=>{if(n>0){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=t=>{const n=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ut,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class _s extends $n{constructor(){super(R(_s.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=R(_s.getDefaults(),arguments,["url","onload"]);Kn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new gt({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new ht(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign($n.getDefaults(),{url:new ht,loop:!1,loopEnd:0,loopStart:0,onload:ut,onerror:ut,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,n,s,r=1){Q(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),this.loop?n=Dn(n,this.loopStart):n=Dn(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;Li(o,a)&&(o=(o-c)%u+c),ge(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,xu(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),rt(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function xn(e,t){return Rt(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,s=new Io(1,n,e.context.sampleRate);return new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Mr extends $n{constructor(){super(R(Mr.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=R(Mr.getDefaults(),arguments,["frequency","type"]);Kn(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new gt({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new gt({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),kt(this,["frequency","detune"])}static getDefaults(){return Object.assign($n.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const n=this.toSeconds(t);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ot extends ee{constructor(){super(R(Ot.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=R(Ot.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),kt(this,"frequency"),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),kt(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ee.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const n=this.toSeconds(t),s=new Mr({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(t){const n=this.toSeconds(t);this._oscillator&&this._oscillator.stop(n)}_restart(t){const n=this.toSeconds(t);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ot._periodicWaveCache.find(n=>n.phase===this._phase&&hg(n.partials,this._partials));{const t=Ot._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const n=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(rt(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(t,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ot._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ot._periodicWaveCache.length>100&&Ot._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Le(t,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")t===0?this.type=n:this.type=n+t.toString();else{const r=new Float32Array(t);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(t==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),t=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const u=2/(c*Math.PI);let l;switch(t){case"sine":l=c<=a?1:0,this._partials[c-1]=l;break;case"square":l=c&1?2*u:0,this._partials[c-1]=l;break;case"sawtooth":l=u*(c&1?1:-1),this._partials[c-1]=l;break;case"triangle":c&1?l=2*(u*u)*(c-1>>1&1?-1:1):l=0,this._partials[c-1]=l;break;case"custom":l=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}l!==0?(i[c]=-l*Math.sin(n*c),o[c]=l*Math.cos(n*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(t,n,s){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[t,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(t,n,o/i*r),s);return dg(-this._inverseFFT(t,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ot._periodicWaveCache=[];class ci extends J{constructor(){super(Object.assign(R(ci.getDefaults(),arguments,["context"])))}connect(t,n=0,s=0){return Do(this,t,n,s),this}}class vs extends ci{constructor(){super(Object.assign(R(vs.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=R(vs.getDefaults(),arguments,["mapping","length"]);we(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):sg(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ft.getDefaults(),{length:1024})}setMap(t,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=t(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const n=["none","2x","4x"].some(s=>s.includes(t));Q(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ig extends ci{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new vs({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class mn extends Ft{constructor(){super(Object.assign(R(mn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=R(mn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new qt({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ft.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ys extends ee{constructor(){super(R(ys.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ig({context:this.context}),this._modulationNode=new qt({context:this.context});const t=R(ys.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new mn({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),kt(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ws extends ee{constructor(){super(R(ws.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new qt({context:this.context,gain:0});const t=R(ws.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ot({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Ot({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new mn({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new mn({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),kt(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Wn extends ee{constructor(){super(R(Wn.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new qt({context:this.context,gain:0}),this._thresh=new vs({context:this.context,mapping:n=>n<=0?-1:1});const t=R(Wn.getDefaults(),arguments,["frequency","width"]);this.width=new Ft({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),kt(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ee.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class bs extends ee{constructor(){super(R(bs.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=R(bs.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,kt(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ot.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(n=>n.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(n=>n.stop(t))}_restart(t){this._forEach(n=>n.restart(t))}_forEach(t){for(let n=0;n<this._oscillators.length;n++)t(this._oscillators[n],n)}get type(){return this._type}set type(t){this._type=t,this._forEach(n=>n.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const n=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(t){if(Le(t,1),this._oscillators.length!==t){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<t;n++){const s=new Ot({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):ut});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(n=>n.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(n=>n.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(n=>n.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class xs extends ee{constructor(){super(R(xs.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new mn({context:this.context,value:2});const t=R(xs.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Wn({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ot({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),kt(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ee.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ca={am:ys,fat:bs,fm:ws,oscillator:Ot,pulse:Wn,pwm:xs};class Ts extends ee{constructor(){super(R(Ts.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=R(Ts.getDefaults(),arguments,["frequency","type"]);this.frequency=new Ft({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ft({context:this.context,units:"cents",value:t.detune}),kt(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Ot.getDefaults(),ws.getDefaults(),ys.getDefaults(),bs.getDefaults(),Wn.getDefaults(),xs.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const n=Ca[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),t==="fm"?this.type="fm"+n:t==="am"?this.type="am"+n:t==="fat"?this.type="fat"+n:t==="oscillator"?this.type=n:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,n){return t instanceof Ca[n]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&dn(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&dn(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ie(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(t=1024){return Rt(this,void 0,void 0,function*(){return xn(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function Eu(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Le(i,e,t),n.set(this,i)}})}}function ze(e,t=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Le(this.toSeconds(i),e,t),n.set(this,i)}})}}class Bn extends ee{constructor(){super(R(Bn.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=R(Bn.getDefaults(),arguments,["url","onload"]);this._buffer=new ht({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ee.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ut,onerror:ut,playbackRate:1,reverse:!1})}load(t){return Rt(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=ut){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,n,s){return super.start(t,n,s),this}_start(t,n,s){this._loop?n=Dn(n,this._loopStart):n=Dn(n,0);const r=this.toSeconds(n),i=s;s=Dn(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,t=this.toSeconds(t);const a=new _s({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&pe(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const n=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(n))}restart(t,n,s){return super.restart(t,n,s),this}_restart(t,n,s){this._stop(t),this._start(t,n,s)}seek(t,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,n){return this.loopStart=t,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Le(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Le(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(n=>{n.loop=t}),t)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,n)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Ce([ze(0)],Bn.prototype,"fadeIn",void 0);Ce([ze(0)],Bn.prototype,"fadeOut",void 0);class Ir extends J{constructor(){super(R(Ir.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=R(Ir.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Ye({context:this.context,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume"),this._buffers=new ai({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ee.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:ut,onerror:ut,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach(n=>{n.fadeIn=t})}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach(n=>{n.fadeOut=t})}get state(){return Array.from(this._players).some(([n,s])=>s.state==="started")?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Q(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const n=new Bn({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,n)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,n,s){return Q(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,n,s),this}stopAll(t){return this._players.forEach(n=>n.stop(t)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(t=>t.dispose()),this._buffers.dispose(),this}}class qe extends J{constructor(){super(R(qe.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Ft({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=R(qe.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(J.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,n){if(Ie(t))return t;{let s;for(s in er)if(er[s][n]===t)return s;return t}}_setCurve(t,n,s){if(Ie(s)&&Reflect.has(er,s)){const r=er[s];ln(r)?t!=="_decayCurve"&&(this[t]=r[n]):this[t]=r}else if(we(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Q(["linear","exponential"].some(n=>n===t),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,n=1){this.log("triggerAttack",t,n),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(n,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,t);else{this._sig.cancelAndHoldAtTime(t);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,t,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,c=t+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const n=this.getValueAtTime(t);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(Q(we(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,n))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,n=0,s=0){return Do(this,t,n,s),this}asArray(t=1024){return Rt(this,void 0,void 0,function*(){const n=t/this.context.sampleRate,s=new Io(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Ce([ze(0)],qe.prototype,"attack",void 0);Ce([ze(0)],qe.prototype,"decay",void 0);Ce([Eu(0,1)],qe.prototype,"sustain",void 0);Ce([ze(0)],qe.prototype,"release",void 0);const er=(()=>{let t,n;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/(128-1)*(Math.PI/2));const r=[],i=6.4;for(t=0;t<128-1;t++){n=t/(128-1);const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[t]=f/10+n*.83}r[128-1]=1;const o=[],a=5;for(t=0;t<128;t++)o[t]=Math.ceil(t/(128-1)*a)/a;const c=[];for(t=0;t<128;t++)n=t/(128-1),c[t]=.5*(1-Math.cos(Math.PI*n));const u=[];for(t=0;t<128;t++){n=t/(128-1);const f=Math.pow(n,3)*4+.2,d=Math.cos(f*Math.PI*2*n);u[t]=Math.abs(d*(1-n))}function l(f){const d=new Array(f.length);for(let p=0;p<f.length;p++)d[p]=1-f[p];return d}function h(f){return f.slice(0).reverse()}return{bounce:{In:l(u),Out:u},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:c,Out:l(c)},step:{In:o,Out:l(o)}}})();class gn extends J{constructor(){super(R(gn.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=R(gn.getDefaults(),arguments);this._volume=this.output=new Ye({context:this.context,volume:t.volume}),this.volume=this._volume.volume,kt(this,"volume")}static getDefaults(){return Object.assign(J.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,n){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class _n extends gn{constructor(){super(R(_n.getDefaults(),arguments));const t=R(_n.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(gn.getDefaults(),{detune:0,onsilence:ut,portamento:0})}triggerAttack(t,n,s=1){this.log("triggerAttack",t,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const n=this.toSeconds(t);return this._triggerEnvelopeRelease(n),this}setNote(t,n){const s=this.toSeconds(n),r=t instanceof de?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Ce([ze(0)],_n.prototype,"portamento",void 0);class Vo extends qe{constructor(){super(R(Vo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new qt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Cs extends _n{constructor(){super(R(Cs.getDefaults(),arguments)),this.name="Synth";const t=R(Cs.getDefaults(),arguments);this.oscillator=new Ts(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Vo(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),kt(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(_n.getDefaults(),{envelope:Object.assign(Ta(qe.getDefaults(),Object.keys(J.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Ta(Ts.getDefaults(),[...Object.keys(ee.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,n){if(this.envelope.triggerAttack(t,n),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ks extends Cs{constructor(){super(R(ks.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=R(ks.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,kt(this,["oscillator","envelope"])}static getDefaults(){return On(_n.getDefaults(),Cs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,n){const s=this.toSeconds(n),r=this.toFrequency(t instanceof de?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Ce([Eu(0)],ks.prototype,"octaves",void 0);Ce([ze(0)],ks.prototype,"pitchDecay",void 0);const Ou=new Set;function Po(e){Ou.add(e)}function Du(e,t){const n=`registerProcessor("${e}", ${t})`;Ou.add(n)}const Eg=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Po(Eg);const Og=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Po(Og);const Dg=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Po(Dg);const Rg="feedback-comb-filter",Vg=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Du(Rg,Vg);class Ss extends gn{constructor(){super(R(Ss.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=R(Ss.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(Q(tr(s)||dn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),tr(s)){const i=new de(this.context,s).toMidi();n[i]=t.urls[s]}else dn(r)&&isFinite(r)&&(n[r]=t.urls[r])}),this._buffers=new ai({urls:n,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(gn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ut,onerror:ut,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,n,s=1){return this.log("triggerAttack",t,n,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=Iu(new de(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),u=o-c,l=this._buffers.get(u),h=Mu(c+a),f=new _s({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);f.start(n,0,l.duration/h,s),we(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const d=this._activeSources.get(o),p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}),this}triggerRelease(t,n){return this.log("triggerRelease",t,n),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new de(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const n=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(t,i,r),we(n)?(Q(we(t),"notes must be an array when duration is array"),t.forEach((o,a)=>{const c=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(t,i+this.toSeconds(n)),this}add(t,n,s){if(Q(tr(t)||isFinite(t),`note must be a pitch or midi: ${t}`),tr(t)){const r=new de(this.context,t).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(t,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Ce([ze(0)],Ss.prototype,"attack",void 0);Ce([ze(0)],Ss.prototype,"release",void 0);class Er extends J{constructor(){super(Object.assign(R(Er.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=R(Er.getDefaults(),arguments,["pan"]);this.pan=new gt({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",kt(this,"pan")}static getDefaults(){return Object.assign(J.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Pg="bit-crusher",Fg=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Du(Pg,Fg);class Or extends J{constructor(){super(R(Or.getDefaults(),arguments,["channels"])),this.name="Split";const t=R(Or.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(J.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class As extends J{constructor(){super(R(As.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=R(As.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new qt({context:this.context}),this._split=new Or({context:this.context,channels:t.channels}),this.input.connect(this._split),Le(t.channels,1);for(let n=0;n<t.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(J.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((t,n)=>{const s=this._buffers[n];this._type==="fft"?t.getFloatFrequencyData(s):this._type==="waveform"&&t.getFloatTimeDomainData(s)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach((n,s)=>{n.fftSize=t*2,this._buffers[s]=new Float32Array(t)})}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Q(t==="waveform"||t==="fft",`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach(n=>n.smoothingTimeConstant=t)}dispose(){return super.dispose(),this._analysers.forEach(t=>t.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class Dr extends J{constructor(){super(R(Dr.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new As({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ns extends Dr{constructor(){super(R(Ns.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const t=R(Ns.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new As({context:this.context,size:256,type:"waveform",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(Dr.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return No("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),s=(this.channels===1?[t]:t).map(r=>{const i=r.reduce((a,c)=>a+c*c,0),o=Math.sqrt(i/r.length);return this._rms=Math.max(o,this._rms*this.smoothing),this.normalRange?this._rms:Nu(this._rms)});return this.channels===1?s[0]:s}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Et extends J{constructor(){super(R(Et.getDefaults(),arguments,["solo"])),this.name="Solo";const t=R(Et.getDefaults(),arguments,["solo"]);this.input=this.output=new qt({context:this.context}),Et._allSolos.has(this.context)||Et._allSolos.set(this.context,new Set),Et._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(J.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Et._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Et._soloed.has(this.context)||Et._soloed.set(this.context,new Set),Et._soloed.get(this.context).add(this)}_removeSolo(){Et._soloed.has(this.context)&&Et._soloed.get(this.context).delete(this)}_isSoloed(){return Et._soloed.has(this.context)&&Et._soloed.get(this.context).has(this)}_noSolos(){return!Et._soloed.has(this.context)||Et._soloed.has(this.context)&&Et._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Et._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Et._allSolos=new Map;Et._soloed=new Map;class Rr extends J{constructor(){super(R(Rr.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=R(Rr.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Er({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ye({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,kt(this,["pan","volume"])}static getDefaults(){return Object.assign(J.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class un extends J{constructor(){super(R(un.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=R(un.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Et({solo:t.solo,context:this.context}),this._panVol=this.output=new Rr({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),kt(this,["pan","volume"])}static getDefaults(){return Object.assign(J.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return un.buses.has(t)||un.buses.set(t,new qt({context:this.context})),un.buses.get(t)}send(t,n=0){const s=this._getBus(t),r=new qt({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}un.buses=new Map;class Lg extends J{constructor(){super(...arguments),this.name="Listener",this.positionX=new gt({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new gt({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new gt({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new gt({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new gt({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new gt({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new gt({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new gt({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new gt({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(J.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ri(e=>{e.listener=new Lg({context:e})});ii(e=>{e.listener.dispose()});const ka=ve().transport;ve().destination;ve().destination;ve().listener;ve().draw;ve();const qg=""+new URL("../../assets/NOLIMITER_01_DRUMS_FX_230110-fe231856.wav",import.meta.url).href,$g=""+new URL("../../assets/NOLIMITER_02_BEAT_FX_230110-1aede4ec.wav",import.meta.url).href,Wg=""+new URL("../../assets/NOLIMITER_03_PIANO_FX_230110-3aef24fc.wav",import.meta.url).href,Bg=""+new URL("../../assets/NOLIMITER_04_LEAD_SYNTH_FX_230110-fb4bdfc8.wav",import.meta.url).href,zg=""+new URL("../../assets/NOLIMITER_05_BASS_ELECTRIC_FX_230110-e39bdb32.wav",import.meta.url).href,Ug=""+new URL("../../assets/NOLIMITER_06_BASS_SYNTH_FX_230110-e723d489.wav",import.meta.url).href,jg=""+new URL("../../assets/NOLIMITER_07_STRINGS_FX_230110-6c14d1dc.wav",import.meta.url).href,Hg=""+new URL("../../assets/NOLIMITER_08_ORGAN_FX_230110-df5001c9.wav",import.meta.url).href,Gg=""+new URL("../../assets/NOLIMITER_09_SHAKER_FX_230110-4b21317d.wav",import.meta.url).href,Xg=""+new URL("../../assets/NOLIMITER_10_CLAP_FX_230110-25a01a15.wav",import.meta.url).href,yi=["drums","lead","bass","pad","shaker"],ne=["drums_drumkit","drums_beat","lead_piano","lead_synth","bass_electric","bass_synth","pad_strings","pad_organ","shaker_tamb","shaker_claps"],Zg={[ne[0]]:qg,[ne[1]]:$g,[ne[2]]:Wg,[ne[3]]:Bg,[ne[4]]:zg,[ne[5]]:Ug,[ne[6]]:jg,[ne[7]]:Hg,[ne[8]]:Gg,[ne[9]]:Xg};function Sa(e,{delay:t=0,duration:n=400,easing:s=Bl}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:s,css:i=>`opacity: ${i*r}`}}function Yg(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","m111 58.3-87.37.4-.61 8.3L192.4 92.6l1.8-8.1zm310.8 18.8-.3 29.7 5-.8 4.9.8-.3-29.7zM96.33 92.8l-1.81 13-33.17 26.4 1.84 115.6 6.16-40.4 9.55-2.3h.28l-1.03-65 31.95-25.4 2.7-19.4zm330.17 25.9-66.6 10.4.6 8.3h132l.6-8.3zm-66 33.3-.6 8.3 66.6 10.4 66.6-10.4-.6-8.3zm60.3 30.5-.2 20.8c2.8.5 5.6 1.2 8.5 1.8l3.3.8-.2-23.4-5.7.9zm-287.4 30.7c-16.5-.2-33.5 1.9-51.1 6.1l-2.86 18.8c23.26-3.3 75.96-6.9 127.56 14.6 4-1.6 8.2-3.1 12.4-4.3l1.2-8c-26.6-18.2-55.8-26.8-87.2-27.2zm241.2 0c-31.4.4-60.6 9-87.2 27.2l1.2 8c4.2 1.2 8.4 2.7 12.4 4.3 51.6-21.5 104.3-17.9 127.6-14.6l-2.9-18.8c-17.6-4.2-34.6-6.3-51.1-6.1zm-258.1 39c-17.91 0-32.1 1.8-39.69 3.1l-7.05 46.3 72.94 11.1c10.1-20.3 25.5-37.5 44.5-49.6-25.4-8.5-50.4-10.9-70.7-10.9zm275 0c-20.3 0-45.3 2.4-70.7 10.9 19 12.1 34.4 29.3 44.5 49.6l72.9-11.1-7-46.3c-7.6-1.3-21.8-3.1-39.7-3.1zm-137.5 10c-49.9 0-90.4 40.5-90.4 90.4 0 49.9 40.5 90.4 90.4 90.4 49.9 0 90.4-40.5 90.4-90.4 0-49.9-40.5-90.4-90.4-90.4zM64.27 315.5l1.36 85.5-46.73 87h18.94l33.24-62 15.19 62h17.23l-21.19-86-1.33-84zM433.6 317l-14.2 2.2-.8 74.1-24.2 55.7 7.4 25 24.7-57 30.9 71h18.2l-41.2-94.7zm-279.7 11.6c-4.7 12.1-7.2 25.2-7.2 38.9C146.7 427 194.8 475 254 475c59.2 0 107.3-48 107.3-107.5 0-13.7-2.5-26.8-7.2-38.9 1.8 7.7 2.8 15.8 2.8 24C356.9 409 310.8 456 254 456c-56.8 0-102.9-47-102.9-103.4 0-8.2 1-16.3 2.8-24zm-18 77.4-20.2 82h25.7l11.8-48c-7.4-11-13.3-22-17.3-34zm236.2 0c-4 12-9.9 23-17.3 34l11.8 48h25.7z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class Qg extends Nt{constructor(t){super(),Mt(this,t,null,Yg,It,{})}}function Kg(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M228.2 26.89c-15.2-.25-27.7 33.46-12.3 39.8l8.9 3.61 17.8-15.5-1.8-23.5-8.7-3.6c-1.1-.43-2.1-.68-3.2-.78h-.7zm134.4 7.92h-2.3c-7.4.3-15.3 2.12-23.3 5.75-21.2 9.67-43.6 32.67-59.7 75.74L174.4 394.7l-.1.2v.2c.9.5 3.6 1.9 8 4 9.8 4.8 24 15.7 26.1 38.8v.5l-1 55.6H304c-.1-17.6 1.4-34.5 8.1-51.5 11.7-29.4 39.3-54.9 97-77 0-.2 0 0 .1-.4.3-2 .4-6 0-11-1-10.1-4-24.9-8.6-42.2-9.2-34.7-24.8-80.2-42.4-124.9l-2.4-6.2 5.2-4.2c36.1-28.2 51.1-56.4 53.8-79.56 2.7-23.06-6.5-41.48-21.3-52.25-8.7-6.31-19.3-9.99-30.9-10.02zM260.5 52.44l.7 10.01-7.6 6.6 21.7 8.93c1.2-2.17 2.5-4.28 3.8-6.33l4-9.89zm69 18.56c8.8 0 16 7.16 16 16s-7.2 16-16 16-16-7.16-16-16 7.2-16 16-16zm-136.7 49.7c-15.2-.3-27.9 33.4-12.3 39.8l8.8 3.6 17.8-15.5-1.7-23.6-8.8-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 19.9 8.1 6.2-16.8zm71.6 19.8c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm-139.8 50.6c-15.3-.3-27.8 33.4-12.4 39.8l8.9 3.6 17.8-15.5-1.8-23.6-8.7-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 20.4 8.3 6.2-16.8zm67.2 19.3c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm-140.1 54.4c-15.2-.3-27.78 33.4-12.3 39.8l8.8 3.6 17.8-15.5-1.8-23.6-8.7-3.6c-1.1-.4-2.1-.6-3.1-.7zm32.2 25.5l.7 10-7.6 6.6 22.8 9.3 6.8-16.6zm69.3 18.5c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class Jg extends Nt{constructor(t){super(),Mt(this,t,null,Kg,It,{})}}function t_(e){let t,n,s,r;return{c(){t=vt("svg"),n=vt("path"),s=vt("path"),r=vt("path"),this.h()},l(i){t=yt(i,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var o=F(t);n=yt(o,"path",{d:!0}),F(n).forEach(E),s=yt(o,"path",{d:!0}),F(s).forEach(E),r=yt(o,"path",{d:!0}),F(r).forEach(E),o.forEach(E),this.h()},h(){k(n,"d","M4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V3zm1 0v3h6V3H5zm3 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"),k(s,"d","M11 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"),k(r,"d","M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 16 16"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(i,o){at(i,t,o),L(t,n),L(t,s),L(t,r)},p:K,i:K,o:K,d(i){i&&E(t)}}}class e_ extends Nt{constructor(t){super(),Mt(this,t,null,t_,It,{})}}function n_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M496,224a48,48,0,1,0-48-48A48,48,0,0,0,496,224ZM311.47,178.45A56.77,56.77,0,0,1,328,176a56,56,0,0,1,19,3.49l15.35-48.61A24,24,0,0,0,342,99.74c-11.53-1.35-22.21,6.44-25.71,17.51l-20.9,66.17ZM93.65,386.33c.8-.19,1.54-.54,2.35-.71V359.93a156,156,0,0,1,107.06-148l73.7-22.76L310.92,81.05a24,24,0,0,0-20.33-31.11c-11.53-1.34-22.22,6.45-25.72,17.52L231.42,173.88a8,8,0,0,1-15.26-4.83L259.53,31.26A24,24,0,0,0,239.2.15C227.67-1.19,217,6.6,213.49,17.66L165.56,169.37a8,8,0,1,1-15.26-4.82l38.56-122a24,24,0,0,0-20.33-31.11C157,10,146.32,17.83,142.82,28.9l-60,189.85L80.76,168.7A24,24,0,0,0,56.9,144.55c-13.23-.05-24.72,10.54-24.9,23.86V281.14A123.69,123.69,0,0,0,93.65,386.33ZM519.1,336H360a8,8,0,0,1,0-16H488a24,24,0,0,0,23.54-28.76C509.35,279.84,498.71,272,487.1,272H288l47.09-17.06a24,24,0,0,0-14.18-45.88L213.19,242.31A123.88,123.88,0,0,0,128,360v25.65a79.78,79.78,0,0,1,58,108.63A118.9,118.9,0,0,0,248,512H456a24,24,0,0,0,23.54-28.76C477.35,471.84,466.71,464,455.1,464H360a8,8,0,0,1,0-16H488a24,24,0,0,0,23.54-28.76C509.35,407.84,498.71,400,487.1,400H360a8,8,0,0,1,0-16H520a24,24,0,0,0,23.54-28.76C541.35,343.84,530.71,336,519.1,336ZM416,64a32,32,0,1,0-32-32A32,32,0,0,0,416,64ZM112,416a48,48,0,1,0,48,48A48,48,0,0,0,112,416Z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 576 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class s_ extends Nt{constructor(t){super(),Mt(this,t,null,n_,It,{})}}function r_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","m376.3 30.6-63.3 3L61.43 230.9l261.47-51.5c5.8-4.6 10.9-9 15.4-13.1L302 75.6l15.5-6.2 33.7 84.2c55.1-60.2-20.4-71.1 25.1-123zM357 168l-13.2 11.9 9.6 24.1c-9.1-.4-19.2-.6-30.5-.7L61.43 254.9s.34 2.2.84 5.5c2.36 15.5-7.73 30.2-23.07 33.6-8.93 2-16.61 3.7-16.61 3.7l3.95 21.2 334.16 30.5 126-53.9-.9-43.4c-81.1-8.7-11.4-39.4-114-47L357 168zM83.78 284.8 358.4 307l-18.1 16.1-280.68-25.9 24.16-12.4zm-1.35 53.6 13.65 97.1-3.47 6.2.36 15.8 17.13 1.6 17.1-6.2v-13.2l-4.8-3.9 9.1-93-49.07-4.4zM184 350.5V426l105.2 9v-75.2l-16.7-1.5V417l-71.8-6v-59l-16.7-1.5zm209.8 2.7-29.4 10.9-24.8-2 15.6 99.4-3.9 5.1.8 18 17.1 1.7 15.9-7.4.3-13.2-3.9-3.9 12.3-108.6zm-208.7 89.6-28.4 9.5 3.1 14.4 102.3 10.1 21-7.4 1.1-18.3-99.1-8.3z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class i_ extends Nt{constructor(t){super(),Mt(this,t,null,r_,It,{})}}function o_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M210.5 46.8v99l12.5-11.5V46.8zm78.5 0v87.5l12.5 11.5v-99zm-196.41 11v275.9l20.81-6.3V57.8zm306.01 0v269.6l20.8 6.3V57.8zm-208.5 3.5v103.1l12.5-11.4V61.3zm119.3 0V153l12.5 11.4V61.3zM168.7 75.8V184l12.5-11.5V75.8zm162.1 0v96.7l12.5 11.5V75.8zm-268.21 12v255.1l20.84-6.4V87.8zm366.01 0v248.7l20.8 6.4V87.8zm-281.3 2.5v113.3l12.5-11.5V90.3zm204.9 0v101.8l12.5 11.5V90.3zM32.59 117.8V352l20.84-6.3V117.8zm426.01 0v227.9l20.8 6.3V117.8zm-213 50v124.8c6.9-.3 13.9-.3 20.8 0V167.8zm-30 30v97.3c6.9-.9 13.9-1.6 20.8-2.1v-95.2zm60 0V293c6.9.5 13.9 1.2 20.8 2.1v-97.3zm-90 30v72.9c6.9-1.7 13.9-3.1 20.8-4.2v-68.7zm120 0v68.7c6.9 1.1 13.9 2.5 20.8 4.1v-72.8zm-141.4 19-32.2 28L142 481h22.2zm183.1 0V481h22.2l10-206.2zm-101.7 62.5v26.4h20.8v-26.5c-7.1-.2-14.1-.1-20.8.1zm-9.2.4c-6.9.5-13.9 1.3-20.8 2.3v23.7h20.8zm39.2 0v26h20.8v-23.8c-6.9-1-13.9-1.7-20.8-2.2zm-69.2 3.7c-6.9 1.2-13.9 2.7-20.8 4.4v17.9h20.8zm99.2 0v22.3h20.8v-17.9c-6.9-1.7-13.9-3.2-20.8-4.4zm-192.2 31.4-20.81 6.3V418h20.81zm285.2 0V418h20.8v-66.9zm-315.17 9.1-20.84 6.4V418h20.84zm345.17 0V418h20.8v-57.7zm-245.5 4.9 2.5 122.2h24.3v-35h92.2v35h24.3l2.5-122.2zm-129.67 4.3-20.84 6.3V418h20.84zm405.17 0V418h20.8v-48.6zm-230.8 8.7h56.4v16.1H296V404h-80v-16.1h11.8zM209.2 417h93.6v16h-93.6zm17.4 46v18h58.8v-18z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class a_ extends Nt{constructor(t){super(),Mt(this,t,null,o_,It,{})}}function c_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M470.9 26l-23 7.69-.1 12.66 17.8 17.81 12.7-.1 7.7-23.04zm-32.5 37l-227 210.5 27.2 27L449 73.57zm-39.6-19.33L385.7 56.7l15.6 15.5 13.5-12.53zm53.5 53.59l-12.5 13.54 15.5 15.4 13.1-13zm-79.6-27.52l-13 13.02 14.6 14.61 13.5-12.58zm54.5 54.46l-12.5 13.6 14.5 14.5 13.1-13.1zm-124 39.2c-28.7-17.5-72-25.4-116.3 47.8l-7.2-1.4-7.3 13c3.8 1 13.5 8.2 12.4 12.1-3.5 11.3-48.2 64.3-70.6 44.5-2.9-2.6-5.8-5.7-8-9.6l-14.35 7.9c1.23 10-1.95 13.8-6.38 15.8-82.975 36.6-64.15 78.6-33.01 126.9l3.11-3c22.09-22.2 43.62-54.6 62.73-82.7l6.1-9.3 13 13 10.1-10.1-10.8-10.9 18.8-7.3 5.1 5.2 33.3-33.4c-2.9-3-5.9-6-8.9-8.9zm45.5 45.5L239 327l-8.9-8.9-33.3 33.3 5 5.1-7.1 18.9-10.9-11-10.1 10.2 12.8 12.9-9.2 6.3c-27.6 18.9-60.6 40.6-82.61 62.7l-3.14 3c48.45 31.2 90.45 50 127.05-33 2-4.4 5.7-7.6 15.8-6.4l7.8-14.3c-3.8-2.3-7-5-9.6-8-19.8-22.4 33.2-67.2 44.5-70.7 3.9-1.1 11 8.6 12.1 12.4l13-7.1-1.4-7.2c73.2-44.3 65.4-87.7 47.9-116.3zM206.9 295l-33.2 33.3 10.1 10.1 33.3-33.3zm-46.3 46.3l-10.2 10.1 10.2 10.1 10.1-10.1zm-33.4 13c-16.4 24.2-34.63 51-54.84 72l2.97 10.3 10.36 3c21.11-20.1 48.01-38.4 72.11-54.8z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class u_ extends Nt{constructor(t){super(),Mt(this,t,null,c_,It,{})}}function l_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"fill-rule","evenodd"),k(n,"clip-rule","evenodd"),k(n,"d","M22 21C23.1046 21 24 20.1046 24 19V5C24 3.89543 23.1046 3 22 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H22ZM11 5H8.98486V13H7.98511V19H12V13H11V5ZM18.0151 19H22V5H19.0151V13H18.0151V19ZM17.0151 13H16.0151V5H14V13H13V19H17.0151V13ZM6.98511 19V13H5.98486V5H3L3 19H6.98511Z"),k(n,"fill","currentColor"),k(t,"stroke","currentColor"),k(t,"fill","none"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 24 24"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class Ru extends Nt{constructor(t){super(),Mt(this,t,null,l_,It,{})}}function h_(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M256 59.5a48 48 0 0 0-41.8 24.55c13.3-2.32 27.2-3.55 41.8-3.55 14.6 0 28.6 1.24 41.9 3.56A48 48 0 0 0 256 59.5zm0 39c-99.4 0-163.7 59.3-186.6 132.3-23 73.2-6.4 160.5 52.3 219v.1l2.6 2.6h3.7c17.8 0 32.9-7.3 50.5-14.7l-3.6-17.9c-15.4 6.1-27.4 11.3-38 13.5l-5.1 1.1-3.5-3.9c-48.4-53.3-62-130.1-41.7-194.4 20.9-66.7 77-119.7 169.4-119.7 92.3 0 148.5 53 169.4 119.7 20.3 64.3 6.7 141.1-41.7 194.4l-3.5 3.9-5.1-1.1c-10.6-2.2-22.6-7.4-38-13.5l-3.6 17.9c17.6 7.4 32.7 14.7 50.5 14.7h3.7l2.6-2.6v-.1c58.7-58.5 75.3-145.8 52.3-219-22.9-73-87.2-132.3-186.6-132.3zm-151 34a48 48 0 0 0-48 48 48 48 0 0 0 4.6 20.4c11.7-25.5 28.5-48.7 49.9-67.9a48 48 0 0 0-6.5-.5zm302 0a48 48 0 0 0-6.5.5c21.4 19.2 38.2 42.4 49.9 67.9a48 48 0 0 0 4.6-20.4 48 48 0 0 0-48-48zm-151 2c-13.3 0-25.7 1.1-37.2 3.2a48 48 0 0 0 37.2 17.8 48 48 0 0 0 37.2-17.7c-11.5-2.2-23.9-3.3-37.2-3.3zm-104.7 33.7c-19.3 16-33.4 36.7-42.7 60.1a48 48 0 0 0 44.4-47.8 48 48 0 0 0-1.7-12.3zm209.3 0a48 48 0 0 0-1.6 12.3 48 48 0 0 0 44.5 47.9c-9.4-23.5-23.5-44.2-42.9-60.2zM95.7 299.4c.5 23.4 5.3 46.9 14.4 68.8a48 48 0 0 0 8.9-27.7 48 48 0 0 0-23.3-41.1zm320.6 0a48 48 0 0 0-23.3 41.1 48 48 0 0 0 8.9 27.8c9.1-22 13.9-45.5 14.4-68.9zm-374.8 3.3A48 48 0 0 0 23 340.5a48 48 0 0 0 35.9 46.4c-11-26.9-16.7-55.6-17.4-84.2zm429.1 0c-.8 28.6-6.5 57.2-17.5 84.2a48 48 0 0 0 35.9-46.4 48 48 0 0 0-18.4-37.8zM256 402.5c-25.6 0-46.5 5-64 11l3.5 17.7c16.8-5.9 36.2-10.7 60.5-10.7 24.3 0 43.7 4.8 60.5 10.7l3.5-17.7c-17.5-6-38.4-11-64-11z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 512 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class f_ extends Nt{constructor(t){super(),Mt(this,t,null,h_,It,{})}}function d_(e){let t,n,s,r;const i=[y_,v_],o=[];function a(c,u){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var u=F(t);s.l(u),u.forEach(E)},m(c,u){at(c,t,u),o[n].m(t,null),r=!0},p(c,u){let l=n;n=a(c),n!==l&&(Je(),nt(o[l],1,1,()=>{o[l]=null}),tn(),s=o[n],s||(s=o[n]=i[n](c),s.c()),tt(s,1),s.m(t,null))},i(c){r||(tt(s),r=!0)},o(c){nt(s),r=!1},d(c){c&&E(t),o[n].d()}}}function p_(e){let t,n,s,r;const i=[b_,w_],o=[];function a(c,u){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var u=F(t);s.l(u),u.forEach(E)},m(c,u){at(c,t,u),o[n].m(t,null),r=!0},p(c,u){let l=n;n=a(c),n!==l&&(Je(),nt(o[l],1,1,()=>{o[l]=null}),tn(),s=o[n],s||(s=o[n]=i[n](c),s.c()),tt(s,1),s.m(t,null))},i(c){r||(tt(s),r=!0)},o(c){nt(s),r=!1},d(c){c&&E(t),o[n].d()}}}function m_(e){let t,n,s,r;const i=[T_,x_],o=[];function a(c,u){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var u=F(t);s.l(u),u.forEach(E)},m(c,u){at(c,t,u),o[n].m(t,null),r=!0},p(c,u){let l=n;n=a(c),n!==l&&(Je(),nt(o[l],1,1,()=>{o[l]=null}),tn(),s=o[n],s||(s=o[n]=i[n](c),s.c()),tt(s,1),s.m(t,null))},i(c){r||(tt(s),r=!0)},o(c){nt(s),r=!1},d(c){c&&E(t),o[n].d()}}}function g_(e){let t,n,s,r;const i=[k_,C_],o=[];function a(c,u){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var u=F(t);s.l(u),u.forEach(E)},m(c,u){at(c,t,u),o[n].m(t,null),r=!0},p(c,u){let l=n;n=a(c),n!==l&&(Je(),nt(o[l],1,1,()=>{o[l]=null}),tn(),s=o[n],s||(s=o[n]=i[n](c),s.c()),tt(s,1),s.m(t,null))},i(c){r||(tt(s),r=!0)},o(c){nt(s),r=!1},d(c){c&&E(t),o[n].d()}}}function __(e){let t,n,s,r;const i=[A_,S_],o=[];function a(c,u){return c[1]?1:0}return n=a(e),s=o[n]=i[n](e),{c(){t=H("span"),s.c()},l(c){t=G(c,"SPAN",{});var u=F(t);s.l(u),u.forEach(E)},m(c,u){at(c,t,u),o[n].m(t,null),r=!0},p(c,u){let l=n;n=a(c),n!==l&&(Je(),nt(o[l],1,1,()=>{o[l]=null}),tn(),s=o[n],s||(s=o[n]=i[n](c),s.c()),tt(s,1),s.m(t,null))},i(c){r||(tt(s),r=!0)},o(c){nt(s),r=!1},d(c){c&&E(t),o[n].d()}}}function v_(e){let t,n;return t=new s_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function y_(e){let t,n;return t=new f_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function w_(e){let t,n;return t=new a_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function b_(e){let t,n;return t=new u_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function x_(e){let t,n;return t=new Ru({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function T_(e){let t,n;return t=new Jg({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function C_(e){let t,n;return t=new Ru({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function k_(e){let t,n;return t=new i_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function S_(e){let t,n;return t=new e_({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function A_(e){let t,n;return t=new Qg({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function N_(e){let t,n,s,r,i;const o=[__,g_,m_,p_,d_],a=[];function c(u,l){return u[0]==="drums"?0:u[0]==="lead"?1:u[0]==="bass"?2:u[0]==="pad"?3:u[0]==="shaker"?4:-1}return~(s=c(e))&&(r=a[s]=o[s](e)),{c(){t=H("div"),n=H("span"),r&&r.c(),this.h()},l(u){t=G(u,"DIV",{class:!0});var l=F(t);n=G(l,"SPAN",{});var h=F(n);r&&r.l(h),h.forEach(E),l.forEach(E),this.h()},h(){k(t,"class","text-4xl")},m(u,l){at(u,t,l),L(t,n),~s&&a[s].m(n,null),i=!0},p(u,[l]){let h=s;s=c(u),s===h?~s&&a[s].p(u,l):(r&&(Je(),nt(a[h],1,1,()=>{a[h]=null}),tn()),~s?(r=a[s],r?r.p(u,l):(r=a[s]=o[s](u),r.c()),tt(r,1),r.m(n,null)):r=null)},i(u){i||(tt(r),i=!0)},o(u){nt(r),i=!1},d(u){u&&E(t),~s&&a[s].d()}}}function M_(e,t,n){const s="this is a test";let{channelName:r}=t,{alternateTrack:i}=t;return e.$$set=o=>{"channelName"in o&&n(0,r=o.channelName),"alternateTrack"in o&&n(1,i=o.alternateTrack)},[r,i,s]}class I_ extends Nt{constructor(t){super(),Mt(this,t,M_,N_,It,{test:2,channelName:0,alternateTrack:1})}get test(){return this.$$.ctx[2]}}function E_(e){let t=e[2]>0?"+":"",n,s;return{c(){n=he(t),s=he(e[2])},l(r){n=fe(r,t),s=fe(r,e[2])},m(r,i){at(r,n,i),at(r,s,i)},p(r,i){i&4&&t!==(t=r[2]>0?"+":"")&&Xe(n,t),i&4&&Xe(s,r[2])},d(r){r&&E(n),r&&E(s)}}}function O_(e){let t,n,s;return{c(){t=he("-"),n=H("span"),s=he(""),this.h()},l(r){t=fe(r,"-"),n=G(r,"SPAN",{class:!0});var i=F(n);s=fe(i,""),i.forEach(E),this.h()},h(){k(n,"class","text-lg")},m(r,i){at(r,t,i),at(r,n,i),L(n,s)},p:K,d(r){r&&E(t),r&&E(n)}}}function D_(e){let t,n,s,r,i,o,a,c;function u(f,d){return f[2]<=-80?O_:E_}let l=u(e),h=l(e);return{c(){t=H("div"),n=H("div"),s=H("div"),r=H("input"),i=Ht(),o=H("div"),h.c(),this.h()},l(f){t=G(f,"DIV",{class:!0});var d=F(t);n=G(d,"DIV",{class:!0});var p=F(n);s=G(p,"DIV",{class:!0,style:!0});var m=F(s);r=G(m,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),m.forEach(E),p.forEach(E),i=Gt(d),o=G(d,"DIV",{class:!0});var g=F(o);h.l(g),g.forEach(E),d.forEach(E),this.h()},h(){k(r,"type","range"),k(r,"min",0),k(r,"max",1),k(r,"step",.05),r.value=e[0],k(r,"class","svelte-1yc5a7r"),k(s,"class","w-40 absolute -rotate-90"),k(s,"style",`
        top: 80px;
        left: -60px;
        height: 28px
    `),k(n,"class","volume-wrapper-outer border-1 bg-gray-400 relative w-10 h-44"),k(o,"class","flex justify-center items-center text-sm bg-gray-400 h-10 text-gray-800 font-bold w-10"),k(t,"class","h-58 rounded overflow-hidden")},m(f,d){at(f,t,d),L(t,n),L(n,s),L(s,r),L(t,i),L(t,o),h.m(o,null),a||(c=me(r,"input",e[3]),a=!0)},p(f,[d]){d&1&&(r.value=f[0]),l===(l=u(f))&&h?h.p(f,d):(h.d(1),h=l(f),h&&(h.c(),h.m(o,null)))},i:K,o:K,d(f){f&&E(t),h.d(),a=!1,c()}}}function R_(e,t,n){let s,{volume:r}=t,{handleVolumeChange:i}=t;const o=a=>i(a);return e.$$set=a=>{"volume"in a&&n(0,r=a.volume),"handleVolumeChange"in a&&n(1,i=a.handleVolumeChange)},e.$$.update=()=>{e.$$.dirty&1&&n(2,s=Math.round(r*100)-80)},[r,i,s,o]}class Vu extends Nt{constructor(t){super(),Mt(this,t,R_,D_,It,{volume:0,handleVolumeChange:1})}}function Pu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function V_(e){return e.length===1&&(e=P_(e)),{left:function(t,n,s,r){for(s==null&&(s=0),r==null&&(r=t.length);s<r;){var i=s+r>>>1;e(t[i],n)<0?s=i+1:r=i}return s},right:function(t,n,s,r){for(s==null&&(s=0),r==null&&(r=t.length);s<r;){var i=s+r>>>1;e(t[i],n)>0?r=i:s=i+1}return s}}}function P_(e){return function(t,n){return Pu(e(t),n)}}var F_=V_(Pu),Fu=F_.right;function L_(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++s<r;)i[s]=e+s*n;return i}var Wi=Math.sqrt(50),Bi=Math.sqrt(10),zi=Math.sqrt(2);function q_(e,t,n){var s,r=-1,i,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(a=ur(e,t,n))===0||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++r<i;)o[r]=(e+r)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++r<i;)o[r]=(e-r)/a;return s&&o.reverse(),o}function ur(e,t,n){var s=(t-e)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=Wi?10:i>=Bi?5:i>=zi?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=Wi?10:i>=Bi?5:i>=zi?2:1)}function $_(e,t,n){var s=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=Wi?r*=10:i>=Bi?r*=5:i>=zi&&(r*=2),t<e?-r:r}var W_={value:function(){}};function Lu(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new lr(n)}function lr(e){this._=e}function B_(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",r=n.indexOf(".");if(r>=0&&(s=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}lr.prototype=Lu.prototype={constructor:lr,on:function(e,t){var n=this._,s=B_(e+"",n),r,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((r=(e=s[i]).type)&&(r=z_(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(r=(e=s[i]).type)n[r]=Aa(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Aa(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),s=0,r,i;s<r;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,r=i.length;s<r;++s)i[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)}};function z_(e,t){for(var n=0,s=e.length,r;n<s;++n)if((r=e[n]).name===t)return r.value}function Aa(e,t,n){for(var s=0,r=e.length;s<r;++s)if(e[s].name===t){e[s]=W_,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ui="http://www.w3.org/1999/xhtml";const Na={svg:"http://www.w3.org/2000/svg",xhtml:Ui,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Na.hasOwnProperty(t)?{space:Na[t],local:e}:e}function U_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ui&&t.documentElement.namespaceURI===Ui?t.createElement(e):t.createElementNS(n,e)}}function j_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qu(e){var t=ui(e);return(t.local?j_:U_)(t)}function H_(){}function Fo(e){return e==null?H_:function(){return this.querySelector(e)}}function G_(e){typeof e!="function"&&(e=Fo(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=new Array(o),c,u,l=0;l<o;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ie(s,this._parents)}function X_(){return[]}function $u(e){return e==null?X_:function(){return this.querySelectorAll(e)}}function Z_(e){typeof e!="function"&&(e=$u(e));for(var t=this._groups,n=t.length,s=[],r=[],i=0;i<n;++i)for(var o=t[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(s.push(e.call(c,c.__data__,u,o)),r.push(c));return new ie(s,r)}function Wu(e){return function(){return this.matches(e)}}function Y_(e){typeof e!="function"&&(e=Wu(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new ie(s,this._parents)}function Bu(e){return new Array(e.length)}function Q_(){return new ie(this._enter||this._groups.map(Bu),this._parents)}function Vr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vr.prototype={constructor:Vr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function K_(e){return function(){return e}}var Ma="$";function J_(e,t,n,s,r,i){for(var o=0,a,c=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],s[o]=a):n[o]=new Vr(e,i[o]);for(;o<c;++o)(a=t[o])&&(r[o]=a)}function t0(e,t,n,s,r,i,o){var a,c,u={},l=t.length,h=i.length,f=new Array(l),d;for(a=0;a<l;++a)(c=t[a])&&(f[a]=d=Ma+o.call(c,c.__data__,a,t),d in u?r[a]=c:u[d]=c);for(a=0;a<h;++a)d=Ma+o.call(e,i[a],a,i),(c=u[d])?(s[a]=c,c.__data__=i[a],u[d]=null):n[a]=new Vr(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u[f[a]]===c&&(r[a]=c)}function e0(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each(function(b){d[++u]=b}),d;var n=t?t0:J_,s=this._parents,r=this._groups;typeof e!="function"&&(e=K_(e));for(var i=r.length,o=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=s[u],h=r[u],f=h.length,d=e.call(l,l&&l.__data__,u,s),p=d.length,m=a[u]=new Array(p),g=o[u]=new Array(p),_=c[u]=new Array(f);n(l,h,m,g,_,d,t);for(var w=0,y=0,T,v;w<p;++w)if(T=m[w]){for(w>=y&&(y=w+1);!(v=g[y])&&++y<p;);T._next=v||null}}return o=new ie(o,s),o._enter=a,o._exit=c,o}function n0(){return new ie(this._exit||this._groups.map(Bu),this._parents)}function s0(e,t,n){var s=this.enter(),r=this,i=this.exit();return s=typeof e=="function"?e(s):s.append(e+""),t!=null&&(r=t(r)),n==null?i.remove():n(i),s&&r?s.merge(r).order():r}function r0(e){for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,h=o[a]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;a<s;++a)o[a]=t[a];return new ie(o,this._parents)}function i0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],r=s.length-1,i=s[r],o;--r>=0;)(o=s[r])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function o0(e){e||(e=a0);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,s=n.length,r=new Array(s),i=0;i<s;++i){for(var o=n[i],a=o.length,c=r[i]=new Array(a),u,l=0;l<a;++l)(u=o[l])&&(c[l]=u);c.sort(t)}return new ie(r,this._parents).order()}function a0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function c0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function u0(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function l0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],r=0,i=s.length;r<i;++r){var o=s[r];if(o)return o}return null}function h0(){var e=0;return this.each(function(){++e}),e}function f0(){return!this.node()}function d0(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function p0(e){return function(){this.removeAttribute(e)}}function m0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g0(e,t){return function(){this.setAttribute(e,t)}}function _0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function v0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function y0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function w0(e,t){var n=ui(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?m0:p0:typeof t=="function"?n.local?y0:v0:n.local?_0:g0)(n,t))}function zu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function b0(e){return function(){this.style.removeProperty(e)}}function x0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function T0(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function C0(e,t,n){return arguments.length>1?this.each((t==null?b0:typeof t=="function"?T0:x0)(e,t,n??"")):zn(this.node(),e)}function zn(e,t){return e.style.getPropertyValue(t)||zu(e).getComputedStyle(e,null).getPropertyValue(t)}function k0(e){return function(){delete this[e]}}function S0(e,t){return function(){this[e]=t}}function A0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function N0(e,t){return arguments.length>1?this.each((t==null?k0:typeof t=="function"?A0:S0)(e,t)):this.node()[e]}function Uu(e){return e.trim().split(/^|\s+/)}function Lo(e){return e.classList||new ju(e)}function ju(e){this._node=e,this._names=Uu(e.getAttribute("class")||"")}ju.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hu(e,t){for(var n=Lo(e),s=-1,r=t.length;++s<r;)n.add(t[s])}function Gu(e,t){for(var n=Lo(e),s=-1,r=t.length;++s<r;)n.remove(t[s])}function M0(e){return function(){Hu(this,e)}}function I0(e){return function(){Gu(this,e)}}function E0(e,t){return function(){(t.apply(this,arguments)?Hu:Gu)(this,e)}}function O0(e,t){var n=Uu(e+"");if(arguments.length<2){for(var s=Lo(this.node()),r=-1,i=n.length;++r<i;)if(!s.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?E0:t?M0:I0)(n,t))}function D0(){this.textContent=""}function R0(e){return function(){this.textContent=e}}function V0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function P0(e){return arguments.length?this.each(e==null?D0:(typeof e=="function"?V0:R0)(e)):this.node().textContent}function F0(){this.innerHTML=""}function L0(e){return function(){this.innerHTML=e}}function q0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $0(e){return arguments.length?this.each(e==null?F0:(typeof e=="function"?q0:L0)(e)):this.node().innerHTML}function W0(){this.nextSibling&&this.parentNode.appendChild(this)}function B0(){return this.each(W0)}function z0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U0(){return this.each(z0)}function j0(e){var t=typeof e=="function"?e:qu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function H0(){return null}function G0(e,t){var n=typeof e=="function"?e:qu(e),s=t==null?H0:typeof t=="function"?t:Fo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function X0(){var e=this.parentNode;e&&e.removeChild(this)}function Z0(){return this.each(X0)}function Y0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function K0(e){return this.select(e?Q0:Y0)}function J0(e){return arguments.length?this.property("__data__",e):this.node().__data__}var Xu={};if(typeof document<"u"){var t1=document.documentElement;"onmouseenter"in t1||(Xu={mouseenter:"mouseover",mouseleave:"mouseout"})}function e1(e,t,n){return e=Zu(e,t,n),function(s){var r=s.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&e.call(this,s)}}function Zu(e,t,n){return function(s){try{e.call(this,this.__data__,t,n)}finally{}}}function n1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function s1(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.capture):t[++s]=i;++s?t.length=s:delete this.__on}}}function r1(e,t,n){var s=Xu.hasOwnProperty(e.type)?e1:Zu;return function(r,i,o){var a=this.__on,c,u=s(t,i,o);if(a){for(var l=0,h=a.length;l<h;++l)if((c=a[l]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),c.value=t;return}}this.addEventListener(e.type,u,n),c={type:e.type,name:e.name,value:t,listener:u,capture:n},a?a.push(c):this.__on=[c]}}function i1(e,t,n){var s=n1(e+""),r,i=s.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<i;++r)if((o=s[r]).type===l.type&&o.name===l.name)return l.value}return}for(a=t?r1:s1,n==null&&(n=!1),r=0;r<i;++r)this.each(a(s[r],t,n));return this}function Yu(e,t,n){var s=zu(e),r=s.CustomEvent;typeof r=="function"?r=new r(t,n):(r=s.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function o1(e,t){return function(){return Yu(this,e,t)}}function a1(e,t){return function(){return Yu(this,e,t.apply(this,arguments))}}function c1(e,t){return this.each((typeof t=="function"?a1:o1)(e,t))}var Qu=[null];function ie(e,t){this._groups=e,this._parents=t}function Hs(){return new ie([[document.documentElement]],Qu)}ie.prototype=Hs.prototype={constructor:ie,select:G_,selectAll:Z_,filter:Y_,data:e0,enter:Q_,exit:n0,join:s0,merge:r0,order:i0,sort:o0,call:c0,nodes:u0,node:l0,size:h0,empty:f0,each:d0,attr:w0,style:C0,property:N0,classed:O0,text:P0,html:$0,raise:B0,lower:U0,append:j0,insert:G0,remove:Z0,clone:K0,datum:J0,on:i1,dispatch:c1};function Ku(e){return typeof e=="string"?new ie([[document.querySelector(e)]],[document.documentElement]):new ie([[e]],Qu)}function qo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ju(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Gs(){}var Ms=.7,Pr=1/Ms,Vn="\\s*([+-]?\\d+)\\s*",Is="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u1=/^#([0-9a-f]{3,8})$/,l1=new RegExp("^rgb\\("+[Vn,Vn,Vn]+"\\)$"),h1=new RegExp("^rgb\\("+[Ne,Ne,Ne]+"\\)$"),f1=new RegExp("^rgba\\("+[Vn,Vn,Vn,Is]+"\\)$"),d1=new RegExp("^rgba\\("+[Ne,Ne,Ne,Is]+"\\)$"),p1=new RegExp("^hsl\\("+[Is,Ne,Ne]+"\\)$"),m1=new RegExp("^hsla\\("+[Is,Ne,Ne,Is]+"\\)$"),Ia={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qo(Gs,vn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ea,formatHex:Ea,formatHsl:g1,formatRgb:Oa,toString:Oa});function Ea(){return this.rgb().formatHex()}function g1(){return tl(this).formatHsl()}function Oa(){return this.rgb().formatRgb()}function vn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Da(t):n===3?new re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=l1.exec(e))?new re(t[1],t[2],t[3],1):(t=h1.exec(e))?new re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=f1.exec(e))?nr(t[1],t[2],t[3],t[4]):(t=d1.exec(e))?nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=p1.exec(e))?Pa(t[1],t[2]/100,t[3]/100,1):(t=m1.exec(e))?Pa(t[1],t[2]/100,t[3]/100,t[4]):Ia.hasOwnProperty(e)?Da(Ia[e]):e==="transparent"?new re(NaN,NaN,NaN,0):null}function Da(e){return new re(e>>16&255,e>>8&255,e&255,1)}function nr(e,t,n,s){return s<=0&&(e=t=n=NaN),new re(e,t,n,s)}function _1(e){return e instanceof Gs||(e=vn(e)),e?(e=e.rgb(),new re(e.r,e.g,e.b,e.opacity)):new re}function Es(e,t,n,s){return arguments.length===1?_1(e):new re(e,t,n,s??1)}function re(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}qo(re,Es,Ju(Gs,{brighter:function(e){return e=e==null?Pr:Math.pow(Pr,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ms:Math.pow(Ms,e),new re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ra,formatHex:Ra,formatRgb:Va,toString:Va}));function Ra(){return"#"+wi(this.r)+wi(this.g)+wi(this.b)}function Va(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function wi(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Pa(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ae(e,t,n,s)}function tl(e){if(e instanceof Ae)return new Ae(e.h,e.s,e.l,e.opacity);if(e instanceof Gs||(e=vn(e)),!e)return new Ae;if(e instanceof Ae)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,a=i-r,c=(i+r)/2;return a?(t===i?o=(n-s)/a+(n<s)*6:n===i?o=(s-t)/a+2:o=(t-n)/a+4,a/=c<.5?i+r:2-i-r,o*=60):a=c>0&&c<1?0:o,new Ae(o,a,c,e.opacity)}function ji(e,t,n,s){return arguments.length===1?tl(e):new Ae(e,t,n,s??1)}function Ae(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}qo(Ae,ji,Ju(Gs,{brighter:function(e){return e=e==null?Pr:Math.pow(Pr,e),new Ae(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ms:Math.pow(Ms,e),new Ae(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new re(bi(e>=240?e-240:e+120,r,s),bi(e,r,s),bi(e<120?e+240:e-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function bi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function li(e){return function(){return e}}function el(e,t){return function(n){return e+n*t}}function v1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function y1(e,t){var n=t-e;return n?el(e,n>180||n<-180?n-360*Math.round(n/360):n):li(isNaN(e)?t:e)}function w1(e){return(e=+e)==1?hs:function(t,n){return n-t?v1(t,n,e):li(isNaN(t)?n:t)}}function hs(e,t){var n=t-e;return n?el(e,n):li(isNaN(e)?t:e)}const Fr=function e(t){var n=w1(t);function s(r,i){var o=n((r=Es(r)).r,(i=Es(i)).r),a=n(r.g,i.g),c=n(r.b,i.b),u=hs(r.opacity,i.opacity);return function(l){return r.r=o(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return s.gamma=e,s}(1);function b1(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function x1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function T1(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=$o(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(a){for(o=0;o<s;++o)i[o]=r[o](a);return i}}function C1(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function _e(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function k1(e,t){var n={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=$o(e[r],t[r]):s[r]=t[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xi=new RegExp(Hi.source,"g");function S1(e){return function(){return e}}function A1(e){return function(t){return e(t)+""}}function nl(e,t){var n=Hi.lastIndex=xi.lastIndex=0,s,r,i,o=-1,a=[],c=[];for(e=e+"",t=t+"";(s=Hi.exec(e))&&(r=xi.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(s=s[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:_e(s,r)})),n=xi.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?c[0]?A1(c[0].x):S1(t):(t=c.length,function(u){for(var l=0,h;l<t;++l)a[(h=c[l]).i]=h.x(u);return a.join("")})}function $o(e,t){var n=typeof t,s;return t==null||n==="boolean"?li(t):(n==="number"?_e:n==="string"?(s=vn(t))?(t=s,Fr):nl:t instanceof vn?Fr:t instanceof Date?C1:x1(t)?b1:Array.isArray(t)?T1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?k1:_e)(e,t)}function N1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Fa=180/Math.PI,Gi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sl(e,t,n,s,r,i){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*s)&&(n-=e*c,s-=t*c),(a=Math.sqrt(n*n+s*s))&&(n/=a,s/=a,c/=a),e*s<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Fa,skewX:Math.atan(c)*Fa,scaleX:o,scaleY:a}}var es,Ti,La,sr;function M1(e){return e==="none"?Gi:(es||(es=document.createElement("DIV"),Ti=document.documentElement,La=document.defaultView),es.style.transform=e,e=La.getComputedStyle(Ti.appendChild(es),null).getPropertyValue("transform"),Ti.removeChild(es),e=e.slice(7,-1).split(","),sl(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function I1(e){return e==null||(sr||(sr=document.createElementNS("http://www.w3.org/2000/svg","g")),sr.setAttribute("transform",e),!(e=sr.transform.baseVal.consolidate()))?Gi:(e=e.matrix,sl(e.a,e.b,e.c,e.d,e.e,e.f))}function rl(e,t,n,s){function r(u){return u.length?u.pop()+" ":""}function i(u,l,h,f,d,p){if(u!==h||l!==f){var m=d.push("translate(",null,t,null,n);p.push({i:m-4,x:_e(u,h)},{i:m-2,x:_e(l,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(u,l,h,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,s)-2,x:_e(u,l)})):l&&h.push(r(h)+"rotate("+l+s)}function a(u,l,h,f){u!==l?f.push({i:h.push(r(h)+"skewX(",null,s)-2,x:_e(u,l)}):l&&h.push(r(h)+"skewX("+l+s)}function c(u,l,h,f,d,p){if(u!==h||l!==f){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:_e(u,h)},{i:m-2,x:_e(l,f)})}else(h!==1||f!==1)&&d.push(r(d)+"scale("+h+","+f+")")}return function(u,l){var h=[],f=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,h,f),o(u.rotate,l.rotate,h,f),a(u.skewX,l.skewX,h,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,f),u=l=null,function(d){for(var p=-1,m=f.length,g;++p<m;)h[(g=f[p]).i]=g.x(d);return h.join("")}}}var E1=rl(M1,"px, ","px)","deg)"),O1=rl(I1,", ",")",")");function D1(e){return function(t,n){var s=e((t=ji(t)).h,(n=ji(n)).h),r=hs(t.s,n.s),i=hs(t.l,n.l),o=hs(t.opacity,n.opacity);return function(a){return t.h=s(a),t.s=r(a),t.l=i(a),t.opacity=o(a),t+""}}}const R1=D1(y1);var Un=0,as=0,ns=0,il=1e3,Lr,cs,qr=0,yn=0,hi=0,Os=typeof performance=="object"&&performance.now?performance:Date,ol=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fi(){return yn||(ol(V1),yn=Os.now()+hi)}function V1(){yn=0}function $r(){this._call=this._time=this._next=null}$r.prototype=al.prototype={constructor:$r,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fi():+n)+(t==null?0:+t),!this._next&&cs!==this&&(cs?cs._next=this:Lr=this,cs=this),this._call=e,this._time=n,Xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xi())}};function al(e,t,n){var s=new $r;return s.restart(e,t,n),s}function P1(){fi(),++Un;for(var e=Lr,t;e;)(t=yn-e._time)>=0&&e._call.call(null,t),e=e._next;--Un}function qa(){yn=(qr=Os.now())+hi,Un=as=0;try{P1()}finally{Un=0,L1(),yn=0}}function F1(){var e=Os.now(),t=e-qr;t>il&&(hi-=t,qr=e)}function L1(){for(var e,t=Lr,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Lr=n);cs=e,Xi(s)}function Xi(e){if(!Un){as&&(as=clearTimeout(as));var t=e-yn;t>24?(e<1/0&&(as=setTimeout(qa,e-Os.now()-hi)),ns&&(ns=clearInterval(ns))):(ns||(qr=Os.now(),ns=setInterval(F1,il)),Un=1,ol(qa))}}function $a(e,t,n){var s=new $r;return t=t==null?0:+t,s.restart(function(r){s.stop(),e(r+t)},t,n),s}var q1=Lu("start","end","cancel","interrupt"),$1=[],cl=0,Wa=1,Zi=2,hr=3,Ba=4,Yi=5,fr=6;function di(e,t,n,s,r,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;W1(e,n,{name:t,index:s,group:r,on:q1,tween:$1,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:cl})}function Wo(e,t){var n=ke(e,t);if(n.state>cl)throw new Error("too late; already scheduled");return n}function Ue(e,t){var n=ke(e,t);if(n.state>hr)throw new Error("too late; already running");return n}function ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function W1(e,t,n){var s=e.__transition,r;s[t]=n,n.timer=al(i,0,n.time);function i(u){n.state=Wa,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var l,h,f,d;if(n.state!==Wa)return c();for(l in s)if(d=s[l],d.name===n.name){if(d.state===hr)return $a(o);d.state===Ba?(d.state=fr,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete s[l]):+l<t&&(d.state=fr,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete s[l])}if($a(function(){n.state===hr&&(n.state=Ba,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Zi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zi){for(n.state=hr,r=new Array(f=n.tween.length),l=0,h=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Yi,1),h=-1,f=r.length;++h<f;)r[h].call(e,l);n.state===Yi&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=fr,n.timer.stop(),delete s[t];for(var u in s)return;delete e.__transition}}function B1(e,t){var n=e.__transition,s,r,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((s=n[o]).name!==t){i=!1;continue}r=s.state>Zi&&s.state<Yi,s.state=fr,s.timer.stop(),s.on.call(r?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[o]}i&&delete e.__transition}}function z1(e){return this.each(function(){B1(this,e)})}function U1(e,t){var n,s;return function(){var r=Ue(this,e),i=r.tween;if(i!==n){s=n=i;for(var o=0,a=s.length;o<a;++o)if(s[o].name===t){s=s.slice(),s.splice(o,1);break}}r.tween=s}}function j1(e,t,n){var s,r;if(typeof n!="function")throw new Error;return function(){var i=Ue(this,e),o=i.tween;if(o!==s){r=(s=o).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}i.tween=r}}function H1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=ke(this.node(),n).tween,r=0,i=s.length,o;r<i;++r)if((o=s[r]).name===e)return o.value;return null}return this.each((t==null?U1:j1)(n,e,t))}function Bo(e,t,n){var s=e._id;return e.each(function(){var r=Ue(this,s);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return ke(r,s).value[t]}}function ul(e,t){var n;return(typeof t=="number"?_e:t instanceof vn?Fr:(n=vn(t))?(t=n,Fr):nl)(e,t)}function G1(e){return function(){this.removeAttribute(e)}}function X1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Z1(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttribute(e);return o===r?null:o===s?i:i=t(s=o,n)}}function Y1(e,t,n){var s,r=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===s?i:i=t(s=o,n)}}function Q1(e,t,n){var s,r,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a)))}}function K1(e,t,n){var s,r,i;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a)))}}function J1(e,t){var n=ui(e),s=n==="transform"?O1:ul;return this.attrTween(e,typeof t=="function"?(n.local?K1:Q1)(n,s,Bo(this,"attr."+e,t)):t==null?(n.local?X1:G1)(n):(n.local?Y1:Z1)(n,s,t))}function tv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ev(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nv(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&ev(e,i)),n}return r._value=t,r}function sv(e,t){var n,s;function r(){var i=t.apply(this,arguments);return i!==s&&(n=(s=i)&&tv(e,i)),n}return r._value=t,r}function rv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=ui(e);return this.tween(n,(s.local?nv:sv)(s,t))}function iv(e,t){return function(){Wo(this,e).delay=+t.apply(this,arguments)}}function ov(e,t){return t=+t,function(){Wo(this,e).delay=t}}function av(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iv:ov)(t,e)):ke(this.node(),t).delay}function cv(e,t){return function(){Ue(this,e).duration=+t.apply(this,arguments)}}function uv(e,t){return t=+t,function(){Ue(this,e).duration=t}}function lv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cv:uv)(t,e)):ke(this.node(),t).duration}function hv(e,t){if(typeof t!="function")throw new Error;return function(){Ue(this,e).ease=t}}function fv(e){var t=this._id;return arguments.length?this.each(hv(t,e)):ke(this.node(),t).ease}function dv(e){typeof e!="function"&&(e=Wu(e));for(var t=this._groups,n=t.length,s=new Array(n),r=0;r<n;++r)for(var i=t[r],o=i.length,a=s[r]=[],c,u=0;u<o;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new $e(s,this._parents,this._name,this._id)}function pv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,r=n.length,i=Math.min(s,r),o=new Array(s),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,h=o[a]=new Array(l),f,d=0;d<l;++d)(f=c[d]||u[d])&&(h[d]=f);for(;a<s;++a)o[a]=t[a];return new $e(o,this._parents,this._name,this._id)}function mv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gv(e,t,n){var s,r,i=mv(t)?Wo:Ue;return function(){var o=i(this,e),a=o.on;a!==s&&(r=(s=a).copy()).on(t,n),o.on=r}}function _v(e,t){var n=this._id;return arguments.length<2?ke(this.node(),n).on.on(e):this.each(gv(n,e,t))}function vv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yv(){return this.on("end.remove",vv(this._id))}function wv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fo(e));for(var s=this._groups,r=s.length,i=new Array(r),o=0;o<r;++o)for(var a=s[o],c=a.length,u=i[o]=new Array(c),l,h,f=0;f<c;++f)(l=a[f])&&(h=e.call(l,l.__data__,f,a))&&("__data__"in l&&(h.__data__=l.__data__),u[f]=h,di(u[f],t,n,f,u,ke(l,n)));return new $e(i,this._parents,t,n)}function bv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$u(e));for(var s=this._groups,r=s.length,i=[],o=[],a=0;a<r;++a)for(var c=s[a],u=c.length,l,h=0;h<u;++h)if(l=c[h]){for(var f=e.call(l,l.__data__,h,c),d,p=ke(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&di(d,t,n,m,f,p);i.push(f),o.push(l)}return new $e(i,o,t,n)}var xv=Hs.prototype.constructor;function Tv(){return new xv(this._groups,this._parents)}function Cv(e,t){var n,s,r;return function(){var i=zn(this,e),o=(this.style.removeProperty(e),zn(this,e));return i===o?null:i===n&&o===s?r:r=t(n=i,s=o)}}function ll(e){return function(){this.style.removeProperty(e)}}function kv(e,t,n){var s,r=n+"",i;return function(){var o=zn(this,e);return o===r?null:o===s?i:i=t(s=o,n)}}function Sv(e,t,n){var s,r,i;return function(){var o=zn(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),zn(this,e))),o===c?null:o===s&&c===r?i:(r=c,i=t(s=o,a))}}function Av(e,t){var n,s,r,i="style."+t,o="end."+i,a;return function(){var c=Ue(this,e),u=c.on,l=c.value[i]==null?a||(a=ll(t)):void 0;(u!==n||r!==l)&&(s=(n=u).copy()).on(o,r=l),c.on=s}}function Nv(e,t,n){var s=(e+="")=="transform"?E1:ul;return t==null?this.styleTween(e,Cv(e,s)).on("end.style."+e,ll(e)):typeof t=="function"?this.styleTween(e,Sv(e,s,Bo(this,"style."+e,t))).each(Av(this._id,e)):this.styleTween(e,kv(e,s,t),n).on("end.style."+e,null)}function Mv(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function Iv(e,t,n){var s,r;function i(){var o=t.apply(this,arguments);return o!==r&&(s=(r=o)&&Mv(e,o,n)),s}return i._value=t,i}function Ev(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,Iv(e,t,n??""))}function Ov(e){return function(){this.textContent=e}}function Dv(e){return function(){var t=e(this);this.textContent=t??""}}function Rv(e){return this.tween("text",typeof e=="function"?Dv(Bo(this,"text",e)):Ov(e==null?"":e+""))}function Vv(e){return function(t){this.textContent=e.call(this,t)}}function Pv(e){var t,n;function s(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Vv(r)),t}return s._value=e,s}function Fv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Pv(e))}function Lv(){for(var e=this._name,t=this._id,n=hl(),s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var l=ke(c,t);di(c,e,n,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new $e(s,this._parents,e,n)}function qv(){var e,t,n=this,s=n._id,r=n.size();return new Promise(function(i,o){var a={value:o},c={value:function(){--r===0&&i()}};n.each(function(){var u=Ue(this,s),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t})})}var $v=0;function $e(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function hl(){return++$v}var kn=Hs.prototype;$e.prototype={constructor:$e,select:wv,selectAll:bv,filter:dv,merge:pv,selection:Tv,transition:Lv,call:kn.call,nodes:kn.nodes,node:kn.node,size:kn.size,empty:kn.empty,each:kn.each,on:_v,attr:J1,attrTween:rv,style:Nv,styleTween:Ev,text:Rv,textTween:Fv,remove:yv,tween:H1,delay:av,duration:lv,ease:fv,end:qv};function Wv(e){return+e}function Bv(e){return e*e}function zv(e){return e*(2-e)}function za(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Uv(e){return e*e*e}function jv(e){return--e*e*e+1}function fl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zo=3,Hv=function e(t){t=+t;function n(s){return Math.pow(s,t)}return n.exponent=e,n}(zo),Gv=function e(t){t=+t;function n(s){return 1-Math.pow(1-s,t)}return n.exponent=e,n}(zo),Xv=function e(t){t=+t;function n(s){return((s*=2)<=1?Math.pow(s,t):2-Math.pow(2-s,t))/2}return n.exponent=e,n}(zo),dl=Math.PI,pl=dl/2;function Zv(e){return+e==1?1:1-Math.cos(e*pl)}function Yv(e){return Math.sin(e*pl)}function Qv(e){return(1-Math.cos(dl*e))/2}function Ke(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function Kv(e){return Ke(1-+e)}function Jv(e){return 1-Ke(e)}function ty(e){return((e*=2)<=1?Ke(1-e):2-Ke(e-1))/2}function ey(e){return 1-Math.sqrt(1-e*e)}function ny(e){return Math.sqrt(1- --e*e)}function sy(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Qi=4/11,ry=6/11,iy=8/11,oy=3/4,ay=9/11,cy=10/11,uy=15/16,ly=21/22,hy=63/64,rr=1/Qi/Qi;function fy(e){return 1-Wr(1-e)}function Wr(e){return(e=+e)<Qi?rr*e*e:e<iy?rr*(e-=ry)*e+oy:e<cy?rr*(e-=ay)*e+uy:rr*(e-=ly)*e+hy}function dy(e){return((e*=2)<=1?1-Wr(1-e):Wr(e-1)+1)/2}var Uo=1.70158,py=function e(t){t=+t;function n(s){return(s=+s)*s*(t*(s-1)+s)}return n.overshoot=e,n}(Uo),my=function e(t){t=+t;function n(s){return--s*s*((s+1)*t+s)+1}return n.overshoot=e,n}(Uo),gy=function e(t){t=+t;function n(s){return((s*=2)<1?s*s*((t+1)*s-t):(s-=2)*s*((t+1)*s+t)+2)/2}return n.overshoot=e,n}(Uo),jn=2*Math.PI,jo=1,Ho=.3,_y=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=jn);function r(i){return t*Ke(- --i)*Math.sin((s-i)/n)}return r.amplitude=function(i){return e(i,n*jn)},r.period=function(i){return e(t,i)},r}(jo,Ho),Ua=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=jn);function r(i){return 1-t*Ke(i=+i)*Math.sin((i+s)/n)}return r.amplitude=function(i){return e(i,n*jn)},r.period=function(i){return e(t,i)},r}(jo,Ho),vy=function e(t,n){var s=Math.asin(1/(t=Math.max(1,t)))*(n/=jn);function r(i){return((i=i*2-1)<0?t*Ke(-i)*Math.sin((s-i)/n):2-t*Ke(i)*Math.sin((s+i)/n))/2}return r.amplitude=function(i){return e(i,n*jn)},r.period=function(i){return e(t,i)},r}(jo,Ho),Ki={time:null,delay:0,duration:250,ease:fl};function yy(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Ki.time=fi(),Ki;return n}function wy(e){var t,n;e instanceof $e?(t=e._id,e=e._name):(t=hl(),(n=Ki).time=fi(),e=e==null?null:e+"");for(var s=this._groups,r=s.length,i=0;i<r;++i)for(var o=s[i],a=o.length,c,u=0;u<a;++u)(c=o[u])&&di(c,e,t,u,o,n||yy(c,t));return new $e(s,this._parents,e,t)}Hs.prototype.interrupt=z1;Hs.prototype.transition=wy;var Ji=Math.PI,to=2*Ji,an=1e-6,by=to-an;function eo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Go(){return new eo}eo.prototype=Go.prototype={constructor:eo,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,s){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(e,t,n,s,r,i){this._+="C"+ +e+","+ +t+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+i)},arcTo:function(e,t,n,s,r){e=+e,t=+t,n=+n,s=+s,r=+r;var i=this._x1,o=this._y1,a=n-e,c=s-t,u=i-e,l=o-t,h=u*u+l*l;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>an)if(!(Math.abs(l*a-c*u)>an)||!r)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var f=n-i,d=s-o,p=a*a+c*c,m=f*f+d*d,g=Math.sqrt(p),_=Math.sqrt(h),w=r*Math.tan((Ji-Math.acos((p+h-m)/(2*g*_)))/2),y=w/_,T=w/g;Math.abs(y-1)>an&&(this._+="L"+(e+y*u)+","+(t+y*l)),this._+="A"+r+","+r+",0,0,"+ +(l*f>u*d)+","+(this._x1=e+T*a)+","+(this._y1=t+T*c)}},arc:function(e,t,n,s,r,i){e=+e,t=+t,n=+n,i=!!i;var o=n*Math.cos(s),a=n*Math.sin(s),c=e+o,u=t+a,l=1^i,h=i?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>an||Math.abs(this._y1-u)>an)&&(this._+="L"+c+","+u),n&&(h<0&&(h=h%to+to),h>by?this._+="A"+n+","+n+",0,1,"+l+","+(e-o)+","+(t-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):h>an&&(this._+="A"+n+","+n+",0,"+ +(h>=Ji)+","+l+","+(this._x1=e+n*Math.cos(r))+","+(this._y1=t+n*Math.sin(r))))},rect:function(e,t,n,s){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};var ue="$";function Br(){}Br.prototype=ml.prototype={constructor:Br,has:function(e){return ue+e in this},get:function(e){return this[ue+e]},set:function(e,t){return this[ue+e]=t,this},remove:function(e){var t=ue+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ue&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ue&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ue&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ue&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ue&&++e;return e},empty:function(){for(var e in this)if(e[0]===ue)return!1;return!0},each:function(e){for(var t in this)t[0]===ue&&e(this[t],t.slice(1),this)}};function ml(e,t){var n=new Br;if(e instanceof Br)e.each(function(a,c){n.set(c,a)});else if(Array.isArray(e)){var s=-1,r=e.length,i;if(t==null)for(;++s<r;)n.set(s,e[s]);else for(;++s<r;)n.set(t(i=e[s],s,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}function ja(){}var rn=ml.prototype;ja.prototype={constructor:ja,has:rn.has,add:function(e){return e+="",this[ue+e]=e,this},remove:rn.remove,clear:rn.clear,values:rn.keys,size:rn.size,empty:rn.empty,each:rn.each};function xy(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Hn(e){return e=zr(Math.abs(e)),e?e[1]:NaN}function Ty(e,t){return function(n,s){for(var r=n.length,i=[],o=0,a=e[0],c=0;r>0&&a>0&&(c+a+1>s&&(a=Math.max(1,s-c)),i.push(n.substring(r-=a,r+a)),!((c+=a+1)>s));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Cy(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ky=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ur(e){if(!(t=ky.exec(e)))throw new Error("invalid format: "+e);var t;return new Xo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ur.prototype=Xo.prototype;function Xo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sy(e){t:for(var t=e.length,n=1,s=-1,r;n<t;++n)switch(e[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+e[n])break t;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var gl;function Ay(e,t){var n=zr(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(gl=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+zr(e,Math.max(0,t+i-1))[0]}function Ha(e,t){var n=zr(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const Ga={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:xy,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Ha(e*100,t)},r:Ha,s:Ay,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Xa(e){return e}var Za=Array.prototype.map,Ya=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ny(e){var t=e.grouping===void 0||e.thousands===void 0?Xa:Ty(Za.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Xa:Cy(Za.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"-":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Ur(h);var f=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,_=h.width,w=h.comma,y=h.precision,T=h.trim,v=h.type;v==="n"?(w=!0,v="g"):Ga[v]||(y===void 0&&(y=12),T=!0,v="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var b=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",C=m==="$"?s:/[%p]/.test(v)?o:"",S=Ga[v],M=/[defgprs%]/.test(v);y=y===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function N(A){var x=b,I=C,O,q,V;if(v==="c")I=S(A)+I,A="";else{A=+A;var D=A<0||1/A<0;if(A=isNaN(A)?c:S(Math.abs(A),y),T&&(A=Sy(A)),D&&+A==0&&p!=="+"&&(D=!1),x=(D?p==="("?p:a:p==="-"||p==="("?"":p)+x,I=(v==="s"?Ya[8+gl/3]:"")+I+(D&&p==="("?")":""),M){for(O=-1,q=A.length;++O<q;)if(V=A.charCodeAt(O),48>V||V>57){I=(V===46?r+A.slice(O+1):A.slice(O))+I,A=A.slice(0,O);break}}}w&&!g&&(A=t(A,1/0));var W=x.length+A.length+I.length,P=W<_?new Array(_-W+1).join(f):"";switch(w&&g&&(A=t(P+A,P.length?_-I.length:1/0),P=""),d){case"<":A=x+A+I+P;break;case"=":A=x+P+A+I;break;case"^":A=P.slice(0,W=P.length>>1)+x+A+I+P.slice(W);break;default:A=P+x+A+I;break}return i(A)}return N.toString=function(){return h+""},N}function l(h,f){var d=u((h=Ur(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Hn(f)/3)))*3,m=Math.pow(10,-p),g=Ya[8+p/3];return function(_){return d(m*_)+g}}return{format:u,formatPrefix:l}}var ir,pi,_l;My({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function My(e){return ir=Ny(e),pi=ir.format,_l=ir.formatPrefix,ir}function Iy(e){return Math.max(0,-Hn(Math.abs(e)))}function Ey(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hn(t)/3)))*3-Hn(Math.abs(e)))}function Oy(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hn(t)-Hn(e))+1}function Jn(){return Math.random()}(function e(t){function n(s,r){return s=s==null?0:+s,r=r==null?1:+r,arguments.length===1?(r=s,s=0):r-=s,function(){return t()*r+s}}return n.source=e,n})(Jn);const Dy=function e(t){function n(s,r){var i,o;return s=s==null?0:+s,r=r==null?1:+r,function(){var a;if(i!=null)a=i,i=null;else do i=t()*2-1,a=t()*2-1,o=i*i+a*a;while(!o||o>1);return s+r*a*Math.sqrt(-2*Math.log(o)/o)}}return n.source=e,n}(Jn);(function e(t){function n(){var s=Dy.source(t).apply(this,arguments);return function(){return Math.exp(s())}}return n.source=e,n})(Jn);const Ry=function e(t){function n(s){return function(){for(var r=0,i=0;i<s;++i)r+=t();return r}}return n.source=e,n}(Jn);(function e(t){function n(s){var r=Ry.source(t)(s);return function(){return r()/s}}return n.source=e,n})(Jn);(function e(t){function n(s){return function(){return-Math.log(1-t())/s}}return n.source=e,n})(Jn);function vl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var yl=Array.prototype,Vy=yl.map,no=yl.slice;function Py(e){return function(){return e}}function Fy(e){return+e}var Qa=[0,1];function Nn(e){return e}function so(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Py(isNaN(t)?NaN:.5)}function Ka(e){var t=e[0],n=e[e.length-1],s;return t>n&&(s=t,t=n,n=s),function(r){return Math.max(t,Math.min(n,r))}}function Ly(e,t,n){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=so(r,s),i=n(o,i)):(s=so(s,r),i=n(i,o)),function(a){return i(s(a))}}function qy(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=so(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(a){var c=Fu(e,a,1,s)-1;return i[c](r[c](a))}}function $y(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wy(){var e=Qa,t=Qa,n=$o,s,r,i,o=Nn,a,c,u;function l(){return a=Math.min(e.length,t.length)>2?qy:Ly,c=u=null,h}function h(f){return isNaN(f=+f)?i:(c||(c=a(e.map(s),t,n)))(s(o(f)))}return h.invert=function(f){return o(r((u||(u=a(t,e.map(s),_e)))(f)))},h.domain=function(f){return arguments.length?(e=Vy.call(f,Fy),o===Nn||(o=Ka(e)),l()):e.slice()},h.range=function(f){return arguments.length?(t=no.call(f),l()):t.slice()},h.rangeRound=function(f){return t=no.call(f),n=N1,l()},h.clamp=function(f){return arguments.length?(o=f?Ka(e):Nn,h):o!==Nn},h.interpolate=function(f){return arguments.length?(n=f,l()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,d){return s=f,r=d,l()}}function By(e,t){return Wy()(e,t)}function zy(e,t,n,s){var r=$_(e,t,n),i;switch(s=Ur(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Ey(r,o))&&(s.precision=i),_l(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Oy(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Iy(r))&&(s.precision=i-(s.type==="%")*2);break}}return pi(s)}function wl(e){var t=e.domain;return e.ticks=function(n){var s=t();return q_(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var r=t();return zy(r[0],r[r.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),r=0,i=s.length-1,o=s[r],a=s[i],c;return a<o&&(c=o,o=a,a=c,c=r,r=i,i=c),c=ur(o,a,n),c>0?(o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c,c=ur(o,a,n)):c<0&&(o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c,c=ur(o,a,n)),c>0?(s[r]=Math.floor(o/c)*c,s[i]=Math.ceil(a/c)*c,t(s)):c<0&&(s[r]=Math.ceil(o*c)/c,s[i]=Math.floor(a*c)/c,t(s)),e},e}function bl(){var e=By(Nn,Nn);return e.copy=function(){return $y(e,bl())},vl.apply(e,arguments),wl(e)}function xl(){var e=0,t=1,n=1,s=[.5],r=[0,1],i;function o(c){return c<=c?r[Fu(s,c,0,n)]:i}function a(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?(e=+c[0],t=+c[1],a()):[e,t]},o.range=function(c){return arguments.length?(n=(r=no.call(c)).length-1,a()):r.slice()},o.invertExtent=function(c){var u=r.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=n?[s[n-1],t]:[s[u-1],s[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return xl().domain([e,t]).range(r).unknown(i)},vl.apply(wl(o),arguments)}function le(e){return function(){return e}}var Ja=Math.abs,zt=Math.atan2,on=Math.cos,Uy=Math.max,Ci=Math.min,Se=Math.sin,Mn=Math.sqrt,Qt=1e-12,Ds=Math.PI,jr=Ds/2,jy=2*Ds;function Hy(e){return e>1?0:e<-1?Ds:Math.acos(e)}function tc(e){return e>=1?jr:e<=-1?-jr:Math.asin(e)}function Gy(e){return e.innerRadius}function Xy(e){return e.outerRadius}function Zy(e){return e.startAngle}function Yy(e){return e.endAngle}function Qy(e){return e&&e.padAngle}function Ky(e,t,n,s,r,i,o,a){var c=n-e,u=s-t,l=o-r,h=a-i,f=h*c-l*u;if(!(f*f<Qt))return f=(l*(t-i)-h*(e-r))/f,[e+f*c,t+f*u]}function or(e,t,n,s,r,i,o){var a=e-n,c=t-s,u=(o?i:-i)/Mn(a*a+c*c),l=u*c,h=-u*a,f=e+l,d=t+h,p=n+l,m=s+h,g=(f+p)/2,_=(d+m)/2,w=p-f,y=m-d,T=w*w+y*y,v=r-i,b=f*m-p*d,C=(y<0?-1:1)*Mn(Uy(0,v*v*T-b*b)),S=(b*y-w*C)/T,M=(-b*w-y*C)/T,N=(b*y+w*C)/T,A=(-b*w+y*C)/T,x=S-g,I=M-_,O=N-g,q=A-_;return x*x+I*I>O*O+q*q&&(S=N,M=A),{cx:S,cy:M,x01:-l,y01:-h,x11:S*(r/v-1),y11:M*(r/v-1)}}function Jy(){var e=Gy,t=Xy,n=le(0),s=null,r=Zy,i=Yy,o=Qy,a=null;function c(){var u,l,h=+e.apply(this,arguments),f=+t.apply(this,arguments),d=r.apply(this,arguments)-jr,p=i.apply(this,arguments)-jr,m=Ja(p-d),g=p>d;if(a||(a=u=Go()),f<h&&(l=f,f=h,h=l),!(f>Qt))a.moveTo(0,0);else if(m>jy-Qt)a.moveTo(f*on(d),f*Se(d)),a.arc(0,0,f,d,p,!g),h>Qt&&(a.moveTo(h*on(p),h*Se(p)),a.arc(0,0,h,p,d,g));else{var _=d,w=p,y=d,T=p,v=m,b=m,C=o.apply(this,arguments)/2,S=C>Qt&&(s?+s.apply(this,arguments):Mn(h*h+f*f)),M=Ci(Ja(f-h)/2,+n.apply(this,arguments)),N=M,A=M,x,I;if(S>Qt){var O=tc(S/h*Se(C)),q=tc(S/f*Se(C));(v-=O*2)>Qt?(O*=g?1:-1,y+=O,T-=O):(v=0,y=T=(d+p)/2),(b-=q*2)>Qt?(q*=g?1:-1,_+=q,w-=q):(b=0,_=w=(d+p)/2)}var V=f*on(_),D=f*Se(_),W=h*on(T),P=h*Se(T);if(M>Qt){var B=f*on(w),U=f*Se(w),st=h*on(y),Z=h*Se(y),j;if(m<Ds&&(j=Ky(V,D,st,Z,B,U,W,P))){var X=V-j[0],et=D-j[1],it=B-j[0],z=U-j[1],Wt=1/Se(Hy((X*it+et*z)/(Mn(X*X+et*et)*Mn(it*it+z*z)))/2),Bt=Mn(j[0]*j[0]+j[1]*j[1]);N=Ci(M,(h-Bt)/(Wt-1)),A=Ci(M,(f-Bt)/(Wt+1))}}b>Qt?A>Qt?(x=or(st,Z,V,D,f,A,g),I=or(B,U,W,P,f,A,g),a.moveTo(x.cx+x.x01,x.cy+x.y01),A<M?a.arc(x.cx,x.cy,A,zt(x.y01,x.x01),zt(I.y01,I.x01),!g):(a.arc(x.cx,x.cy,A,zt(x.y01,x.x01),zt(x.y11,x.x11),!g),a.arc(0,0,f,zt(x.cy+x.y11,x.cx+x.x11),zt(I.cy+I.y11,I.cx+I.x11),!g),a.arc(I.cx,I.cy,A,zt(I.y11,I.x11),zt(I.y01,I.x01),!g))):(a.moveTo(V,D),a.arc(0,0,f,_,w,!g)):a.moveTo(V,D),!(h>Qt)||!(v>Qt)?a.lineTo(W,P):N>Qt?(x=or(W,P,B,U,h,-N,g),I=or(V,D,st,Z,h,-N,g),a.lineTo(x.cx+x.x01,x.cy+x.y01),N<M?a.arc(x.cx,x.cy,N,zt(x.y01,x.x01),zt(I.y01,I.x01),!g):(a.arc(x.cx,x.cy,N,zt(x.y01,x.x01),zt(x.y11,x.x11),!g),a.arc(0,0,h,zt(x.cy+x.y11,x.cx+x.x11),zt(I.cy+I.y11,I.cx+I.x11),g),a.arc(I.cx,I.cy,N,zt(I.y11,I.x11),zt(I.y01,I.x01),!g))):a.arc(0,0,h,T,y,g)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,l=(+r.apply(this,arguments)+ +i.apply(this,arguments))/2-Ds/2;return[on(l)*u,Se(l)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:le(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:le(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:le(+u),c):n},c.padRadius=function(u){return arguments.length?(s=u==null?null:typeof u=="function"?u:le(+u),c):s},c.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:le(+u),c):r},c.endAngle=function(u){return arguments.length?(i=typeof u=="function"?u:le(+u),c):i},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:le(+u),c):o},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function Tl(e){this._context=e}Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tw(e){return new Tl(e)}function ew(e){return e[0]}function nw(e){return e[1]}function sw(){var e=ew,t=nw,n=le(!0),s=null,r=tw,i=null;function o(a){var c,u=a.length,l,h=!1,f;for(s==null&&(i=r(f=Go())),c=0;c<=u;++c)!(c<u&&n(l=a[c],c,a))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(l,c,a),+t(l,c,a));if(f)return i=null,f+""||null}return o.x=function(a){return arguments.length?(e=typeof a=="function"?a:le(+a),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:le(+a),o):t},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:le(!!a),o):n},o.curve=function(a){return arguments.length?(r=a,s!=null&&(i=r(s)),o):r},o.context=function(a){return arguments.length?(a==null?s=i=null:i=r(s=a),o):s},o}function ec(e){return e<0?-1:1}function nc(e,t,n){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(n-e._y1)/(r||s<0&&-0),a=(i*r+o*s)/(s+r);return(ec(i)+ec(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(a))||0}function sc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ki(e,t,n){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,a=(i-s)/3;e._context.bezierCurveTo(s+a,r+a*t,i-a,o-a*n,i,o)}function Hr(e){this._context=e}Hr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ki(this,this._t0,sc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ki(this,sc(this,n=nc(this,e,t)),n);break;default:ki(this,this._t0,n=nc(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(Hr.prototype).point=function(e,t){Hr.prototype.point.call(this,t,e)};function rw(e){return new Hr(e)}function Gr(){this._=null}function mi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Gr.prototype={constructor:Gr,insert:function(e,t){var n,s,r;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=rc(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)s=n.U,n===s.L?(r=s.R,r&&r.C?(n.C=r.C=!1,s.C=!0,e=s):(e===n.R&&(ss(this,n),e=n,n=e.U),n.C=!1,s.C=!0,rs(this,s))):(r=s.L,r&&r.C?(n.C=r.C=!1,s.C=!0,e=s):(e===n.L&&(rs(this,n),e=n,n=e.U),n.C=!1,s.C=!0,ss(this,s))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,s=e.L,r=e.R,i,o;if(s?r?i=rc(r):i=s:i=r,t?t.L===e?t.L=i:t.R=i:this._=i,s&&r?(o=i.C,i.C=e.C,i.L=s,s.U=i,i!==r?(t=i.U,i.U=e.U,e=i.R,t.L=e,i.R=r,r.U=i):(i.U=t,t=i,e=i.R)):(o=e.C,e=i),e&&(e.U=t),!o){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,ss(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,rs(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,ss(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,rs(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,ss(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,rs(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function ss(e,t){var n=t,s=t.R,r=n.U;r?r.L===n?r.L=s:r.R=s:e._=s,s.U=r,n.U=s,n.R=s.L,n.R&&(n.R.U=n),s.L=n}function rs(e,t){var n=t,s=t.L,r=n.U;r?r.L===n?r.L=s:r.R=s:e._=s,s.U=r,n.U=s,n.L=s.R,n.L&&(n.L.U=n),s.R=n}function rc(e){for(;e.L;)e=e.L;return e}function us(e,t,n,s){var r=[null,null],i=Ut.push(r)-1;return r.left=e,r.right=t,n&&Xr(r,e,t,n),s&&Xr(r,t,e,s),se[e.index].halfedges.push(i),se[t.index].halfedges.push(i),r}function is(e,t,n){var s=[t,n];return s.left=e,s}function Xr(e,t,n,s){!e[0]&&!e[1]?(e[0]=s,e.left=t,e.right=n):e.left===n?e[1]=s:e[0]=s}function iw(e,t,n,s,r){var i=e[0],o=e[1],a=i[0],c=i[1],u=o[0],l=o[1],h=0,f=1,d=u-a,p=l-c,m;if(m=t-a,!(!d&&m>0)){if(m/=d,d<0){if(m<h)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>h&&(h=m)}if(m=s-a,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>h&&(h=m)}else if(d>0){if(m<h)return;m<f&&(f=m)}if(m=n-c,!(!p&&m>0)){if(m/=p,p<0){if(m<h)return;m<f&&(f=m)}else if(p>0){if(m>f)return;m>h&&(h=m)}if(m=r-c,!(!p&&m<0)){if(m/=p,p<0){if(m>f)return;m>h&&(h=m)}else if(p>0){if(m<h)return;m<f&&(f=m)}return!(h>0)&&!(f<1)||(h>0&&(e[0]=[a+h*d,c+h*p]),f<1&&(e[1]=[a+f*d,c+f*p])),!0}}}}}function ow(e,t,n,s,r){var i=e[1];if(i)return!0;var o=e[0],a=e.left,c=e.right,u=a[0],l=a[1],h=c[0],f=c[1],d=(u+h)/2,p=(l+f)/2,m,g;if(f===l){if(d<t||d>=s)return;if(u>h){if(!o)o=[d,n];else if(o[1]>=r)return;i=[d,r]}else{if(!o)o=[d,r];else if(o[1]<n)return;i=[d,n]}}else if(m=(u-h)/(f-l),g=p-m*d,m<-1||m>1)if(u>h){if(!o)o=[(n-g)/m,n];else if(o[1]>=r)return;i=[(r-g)/m,r]}else{if(!o)o=[(r-g)/m,r];else if(o[1]<n)return;i=[(n-g)/m,n]}else if(l<f){if(!o)o=[t,m*t+g];else if(o[0]>=s)return;i=[s,m*s+g]}else{if(!o)o=[s,m*s+g];else if(o[0]<t)return;i=[t,m*t+g]}return e[0]=o,e[1]=i,!0}function aw(e,t,n,s){for(var r=Ut.length,i;r--;)(!ow(i=Ut[r],e,t,n,s)||!iw(i,e,t,n,s)||!(Math.abs(i[0][0]-i[1][0])>mt||Math.abs(i[0][1]-i[1][1])>mt))&&delete Ut[r]}function cw(e){return se[e.index]={site:e,halfedges:[]}}function uw(e,t){var n=e.site,s=t.left,r=t.right;return n===r&&(r=s,s=n),r?Math.atan2(r[1]-s[1],r[0]-s[0]):(n===s?(s=t[1],r=t[0]):(s=t[0],r=t[1]),Math.atan2(s[0]-r[0],r[1]-s[1]))}function Cl(e,t){return t[+(t.left!==e.site)]}function lw(e,t){return t[+(t.left===e.site)]}function hw(){for(var e=0,t=se.length,n,s,r,i;e<t;++e)if((n=se[e])&&(i=(s=n.halfedges).length)){var o=new Array(i),a=new Array(i);for(r=0;r<i;++r)o[r]=r,a[r]=uw(n,Ut[s[r]]);for(o.sort(function(c,u){return a[u]-a[c]}),r=0;r<i;++r)a[r]=s[o[r]];for(r=0;r<i;++r)s[r]=a[r]}}function fw(e,t,n,s){var r=se.length,i,o,a,c,u,l,h,f,d,p,m,g,_=!0;for(i=0;i<r;++i)if(o=se[i]){for(a=o.site,u=o.halfedges,c=u.length;c--;)Ut[u[c]]||u.splice(c,1);for(c=0,l=u.length;c<l;)p=lw(o,Ut[u[c]]),m=p[0],g=p[1],h=Cl(o,Ut[u[++c%l]]),f=h[0],d=h[1],(Math.abs(m-f)>mt||Math.abs(g-d)>mt)&&(u.splice(c,0,Ut.push(is(a,p,Math.abs(m-e)<mt&&s-g>mt?[e,Math.abs(f-e)<mt?d:s]:Math.abs(g-s)<mt&&n-m>mt?[Math.abs(d-s)<mt?f:n,s]:Math.abs(m-n)<mt&&g-t>mt?[n,Math.abs(f-n)<mt?d:t]:Math.abs(g-t)<mt&&m-e>mt?[Math.abs(d-t)<mt?f:e,t]:null))-1),++l);l&&(_=!1)}if(_){var w,y,T,v=1/0;for(i=0,_=null;i<r;++i)(o=se[i])&&(a=o.site,w=a[0]-e,y=a[1]-t,T=w*w+y*y,T<v&&(v=T,_=o));if(_){var b=[e,t],C=[e,s],S=[n,s],M=[n,t];_.halfedges.push(Ut.push(is(a=_.site,b,C))-1,Ut.push(is(a,C,S))-1,Ut.push(is(a,S,M))-1,Ut.push(is(a,M,b))-1)}}for(i=0;i<r;++i)(o=se[i])&&(o.halfedges.length||delete se[i])}var kl=[],Zo;function dw(){mi(this),this.x=this.y=this.arc=this.site=this.cy=null}function In(e){var t=e.P,n=e.N;if(!(!t||!n)){var s=t.site,r=e.site,i=n.site;if(s!==i){var o=r[0],a=r[1],c=s[0]-o,u=s[1]-a,l=i[0]-o,h=i[1]-a,f=2*(c*h-u*l);if(!(f>=-vw)){var d=c*c+u*u,p=l*l+h*h,m=(h*d-u*p)/f,g=(c*p-l*d)/f,_=kl.pop()||new dw;_.arc=e,_.site=r,_.x=m+o,_.y=(_.cy=g+a)+Math.sqrt(m*m+g*g),e.circle=_;for(var w=null,y=Rs._;y;)if(_.y<y.y||_.y===y.y&&_.x<=y.x)if(y.L)y=y.L;else{w=y.P;break}else if(y.R)y=y.R;else{w=y;break}Rs.insert(w,_),w||(Zo=_)}}}}function Pn(e){var t=e.circle;t&&(t.P||(Zo=t.N),Rs.remove(t),kl.push(t),mi(t),e.circle=null)}var Sl=[];function pw(){mi(this),this.edge=this.site=this.circle=null}function ic(e){var t=Sl.pop()||new pw;return t.site=e,t}function Si(e){Pn(e),Fn.remove(e),Sl.push(e),mi(e)}function mw(e){var t=e.circle,n=t.x,s=t.cy,r=[n,s],i=e.P,o=e.N,a=[e];Si(e);for(var c=i;c.circle&&Math.abs(n-c.circle.x)<mt&&Math.abs(s-c.circle.cy)<mt;)i=c.P,a.unshift(c),Si(c),c=i;a.unshift(c),Pn(c);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<mt&&Math.abs(s-u.circle.cy)<mt;)o=u.N,a.push(u),Si(u),u=o;a.push(u),Pn(u);var l=a.length,h;for(h=1;h<l;++h)u=a[h],c=a[h-1],Xr(u.edge,c.site,u.site,r);c=a[0],u=a[l-1],u.edge=us(c.site,u.site,null,r),In(c),In(u)}function gw(e){for(var t=e[0],n=e[1],s,r,i,o,a=Fn._;a;)if(i=Al(a,n)-t,i>mt)a=a.L;else if(o=t-_w(a,n),o>mt){if(!a.R){s=a;break}a=a.R}else{i>-mt?(s=a.P,r=a):o>-mt?(s=a,r=a.N):s=r=a;break}cw(e);var c=ic(e);if(Fn.insert(s,c),!(!s&&!r)){if(s===r){Pn(s),r=ic(s.site),Fn.insert(c,r),c.edge=r.edge=us(s.site,c.site),In(s),In(r);return}if(!r){c.edge=us(s.site,c.site);return}Pn(s),Pn(r);var u=s.site,l=u[0],h=u[1],f=e[0]-l,d=e[1]-h,p=r.site,m=p[0]-l,g=p[1]-h,_=2*(f*g-d*m),w=f*f+d*d,y=m*m+g*g,T=[(g*w-d*y)/_+l,(f*y-m*w)/_+h];Xr(r.edge,u,p,T),c.edge=us(u,e,null,T),r.edge=us(e,p,null,T),In(s),In(r)}}function Al(e,t){var n=e.site,s=n[0],r=n[1],i=r-t;if(!i)return s;var o=e.P;if(!o)return-1/0;n=o.site;var a=n[0],c=n[1],u=c-t;if(!u)return a;var l=a-s,h=1/i-1/u,f=l/u;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*u)-c+u/2+r-i/2)))/h+s:(s+a)/2}function _w(e,t){var n=e.N;if(n)return Al(n,t);var s=e.site;return s[1]===t?s[0]:1/0}var mt=1e-6,vw=1e-12,Fn,se,Rs,Ut;function yw(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function ww(e,t){return t[1]-e[1]||t[0]-e[0]}function oc(e,t){var n=e.sort(ww).pop(),s,r,i;for(Ut=[],se=new Array(e.length),Fn=new Gr,Rs=new Gr;;)if(i=Zo,n&&(!i||n[1]<i.y||n[1]===i.y&&n[0]<i.x))(n[0]!==s||n[1]!==r)&&(gw(n),s=n[0],r=n[1]),n=e.pop();else if(i)mw(i.arc);else break;if(hw(),t){var o=+t[0][0],a=+t[0][1],c=+t[1][0],u=+t[1][1];aw(o,a,c,u),fw(o,a,c,u)}this.edges=Ut,this.cells=se,Fn=Rs=Ut=se=null}oc.prototype={constructor:oc,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(s){return Cl(t,e[s])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,s){if(a=(i=n.halfedges).length)for(var r=n.site,i,o=-1,a,c,u=t[i[a-1]],l=u.left===r?u.right:u.left;++o<a;)c=l,u=t[i[o]],l=u.left===r?u.right:u.left,c&&l&&s<c.index&&s<l.index&&yw(r,c,l)<0&&e.push([r.data,c.data,l.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var s=this,r,i=s._found||0,o=s.cells.length,a;!(a=s.cells[i]);)if(++i>=o)return null;var c=e-a.site[0],u=t-a.site[1],l=c*c+u*u;do a=s.cells[r=i],i=null,a.halfedges.forEach(function(h){var f=s.edges[h],d=f.left;if(!((d===a.site||!d)&&!(d=f.right))){var p=e-d[0],m=t-d[1],g=p*p+m*m;g<l&&(l=g,i=d.index)}});while(i!==null);return s._found=r,n==null||l<=n*n?a.site:null}};function En(e,t,n){this.k=e,this.x=t,this.y=n}En.prototype={constructor:En,scale:function(e){return e===1?this:new En(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new En(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new En(1,0,0);En.prototype;var bw=typeof global=="object"&&global&&global.Object===Object&&global;const Nl=bw;var xw=typeof self=="object"&&self&&self.Object===Object&&self,Tw=Nl||xw||Function("return this")();const sn=Tw;var Cw=sn.Symbol;const Zr=Cw;var Ml=Object.prototype,kw=Ml.hasOwnProperty,Sw=Ml.toString,os=Zr?Zr.toStringTag:void 0;function Aw(e){var t=kw.call(e,os),n=e[os];try{e[os]=void 0;var s=!0}catch{}var r=Sw.call(e);return s&&(t?e[os]=n:delete e[os]),r}var Nw=Object.prototype,Mw=Nw.toString;function Iw(e){return Mw.call(e)}var Ew="[object Null]",Ow="[object Undefined]",ac=Zr?Zr.toStringTag:void 0;function Tn(e){return e==null?e===void 0?Ow:Ew:ac&&ac in Object(e)?Aw(e):Iw(e)}function Xs(e){return e!=null&&typeof e=="object"}var Dw="[object Number]";function Rw(e){return typeof e=="number"||Xs(e)&&Tn(e)==Dw}function Vw(e,t){for(var n,s=-1,r=e.length;++s<r;){var i=t(e[s]);i!==void 0&&(n=n===void 0?i:n+i)}return n}function Il(e){return e}function Pw(e){return e&&e.length?Vw(e,Il):0}var Fw=Object.prototype;function El(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fw;return e===n}function Lw(e,t){return function(n){return e(t(n))}}var qw=Lw(Object.keys,Object);const $w=qw;var Ww=Object.prototype,Bw=Ww.hasOwnProperty;function zw(e){if(!El(e))return $w(e);var t=[];for(var n in Object(e))Bw.call(e,n)&&n!="constructor"&&t.push(n);return t}function Yr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Uw="[object AsyncFunction]",jw="[object Function]",Hw="[object GeneratorFunction]",Gw="[object Proxy]";function Ol(e){if(!Yr(e))return!1;var t=Tn(e);return t==jw||t==Hw||t==Uw||t==Gw}var Xw=sn["__core-js_shared__"];const Ai=Xw;var cc=function(){var e=/[^.]+$/.exec(Ai&&Ai.keys&&Ai.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Zw(e){return!!cc&&cc in e}var Yw=Function.prototype,Qw=Yw.toString;function Cn(e){if(e!=null){try{return Qw.call(e)}catch{}try{return e+""}catch{}}return""}var Kw=/[\\^$.*+?()[\]{}|]/g,Jw=/^\[object .+?Constructor\]$/,t2=Function.prototype,e2=Object.prototype,n2=t2.toString,s2=e2.hasOwnProperty,r2=RegExp("^"+n2.call(s2).replace(Kw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i2(e){if(!Yr(e)||Zw(e))return!1;var t=Ol(e)?r2:Jw;return t.test(Cn(e))}function o2(e,t){return e==null?void 0:e[t]}function Zs(e,t){var n=o2(e,t);return i2(n)?n:void 0}var a2=Zs(sn,"DataView");const ro=a2;var c2=Zs(sn,"Map");const io=c2;var u2=Zs(sn,"Promise");const oo=u2;var l2=Zs(sn,"Set");const ao=l2;var h2=Zs(sn,"WeakMap");const co=h2;var uc="[object Map]",f2="[object Object]",lc="[object Promise]",hc="[object Set]",fc="[object WeakMap]",dc="[object DataView]",d2=Cn(ro),p2=Cn(io),m2=Cn(oo),g2=Cn(ao),_2=Cn(co),cn=Tn;(ro&&cn(new ro(new ArrayBuffer(1)))!=dc||io&&cn(new io)!=uc||oo&&cn(oo.resolve())!=lc||ao&&cn(new ao)!=hc||co&&cn(new co)!=fc)&&(cn=function(e){var t=Tn(e),n=t==f2?e.constructor:void 0,s=n?Cn(n):"";if(s)switch(s){case d2:return dc;case p2:return uc;case m2:return lc;case g2:return hc;case _2:return fc}return t});const v2=cn;var y2="[object Arguments]";function pc(e){return Xs(e)&&Tn(e)==y2}var Dl=Object.prototype,w2=Dl.hasOwnProperty,b2=Dl.propertyIsEnumerable,x2=pc(function(){return arguments}())?pc:function(e){return Xs(e)&&w2.call(e,"callee")&&!b2.call(e,"callee")};const T2=x2;var C2=Array.isArray;const Yo=C2;var k2=9007199254740991;function Rl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=k2}function S2(e){return e!=null&&Rl(e.length)&&!Ol(e)}function A2(){return!1}var Vl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mc=Vl&&typeof module=="object"&&module&&!module.nodeType&&module,N2=mc&&mc.exports===Vl,gc=N2?sn.Buffer:void 0,M2=gc?gc.isBuffer:void 0,I2=M2||A2;const E2=I2;var O2="[object Arguments]",D2="[object Array]",R2="[object Boolean]",V2="[object Date]",P2="[object Error]",F2="[object Function]",L2="[object Map]",q2="[object Number]",$2="[object Object]",W2="[object RegExp]",B2="[object Set]",z2="[object String]",U2="[object WeakMap]",j2="[object ArrayBuffer]",H2="[object DataView]",G2="[object Float32Array]",X2="[object Float64Array]",Z2="[object Int8Array]",Y2="[object Int16Array]",Q2="[object Int32Array]",K2="[object Uint8Array]",J2="[object Uint8ClampedArray]",tb="[object Uint16Array]",eb="[object Uint32Array]",dt={};dt[G2]=dt[X2]=dt[Z2]=dt[Y2]=dt[Q2]=dt[K2]=dt[J2]=dt[tb]=dt[eb]=!0;dt[O2]=dt[D2]=dt[j2]=dt[R2]=dt[H2]=dt[V2]=dt[P2]=dt[F2]=dt[L2]=dt[q2]=dt[$2]=dt[W2]=dt[B2]=dt[z2]=dt[U2]=!1;function nb(e){return Xs(e)&&Rl(e.length)&&!!dt[Tn(e)]}function sb(e){return function(t){return e(t)}}var Pl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fs=Pl&&typeof module=="object"&&module&&!module.nodeType&&module,rb=fs&&fs.exports===Pl,Ni=rb&&Nl.process,ib=function(){try{var e=fs&&fs.require&&fs.require("util").types;return e||Ni&&Ni.binding&&Ni.binding("util")}catch{}}();const _c=ib;var vc=_c&&_c.isTypedArray,ob=vc?sb(vc):nb;const ab=ob;var cb="[object Map]",ub="[object Set]",lb=Object.prototype,hb=lb.hasOwnProperty;function Qo(e){if(e==null)return!0;if(S2(e)&&(Yo(e)||typeof e=="string"||typeof e.splice=="function"||E2(e)||ab(e)||T2(e)))return!e.length;var t=v2(e);if(t==cb||t==ub)return!e.size;if(El(e))return!zw(e).length;for(var n in e)if(hb.call(e,n))return!1;return!0}function fb(e){return e&&e.length?e[0]:void 0}function Fl(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Ll(e,t,n){var s=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++s<r;)i[s]=e[s+t];return i}var db=/\s/;function pb(e){for(var t=e.length;t--&&db.test(e.charAt(t)););return t}var mb=/^\s+/;function gb(e){return e&&e.slice(0,pb(e)+1).replace(mb,"")}var _b="[object Symbol]";function vb(e){return typeof e=="symbol"||Xs(e)&&Tn(e)==_b}var yc=0/0,yb=/^[-+]0x[0-9a-f]+$/i,wb=/^0b[01]+$/i,bb=/^0o[0-7]+$/i,xb=parseInt;function Tb(e){if(typeof e=="number")return e;if(vb(e))return yc;if(Yr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Yr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gb(e);var n=wb.test(e);return n||bb.test(e)?xb(e.slice(2),n?2:8):yb.test(e)?yc:+e}var wc=1/0,Cb=17976931348623157e292;function kb(e){if(!e)return e===0?e:0;if(e=Tb(e),e===wc||e===-wc){var t=e<0?-1:1;return t*Cb}return e===e?e:0}function Ko(e){var t=kb(e),n=t%1;return t===t?n?t-n:t:0}function Sb(e,t,n){var s=e==null?0:e.length;return s?(t=n||t===void 0?1:Ko(t),Ll(e,t<0?0:t,s)):[]}function Ab(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}function Nb(e){return typeof e=="function"?e:Il}var Mb=9007199254740991,Mi=4294967295,Ib=Math.min;function Eb(e,t){if(e=Ko(e),e<1||e>Mb)return[];var n=Mi,s=Ib(e,Mi);t=Nb(t),e-=Mi;for(var r=Ab(s,t);++n<e;)t(n);return r}function Ob(e,t,n){return e&&e.length?(t=n||t===void 0?1:Ko(t),Ll(e,0,t<0?0:t)):[]}function Qr(e,t){return Pw(Ob(e,t))}function Db({tickData:e,customSegmentStops:t,min:n,max:s}){if(!Yo(t)||Qo(t))return e;if(fb(t)!==n)throw new Error(`First value should be equivalent to min value given. Current min value - ${n}`);if(Fl(t)!==s)throw new Error(`Last value should be equivalent to max value given. Current min value - ${s}`);const r=t.map((i,o)=>{if(o!==0)return(i-t[o-1])/(s-n)});return Sb(r)}function Rb({heightRatio:e,radius:t}){if(e<0||e>1)throw new Error(`Invalid needleHeightRatio given - ${e}`);return Math.round(t*e)}function Vb({maxSegmentLabelCount:e,segmentCount:t}){const n=parseInt(e,10),s=parseInt(t,10);return Rw(n)&&n>=0&&n<=s?n:s}function Pb({min:e,max:t,segments:n}){return bl().range([0,1]).domain([e,t])}function Fb(e,{min:t,max:n,segments:s}){let r=[];if(r=e.ticks(s),(Fl(r)!==n||s<r.length)&&r.length>1){const o=(n-t)/s;r=[t],Eb(s,a=>{r.push(t+(a+1)*o)})}return r.length===1&&(r=[t,n]),r}function Lb(e,t){const n=t.labelFormat(e),s=t.currentValuePlaceholderStyle;return t.currentValueText.replace(s,n)}function bc(e){return e*Math.PI/180}function qb(e,t,n){return`translate(${e+t}, ${e+n})`}function $b(e){return e.width/2}const ct={easeLinear:"easeLinear",easeQuadIn:"easeQuadIn",easeQuadOut:"easeQuadOut",easeQuadInOut:"easeQuadInOut",easeCubicIn:"easeCubicIn",easeCubicOut:"easeCubicOut",easeCubicInOut:"easeCubicInOut",easePolyIn:"easePolyIn",easePolyOut:"easePolyOut",easePolyInOut:"easePolyInOut",easeSinIn:"easeSinIn",easeSinOut:"easeSinOut",easeSinInOut:"easeSinInOut",easeExpIn:"easeExpIn",easeExpOut:"easeExpOut",easeExpInOut:"easeExpInOut",easeCircleIn:"easeCircleIn",easeCircleOut:"easeCircleOut",easeCircleInOut:"easeCircleInOut",easeBounceIn:"easeBounceIn",easeBounceOut:"easeBounceOut",easeBounceInOut:"easeBounceInOut",easeBackIn:"easeBackIn",easeBackOut:"easeBackOut",easeBackInOut:"easeBackInOut",easeElasticIn:"easeElasticIn",easeElasticOut:"easeElasticOut",easeElasticInOut:"easeElasticInOut",easeElastic:"easeElastic"},xc={value:0,minValue:0,maxValue:1e3,forceRender:!1,width:300,height:300,paddingHorizontal:0,paddingVertical:0,fluidWidth:!1,dimensionUnit:"px",segments:5,maxSegmentLabels:-1,customSegmentStops:[],customSegmentLabels:[],needleColor:"steelblue",startColor:"#FF471A",endColor:"#33CC33",segmentColors:[],needleTransition:ct.easeQuadInOut,needleTransitionDuration:500,needleHeightRatio:.9,ringWidth:60,textColor:"#666",valueFormat:"",currentValueText:"${value}",currentValuePlaceholderStyle:"${value}",labelFontSize:"14px",valueTextFontSize:"16px",valueTextFontWeight:"bold"},Wb={ringInset:20,pointerWidth:10,pointerTailLength:5,minAngle:-90,maxAngle:90,labelInset:10},Bb=({PROPS:e,parentWidth:t,parentHeight:n})=>{const s={width:e.fluidWidth?t:e.width,height:e.fluidWidth?n:e.height,paddingHorizontal:e.paddingHorizontal,paddingVertical:e.paddingVertical,dimensionUnit:e.dimensionUnit,ringWidth:e.ringWidth,minValue:e.minValue,maxValue:e.maxValue,needleColor:e.needleColor,majorTicks:e.segments,customSegmentStops:e.customSegmentStops,customSegmentLabels:e.customSegmentLabels,maxSegmentLabels:Vb({maxSegmentLabelCount:e.maxSegmentLabels,segmentCount:e.segments}),segmentColors:e.segmentColors,arcColorFn:e.segmentColors.length>0?xl(e.segmentColors):R1(Es(e.startColor),Es(e.endColor)),needleTransition:e.needleTransition,needleTransitionDuration:e.needleTransitionDuration,needleHeightRatio:e.needleHeightRatio,textColor:e.textColor,labelFormat:pi(e.valueFormat),currentValueText:e.currentValueText,currentValuePlaceholderStyle:e.currentValuePlaceholderStyle,labelFontSize:e.labelFontSize,valueTextFontSize:e.valueTextFontSize,valueTextFontWeight:e.valueTextFontWeight};return Object.assign({},Wb,s)},zb=(e,t)=>({...e,...t});function Ub(e){switch(e){case ct.easeLinear:return Wv;case ct.easeQuadIn:return Bv;case ct.easeQuadOut:return zv;case ct.easeQuadInOut:return za;case ct.easeCubicIn:return Uv;case ct.easeCubicOut:return jv;case ct.easeCubicInOut:return fl;case ct.easePolyIn:return Hv;case ct.easePolyOut:return Gv;case ct.easePolyInOut:return Xv;case ct.easeSinIn:return Zv;case ct.easeSinOut:return Yv;case ct.easeSinInOut:return Qv;case ct.easeExpIn:return Kv;case ct.easeExpOut:return Jv;case ct.easeExpInOut:return ty;case ct.easeCircleIn:return ey;case ct.easeCircleOut:return ny;case ct.easeCircleInOut:return sy;case ct.easeBounceIn:return fy;case ct.easeBounceOut:return Wr;case ct.easeBounceInOut:return dy;case ct.easeBackIn:return py;case ct.easeBackOut:return my;case ct.easeBackInOut:return gy;case ct.easeElasticIn:return _y;case ct.easeElasticOut:return Ua;case ct.easeElasticInOut:return vy;case ct.easeElastic:return Ua;default:return console.warn(`Warning: Invalid needle transition '${e}'. Switching to default transition 'easeQuadInOut'`),za}}var Tc=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jb(e,t){return!!(e===t||Tc(e)&&Tc(t))}function Hb(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!jb(e[n],t[n]))return!1;return!0}function gi(e,t){t===void 0&&(t=Hb);var n,s=[],r,i=!1;function o(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return i&&n===this&&t(a,s)||(r=e.apply(this,a),i=!0,n=this,s=a),r}return o}const Jo=gi(Zb),Gb=gi(Yb),ta=gi(Qb),Xb=gi(Kb);function Zb(e){return Pb({min:e.minValue,max:e.maxValue,segments:e.maxSegmentLabels})}function Yb(e){const t=Jo(e);let n=Fb(t,{min:e.minValue,max:e.maxValue,segments:e.maxSegmentLabels});return e.customSegmentStops.length>0&&e.maxSegmentLabels!==0&&(n=e.customSegmentStops),n}function Qb(e){const t=L_(e.majorTicks).map(s=>1/e.majorTicks);return Db({tickData:t,customSegmentStops:e.customSegmentStops,min:e.minValue,max:e.maxValue})}function Kb(e){const t=ta(e),n=e.maxAngle-e.minAngle,s=e.width/2;return Jy().innerRadius(s-e.ringWidth-e.ringInset).outerRadius(s-e.ringInset).startAngle((i,o)=>{const a=Qr(t,o);return bc(e.minAngle+a*n)}).endAngle((i,o)=>{const a=Qr(t,o+1);return bc(e.minAngle+a*n)})}const Jb=({d3_refs:e,newValue:t,config:n})=>{const r=Jo(n)(t),i=n.maxAngle-n.minAngle,o=n.minAngle+r*i;e.pointer.transition().duration(n.needleTransitionDuration).ease(Ub(n.needleTransition)).attr("transform",`rotate(${o})`),e.current_value_text.text(Lb(t,n))},tx=({container:e,config:t})=>{const n=$b(t),s=qb(n,t.paddingHorizontal,t.paddingVertical),r=ex({container:e,config:t});return nx({config:t,svg:r,centerTx:s}),sx({config:t,svg:r,centerTx:s,r:n}),{current_value_text:ix({config:t,svg:r}),pointer:ox({config:t,svg:r,r:n,centerTx:s})}};function ex({container:e,config:t}){const n=t.width+2*t.paddingHorizontal,s=t.height+2*t.paddingVertical;return Ku(e).append("svg:svg").attr("class","speedometer").attr("width",`${n}${t.dimensionUnit}`).attr("height",`${s}${t.dimensionUnit}`).style("width",`${n}${t.dimensionUnit}`).style("height",`${s}${t.dimensionUnit}`)}function nx({config:e,svg:t,centerTx:n}){const s=ta(e),r=Xb(e);t.append("g").attr("class","arc").attr("transform",n).selectAll("path").data(s).enter().append("path").attr("class","speedo-segment").attr("fill",(o,a)=>!Qo(e.segmentColors)&&e.segmentColors[a]?e.segmentColors[a]:e.arcColorFn(o*a)).attr("d",r)}function sx({config:e,svg:t,centerTx:n,r:s}){const r=Gb(e),i=ta(e),o=Jo(e),a=e.maxAngle-e.minAngle,{customSegmentLabels:c}=e,u=Yo(c)&&!Qo(c),l=u&&c.length===i.length;if(u&&!l)throw new Error(`Custom Segment Labels should be an array with length of ${i.length}`);if(u&&l){rx({config:e,svg:t,centerTx:n,r:s,ticks:r,tickData:i,scale:o,range:a});return}t.append("g").attr("class","label").attr("transform",n).selectAll("text").data(r).enter().append("text").attr("transform",(f,d)=>{const p=e.customSegmentStops.length===0?o(f):Qr(i,d);return`rotate(${e.minAngle+p*a}) translate(0, ${e.labelInset-s})`}).text(e.labelFormat).attr("class","segment-value").style("text-anchor","middle").style("font-size",e.labelFontSize).style("font-weight","bold").style("fill",e.textColor)}function rx({config:e,svg:t,centerTx:n,r:s,ticks:r,tickData:i,scale:o,range:a}){const{customSegmentStops:c,customSegmentLabels:u}=e;function l(g,_){const w=c.length===0?o(g):Qr(i,_);return e.minAngle+w*a}const h=u.map((g,_)=>{const w=_,y=_+1,T=r[w],v=l(T,w),b=r[y];return(l(b,y)+v)/2}),f=s-e.ringWidth-e.ringInset,d=s-e.ringInset,p=d-(d-f)/2;t.append("g").attr("class","label").attr("transform",n).selectAll("text").data(u).enter().append("text").attr("transform",(g,_)=>{const w=h[_],y=`rotate(${w}) translate(0, ${e.labelInset-s})`,T=`rotate(${w}) translate(0, ${e.labelInset/2-p})`;return g.position==="OUTSIDE"?y:T}).text(g=>g.text||"").attr("class","segment-value").style("text-anchor","middle").style("font-size",g=>g.fontSize||e.labelFontSize).style("font-weight","bold").style("fill",g=>g.color||e.textColor)}function ix({config:e,svg:t}){const n=(e.width+2*e.paddingHorizontal)/2,s=(e.width+4*e.paddingVertical)/2;return t.append("g").attr("transform",`translate(${n}, ${s})`).append("text").attr("class","current-value").attr("text-anchor","middle").attr("y",23).text(e.currentValue).style("font-size",e.valueTextFontSize).style("font-weight",e.valueTextFontWeight).style("fill",e.textColor)}function ox({config:e,svg:t,r:n,centerTx:s}){const r=Rb({heightRatio:e.needleHeightRatio,radius:n}),i=[[e.pointerWidth/2,0],[0,-r],[-(e.pointerWidth/2),0],[0,e.pointerTailLength],[e.pointerWidth/2,0]],o=sw().curve(rw);return t.append("g").data([i]).attr("class","pointer").attr("transform",s).style("fill",e.needleColor).append("path").attr("d",o).attr("transform",`rotate(${e.minAngle})`)}function ax(e){let t;return{c(){t=H("div"),this.h()},l(n){t=G(n,"DIV",{id:!0}),F(t).forEach(E),this.h()},h(){k(t,"id","speedo-container")},m(n,s){at(n,t,s),e[2](t)},p:K,i:K,o:K,d(n){n&&E(t),e[2](null)}}}function cx(e,t,n){const s=["forceRender"];let r=ea(t,s),{forceRender:i=!1}=t,o=!1,a={},c={},u,l={pointer:!1,current_value_text:!1};function h(){c=Object.assign({},xc,r),a=Bb({PROPS:c,parentWidth:u.parentNode.clientWidth,parentHeight:u.parentNode.clientHeight}),Ku(u).select("svg").remove(),l=tx({container:u,config:a})}function f(){Jb({d3_refs:l,newValue:c.value||0,config:a})}Vs(()=>{h()}),zl(()=>{i&&h(),o?(c=Object.assign({},xc,r),a=zb(a,{labelFormat:pi(c.valueFormat||""),currentValueText:c.currentValueText||"${value}"})):o=!0,f()});function d(p){jl[p?"unshift":"push"](()=>{u=p,n(0,u)})}return e.$$set=p=>{t=na(na({},t),Ul(p)),n(9,r=ea(t,s)),"forceRender"in p&&n(1,i=p.forceRender)},[u,i,d]}class ql extends Nt{constructor(t){super(),Mt(this,t,cx,ax,It,{forceRender:1})}}function ux(e){let t,n,s,r,i,o;return r=new ql({props:{value:e[0],minValue:0,maxValue:.2,ringWidth:8,width:96,height:60,segments:4,needleColor:"#4b5563",segmentColors:["#d1d5db","#d1d5db","#f87171","#dc2626"],maxSegmentLabels:0,currentValueText:" ",needleTransition:"easePolyOut",needleTransitionDuration:300,needleHeightRatio:"0.7",paddingHortizontal:"100px"}}),{c(){t=H("div"),n=H("div"),s=H("div"),wt(r.$$.fragment),this.h()},l(a){t=G(a,"DIV",{class:!0,style:!0});var c=F(t);n=G(c,"DIV",{class:!0});var u=F(n);s=G(u,"DIV",{class:!0});var l=F(s);bt(r.$$.fragment,l),l.forEach(E),u.forEach(E),c.forEach(E),this.h()},h(){k(s,"class","meter-wrapper-inner svelte-3lhgyl"),k(n,"class","meter-wrapper-outer svelte-3lhgyl"),k(t,"class","border-4 border-gray-500 bg-amber-50 rounded-md relative"),k(t,"style",i=`
				background-color: ${e[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`)},m(a,c){at(a,t,c),L(t,n),L(n,s),xt(r,s,null),o=!0},p(a,[c]){const u={};c&1&&(u.value=a[0]),r.$set(u),(!o||c&1&&i!==(i=`
				background-color: ${a[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`))&&k(t,"style",i)},i(a){o||(tt(r.$$.fragment,a),o=!0)},o(a){nt(r.$$.fragment,a),o=!1},d(a){a&&E(t),Tt(r)}}}function lx(e,t,n){let{meterValue:s}=t;return e.$$set=r=>{"meterValue"in r&&n(0,s=r.meterValue)},[s]}class hx extends Nt{constructor(t){super(),Mt(this,t,lx,ux,It,{meterValue:0})}}function fx(e){let t,n,s=e[1]+1+"",r,i,o,a,c,u,l,h,f,d,p,m=e[0].instrumentNames[e[4]?1:0].toUpperCase()+"",g,_,w,y,T=e[4]?"ALT":"ORG",v,b,C,S,M,N=e[0].isMuted?"OFF":"ON",A,x,I,O,q,V,D,W=e[0].name.toUpperCase()+"",P,B,U,st;return a=new hx({props:{meterValue:e[5]}}),h=new I_({props:{channelName:e[0].name,alternateTrack:e[4]}}),q=new Vu({props:{volume:e[3],handleVolumeChange:e[14]}}),{c(){t=H("div"),n=H("div"),r=he(s),i=Ht(),o=H("div"),wt(a.$$.fragment),c=Ht(),u=H("div"),l=H("div"),wt(h.$$.fragment),d=Ht(),p=H("div"),g=he(m),_=Ht(),w=H("div"),y=H("button"),v=he(T),C=Ht(),S=H("div"),M=H("button"),A=he(N),I=Ht(),O=H("div"),wt(q.$$.fragment),V=Ht(),D=H("div"),P=he(W),this.h()},l(Z){t=G(Z,"DIV",{class:!0});var j=F(t);n=G(j,"DIV",{class:!0});var X=F(n);r=fe(X,s),X.forEach(E),i=Gt(j),o=G(j,"DIV",{class:!0});var et=F(o);bt(a.$$.fragment,et),et.forEach(E),c=Gt(j),u=G(j,"DIV",{class:!0});var it=F(u);l=G(it,"DIV",{class:!0,style:!0});var z=F(l);bt(h.$$.fragment,z),z.forEach(E),d=Gt(it),p=G(it,"DIV",{class:!0});var Wt=F(p);g=fe(Wt,m),Wt.forEach(E),it.forEach(E),_=Gt(j),w=G(j,"DIV",{});var Bt=F(w);y=G(Bt,"BUTTON",{class:!0,style:!0});var oe=F(y);v=fe(oe,T),oe.forEach(E),Bt.forEach(E),C=Gt(j),S=G(j,"DIV",{});var ae=F(S);M=G(ae,"BUTTON",{class:!0,style:!0});var Ys=F(M);A=fe(Ys,N),Ys.forEach(E),ae.forEach(E),I=Gt(j),O=G(j,"DIV",{class:!0});var Qs=F(O);bt(q.$$.fragment,Qs),Qs.forEach(E),V=Gt(j),D=G(j,"DIV",{class:!0});var $=F(D);P=fe($,W),$.forEach(E),j.forEach(E),this.h()},h(){k(n,"class","bg-stone-500 text-white w-7 h-7 mt-3 flex justify-center items-center font-bold rounded-full text-sm"),k(o,"class","w-full mt-1 p-1 px-2"),k(l,"class","bg-gray-600 text-white w-20 h-20 flex justify-center items-center rounded-t"),k(l,"style",f=`
				cursor: ${e[2]?"crosshair":"pointer"}
			`),k(p,"class","instrument-sign bg-gray-600 text-white w-20 h-5 text-xs font-extralight tracking-wide flex justify-center items-center mt-px rounded-b"),k(u,"class","mt-2 "),k(y,"class","button w-10 h-10 text-white shadow-xl m-5 rounded hover:bg-orange-600 focus:bg-orange-600 active:shadow-none text-sm"),k(y,"style",b=`background-color: ${e[4]?"#a78bfa":"#3b82f6"}`),k(M,"class","w-10 h-10 text-white shadow-xl m-5 mt-0 rounded hover:bg-orange-600 focus:bg-orange-600 active:shadow-none text-sm"),k(M,"style",x=`background-color: ${e[0].isMuted?"#f87171":"#4ade80"}`),k(O,"class","volume-container rounded-sm "),k(D,"class","bg-yellow-50 text-normal-400 w-5/6 mx-3 h-7 mt-4 flex justify-center items-center font-semibold rounded-sm text-sm"),k(t,"class","w-24 flex flex-col items-center bg-gray-300 m-1 pb-3")},m(Z,j){at(Z,t,j),L(t,n),L(n,r),L(t,i),L(t,o),xt(a,o,null),L(t,c),L(t,u),L(u,l),xt(h,l,null),L(u,d),L(u,p),L(p,g),L(t,_),L(t,w),L(w,y),L(y,v),L(t,C),L(t,S),L(S,M),L(M,A),L(t,I),L(t,O),xt(q,O,null),L(t,V),L(t,D),L(D,P),B=!0,U||(st=[me(u,"click",e[10]),me(u,"keypress",e[10]),me(y,"click",e[8]),me(M,"click",e[13]),me(O,"click",e[9]),me(O,"keypress",e[9])],U=!0)},p(Z,[j]){(!B||j&2)&&s!==(s=Z[1]+1+"")&&Xe(r,s);const X={};j&32&&(X.meterValue=Z[5]),a.$set(X);const et={};j&1&&(et.channelName=Z[0].name),j&16&&(et.alternateTrack=Z[4]),h.$set(et),(!B||j&4&&f!==(f=`
				cursor: ${Z[2]?"crosshair":"pointer"}
			`))&&k(l,"style",f),(!B||j&17)&&m!==(m=Z[0].instrumentNames[Z[4]?1:0].toUpperCase()+"")&&Xe(g,m),(!B||j&16)&&T!==(T=Z[4]?"ALT":"ORG")&&Xe(v,T),(!B||j&16&&b!==(b=`background-color: ${Z[4]?"#a78bfa":"#3b82f6"}`))&&k(y,"style",b),(!B||j&1)&&N!==(N=Z[0].isMuted?"OFF":"ON")&&Xe(A,N),(!B||j&1&&x!==(x=`background-color: ${Z[0].isMuted?"#f87171":"#4ade80"}`))&&k(M,"style",x);const it={};j&8&&(it.volume=Z[3]),q.$set(it),(!B||j&1)&&W!==(W=Z[0].name.toUpperCase()+"")&&Xe(P,W)},i(Z){B||(tt(a.$$.fragment,Z),tt(h.$$.fragment,Z),tt(q.$$.fragment,Z),B=!0)},o(Z){nt(a.$$.fragment,Z),nt(h.$$.fragment,Z),nt(q.$$.fragment,Z),B=!1},d(Z){Z&&E(t),Tt(a),Tt(h),Tt(q),U=!1,Sc(st)}}}function dx(e,t,n){let{channelNr:s}=t,{channel:r}=t,{isPlaying:i}=t,{isAltKeyPressed:o}=t,a=0,c=!1;Vs(()=>{r.players.forEach((y,T)=>{y.mute=T===0?r.isMuted:!0})});const u=y=>{y==="turnon"?(n(0,r.players[0].mute=!!c,r),n(0,r.players[1].mute=!c,r),n(0,r.isMuted=!1,r)):(r.players.forEach(T=>T.mute=!0),n(0,r.isMuted=!0,r))},l=y=>{y<=1&&(r.gainNode.gain.rampTo(y,0),n(3,a=y))},h=()=>{n(4,c=!c),r.isMuted||(n(0,r.players[0].mute=!!c,r),n(0,r.players[1].mute=!c,r))};let f=0,d=null;const p=y=>{typeof y=="number"&&(y<0?n(5,f=0):y>.2?n(5,f=.2):n(5,f=Math.round(y*100)/100))},m=()=>{o&&l(.8)},g=()=>{o?u(r.isMuted?"turnon":"turnoff"):r.isMuted?u("turnon"):h()},_=()=>u(r.isMuted?"turnon":"turnoff"),w=y=>l(y.target.value);return e.$$set=y=>{"channelNr"in y&&n(1,s=y.channelNr),"channel"in y&&n(0,r=y.channel),"isPlaying"in y&&n(11,i=y.isPlaying),"isAltKeyPressed"in y&&n(2,o=y.isAltKeyPressed)},e.$$.update=()=>{if(e.$$.dirty&1&&n(3,a=r.gainNode.gain.value),e.$$.dirty&6145){let y=20;if(i&&!r.isMuted){let T=setInterval(()=>{p(r.meter.getValue())},y);n(12,d=T)}else d&&(clearInterval(d),n(12,d=null),n(5,f=0))}},[r,s,o,a,c,f,u,l,h,m,g,i,d,_,w]}class px extends Nt{constructor(t){super(),Mt(this,t,dx,fx,It,{channelNr:1,channel:0,isPlaying:11,isAltKeyPressed:2})}}function mx(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 448 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class gx extends Nt{constructor(t){super(),Mt(this,t,null,mx,It,{})}}function _x(e){let t,n;return{c(){t=vt("svg"),n=vt("path"),this.h()},l(s){t=yt(s,"svg",{stroke:!0,fill:!0,"stroke-width":!0,viewBox:!0,height:!0,width:!0,xmlns:!0});var r=F(t);n=yt(r,"path",{d:!0}),F(n).forEach(E),r.forEach(E),this.h()},h(){k(n,"d","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"),k(t,"stroke","currentColor"),k(t,"fill","currentColor"),k(t,"stroke-width","0"),k(t,"viewBox","0 0 448 512"),k(t,"height","1em"),k(t,"width","1em"),k(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){at(s,t,r),L(t,n)},p:K,i:K,o:K,d(s){s&&E(t)}}}class vx extends Nt{constructor(t){super(),Mt(this,t,null,_x,It,{})}}function yx(e){let t,n,s,r;return n=new ql({props:{value:e[0],minValue:0,maxValue:.2,ringWidth:10,width:130,height:80,segments:4,needleColor:"#4b5563",segmentColors:["#d1d5db","#d1d5db","#f87171","#dc2626"],maxSegmentLabels:0,currentValueText:" ",needleTransition:"easePolyOut",needleTransitionDuration:300}}),{c(){t=H("div"),wt(n.$$.fragment),this.h()},l(i){t=G(i,"DIV",{class:!0,style:!0});var o=F(t);bt(n.$$.fragment,o),o.forEach(E),this.h()},h(){k(t,"class","border-4 border-gray-500 bg-amber-50 rounded-md"),k(t,"style",s=`
				background-color: ${e[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`)},m(i,o){at(i,t,o),xt(n,t,null),r=!0},p(i,[o]){const a={};o&1&&(a.value=i[0]),n.$set(a),(!r||o&1&&s!==(s=`
				background-color: ${i[0]===.2?"#fee2e2":"#fffbeb"};
				transition: background-color 0.3s;
				box-shadow: inset 2px 2px 0px #9ca3af, 1px 1px 0px #9ca3af, 2px 2px 0px #9ca3af;
				`))&&k(t,"style",s)},i(i){r||(tt(n.$$.fragment,i),r=!0)},o(i){nt(n.$$.fragment,i),r=!1},d(i){i&&E(t),Tt(n)}}}function wx(e,t,n){let{meterValue:s}=t;return e.$$set=r=>{"meterValue"in r&&n(0,s=r.meterValue)},[s]}class bx extends Nt{constructor(t){super(),Mt(this,t,wx,yx,It,{meterValue:0})}}function xx(e){let t,n,s,r,i,o,a,c,u,l,h,f,d,p,m,g,_,w,y,T,v,b,C,S,M,N,A,x,I,O,q,V;return c=new bx({props:{meterValue:e[5]}}),d=new Vu({props:{volume:e[4],handleVolumeChange:e[12]}}),y=new gx({}),M=new vx({}),{c(){t=H("div"),n=H("div"),s=H("section"),r=H("h1"),i=he("MIXER"),o=Ht(),a=H("div"),wt(c.$$.fragment),u=Ht(),l=H("section"),h=H("div"),f=H("div"),wt(d.$$.fragment),p=Ht(),m=H("section"),g=H("div"),_=H("button"),w=H("span"),wt(y.$$.fragment),b=Ht(),C=H("button"),S=H("span"),wt(M.$$.fragment),A=Ht(),x=H("div"),I=he("MASTER"),this.h()},l(D){t=G(D,"DIV",{class:!0});var W=F(t);n=G(W,"DIV",{class:!0});var P=F(n);s=G(P,"SECTION",{});var B=F(s);r=G(B,"H1",{class:!0});var U=F(r);i=fe(U,"MIXER"),U.forEach(E),o=Gt(B),a=G(B,"DIV",{class:!0});var st=F(a);bt(c.$$.fragment,st),st.forEach(E),B.forEach(E),u=Gt(P),l=G(P,"SECTION",{});var Z=F(l);h=G(Z,"DIV",{class:!0});var j=F(h);f=G(j,"DIV",{class:!0});var X=F(f);bt(d.$$.fragment,X),X.forEach(E),j.forEach(E),Z.forEach(E),p=Gt(P),m=G(P,"SECTION",{class:!0});var et=F(m);g=G(et,"DIV",{class:!0});var it=F(g);_=G(it,"BUTTON",{id:!0,class:!0});var z=F(_);w=G(z,"SPAN",{class:!0});var Wt=F(w);bt(y.$$.fragment,Wt),Wt.forEach(E),z.forEach(E),b=Gt(it),C=G(it,"BUTTON",{id:!0,class:!0});var Bt=F(C);S=G(Bt,"SPAN",{class:!0});var oe=F(S);bt(M.$$.fragment,oe),oe.forEach(E),Bt.forEach(E),it.forEach(E),A=Gt(et),x=G(et,"DIV",{class:!0,style:!0});var ae=F(x);I=fe(ae,"MASTER"),ae.forEach(E),et.forEach(E),P.forEach(E),W.forEach(E),this.h()},h(){k(r,"class","text-gray-700 flex justify-center font-thin tracking-wider text-3xl pt-2"),k(a,"class","mt-5 mb-3"),k(f,"class","master-volume-container svelte-1vn2afs"),k(h,"class","bg-gray-400 rounded w-20 h-72 relative mb-2"),k(w,"class","text-3xl"),k(_,"id","play-button"),_.disabled=T=!e[3],k(_,"class",v=sa(`mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500  focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center ${e[2]?"play-button--active":""}`)+" svelte-1vn2afs"),k(S,"class","text-3xl"),k(C,"id","stop-button"),C.disabled=N=!e[3],k(C,"class","mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500 focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center svelte-1vn2afs"),k(g,"class","flex"),k(x,"class","bg-yellow-50 text-normal-400 mx-3 h-7 mt-4 flex justify-center items-center font-semibold rounded-sm text-sm"),k(x,"style",`
          width: 176px
        `),k(m,"class","flex flex-col items-center"),k(n,"class","flex flex-col justify-between items-center bg-gray-300 w-full m-2 ml-1 pb-3"),k(t,"class","flex justify-center bg-gray-400 w-64")},m(D,W){at(D,t,W),L(t,n),L(n,s),L(s,r),L(r,i),L(s,o),L(s,a),xt(c,a,null),L(n,u),L(n,l),L(l,h),L(h,f),xt(d,f,null),L(n,p),L(n,m),L(m,g),L(g,_),L(_,w),xt(y,w,null),L(g,b),L(g,C),L(C,S),xt(M,S,null),L(m,A),L(m,x),L(x,I),O=!0,q||(V=[me(h,"click",e[7]),me(h,"keypress",e[7]),me(_,"click",function(){ra(e[0])&&e[0].apply(this,arguments)}),me(C,"click",function(){ra(e[1])&&e[1].apply(this,arguments)})],q=!0)},p(D,[W]){e=D;const P={};W&32&&(P.meterValue=e[5]),c.$set(P);const B={};W&16&&(B.volume=e[4]),d.$set(B),(!O||W&8&&T!==(T=!e[3]))&&(_.disabled=T),(!O||W&4&&v!==(v=sa(`mixer-button shadow-lg active:shadow-none bg-violet-600 hover:bg-violet-500  focus:bg-violet-600 active:bg-violet-400 text-white flex justify-center items-center ${e[2]?"play-button--active":""}`)+" svelte-1vn2afs"))&&k(_,"class",v),(!O||W&8&&N!==(N=!e[3]))&&(C.disabled=N)},i(D){O||(tt(c.$$.fragment,D),tt(d.$$.fragment,D),tt(y.$$.fragment,D),tt(M.$$.fragment,D),O=!0)},o(D){nt(c.$$.fragment,D),nt(d.$$.fragment,D),nt(y.$$.fragment,D),nt(M.$$.fragment,D),O=!1},d(D){D&&E(t),Tt(c),Tt(d),Tt(y),Tt(M),q=!1,Sc(V)}}}function Tx(e,t,n){let{handlePlay:s}=t,{handleStop:r}=t,{isPlaying:i}=t,{masterGainNode:o}=t,{masterMeter:a}=t,{isAudioLoaded:c}=t,{isAltKeyPressed:u}=t,l=0;const h=_=>{_<=1&&(o==null||o.gain.rampTo(_,0),n(4,l=_))};let f=0,d=null;const p=_=>{typeof _=="number"&&(_<0?n(5,f=0):_>.2?n(5,f=.2):n(5,f=Math.round(_*100)/100))},m=()=>{u&&h(.8)},g=_=>h(_.target.value);return e.$$set=_=>{"handlePlay"in _&&n(0,s=_.handlePlay),"handleStop"in _&&n(1,r=_.handleStop),"isPlaying"in _&&n(2,i=_.isPlaying),"masterGainNode"in _&&n(8,o=_.masterGainNode),"masterMeter"in _&&n(9,a=_.masterMeter),"isAudioLoaded"in _&&n(3,c=_.isAudioLoaded),"isAltKeyPressed"in _&&n(10,u=_.isAltKeyPressed)},e.$$.update=()=>{if(e.$$.dirty&256&&n(4,l=(o==null?void 0:o.gain.value)||.8),e.$$.dirty&2564){let _=20;if(i){let w=setInterval(()=>{p(a.getValue())},_);n(11,d=w)}else d&&(clearInterval(d),n(11,d=null),n(5,f=0))}if(e.$$.dirty&8&&c){const _=document.getElementById("play-button");setTimeout(()=>{_==null||_.focus()},0)}},[s,r,i,c,l,f,h,m,o,a,u,d,g]}class Cx extends Nt{constructor(t){super(),Mt(this,t,Tx,xx,It,{handlePlay:0,handleStop:1,isPlaying:2,masterGainNode:8,masterMeter:9,isAudioLoaded:3,isAltKeyPressed:10})}}function kx(e){let t,n,s;return{c(){t=H("div"),n=H("span"),s=he(e[0]),this.h()},l(r){t=G(r,"DIV",{class:!0});var i=F(t);n=G(i,"SPAN",{class:!0,style:!0});var o=F(n);s=fe(o,e[0]),o.forEach(E),i.forEach(E),this.h()},h(){k(n,"class","flex items-center relative w-20"),k(n,"style",`
    top: -20px;
  }
  `),k(t,"class","flex h-full w-full justify-center items-center text-9xl mb-5 bg-gray-300 border-4 border-gray-400 text-gray-400 tracking-wider")},m(r,i){at(r,t,i),L(t,n),L(n,s)},p(r,[i]){i&1&&Xe(s,r[0])},i:K,o:K,d(r){r&&E(t)}}}function Sx(e,t,n){let s="...",r=3;return Vs(()=>{const i=setInterval(()=>n(1,r++,r),500);return()=>{clearInterval(i)}}),e.$$.update=()=>{if(e.$$.dirty&2){let i=r%4;n(0,s=i===0?"":" ...".slice(-i))}},[s,r]}class Ax extends Nt{constructor(t){super(),Mt(this,t,Sx,kx,It,{})}}function Cc(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function Nx(e){let t,n,s;return n=new Ax({}),{c(){t=H("div"),wt(n.$$.fragment),this.h()},l(r){t=G(r,"DIV",{class:!0});var i=F(t);bt(n.$$.fragment,i),i.forEach(E),this.h()},h(){k(t,"class","h-full border-4 border-gray-400")},m(r,i){at(r,t,i),xt(n,t,null),s=!0},p:K,i(r){s||(tt(n.$$.fragment,r),s=!0)},o(r){nt(n.$$.fragment,r),s=!1},d(r){r&&E(t),Tt(n)}}}function Mx(e){let t,n,s,r,i,o,a,c=e[3],u=[];for(let h=0;h<c.length;h+=1)u[h]=kc(Cc(e,c,h));const l=h=>nt(u[h],1,1,()=>{u[h]=null});return i=new Cx({props:{handlePlay:e[0],handleStop:e[1],isPlaying:e[2],masterGainNode:e[4],masterMeter:e[5],isAudioLoaded:e[6],isAltKeyPressed:e[7]}}),{c(){t=H("div"),n=H("div"),s=H("div");for(let h=0;h<u.length;h+=1)u[h].c();r=Ht(),wt(i.$$.fragment),this.h()},l(h){t=G(h,"DIV",{class:!0});var f=F(t);n=G(f,"DIV",{class:!0});var d=F(n);s=G(d,"DIV",{class:!0});var p=F(s);for(let m=0;m<u.length;m+=1)u[m].l(p);p.forEach(E),d.forEach(E),r=Gt(f),bt(i.$$.fragment,f),f.forEach(E),this.h()},h(){k(s,"class","flex"),k(n,"class","channels-container flex pl-1 py-1 bg-gray-400 svelte-os3m6x"),k(t,"class","flex")},m(h,f){at(h,t,f),L(t,n),L(n,s);for(let d=0;d<u.length;d+=1)u[d].m(s,null);L(t,r),xt(i,t,null),a=!0},p(h,f){if(f&140){c=h[3];let p;for(p=0;p<c.length;p+=1){const m=Cc(h,c,p);u[p]?(u[p].p(m,f),tt(u[p],1)):(u[p]=kc(m),u[p].c(),tt(u[p],1),u[p].m(s,null))}for(Je(),p=c.length;p<u.length;p+=1)l(p);tn()}const d={};f&1&&(d.handlePlay=h[0]),f&2&&(d.handleStop=h[1]),f&4&&(d.isPlaying=h[2]),f&16&&(d.masterGainNode=h[4]),f&32&&(d.masterMeter=h[5]),f&64&&(d.isAudioLoaded=h[6]),f&128&&(d.isAltKeyPressed=h[7]),i.$set(d)},i(h){if(!a){for(let f=0;f<c.length;f+=1)tt(u[f]);tt(i.$$.fragment,h),Hl(()=>{o||(o=ia(t,Sa,{},!0)),o.run(1)}),a=!0}},o(h){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)nt(u[f]);nt(i.$$.fragment,h),o||(o=ia(t,Sa,{},!1)),o.run(0),a=!1},d(h){h&&E(t),Gl(u,h),Tt(i),h&&o&&o.end()}}}function kc(e){let t,n;return t=new px({props:{channelNr:e[10],channel:e[8],isPlaying:e[2],isAltKeyPressed:e[7]}}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},p(s,r){const i={};r&8&&(i.channel=s[8]),r&4&&(i.isPlaying=s[2]),r&128&&(i.isAltKeyPressed=s[7]),t.$set(i)},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function Ix(e){let t,n,s,r,i,o,a,c,u;const l=[Mx,Nx],h=[];function f(d,p){return d[3].length>0?0:1}return a=f(e),c=h[a]=l[a](e),{c(){t=H("div"),n=H("div"),s=H("div"),r=Ht(),i=H("div"),o=H("div"),c.c(),this.h()},l(d){t=G(d,"DIV",{class:!0});var p=F(t);n=G(p,"DIV",{class:!0});var m=F(n);s=G(m,"DIV",{class:!0}),F(s).forEach(E),r=Gt(m),i=G(m,"DIV",{class:!0});var g=F(i);o=G(g,"DIV",{class:!0});var _=F(o);c.l(_),_.forEach(E),g.forEach(E),m.forEach(E),p.forEach(E),this.h()},h(){k(s,"class","mixer-bottom-wrapper absolute w-full h-full rounded-lg shadow-2xl svelte-os3m6x"),k(o,"class","mixer-container bg-gray-400 rounded overflow-hidden h-full svelte-os3m6x"),k(i,"class","mixer-top-wrapper box-shadow-3d p-5 bg-gray-600 rounded-lg relative z-10 h-full svelte-os3m6x"),k(n,"class","relative outer-wrapper svelte-os3m6x"),k(t,"class","flex justify-center p-5 mt-5")},m(d,p){at(d,t,p),L(t,n),L(n,s),L(n,r),L(n,i),L(i,o),h[a].m(o,null),u=!0},p(d,[p]){let m=a;a=f(d),a===m?h[a].p(d,p):(Je(),nt(h[m],1,1,()=>{h[m]=null}),tn(),c=h[a],c?c.p(d,p):(c=h[a]=l[a](d),c.c()),tt(c,1),c.m(o,null))},i(d){u||(tt(c),u=!0)},o(d){nt(c),u=!1},d(d){d&&E(t),h[a].d()}}}function Ex(e,t,n){let{handlePlay:s}=t,{handleStop:r}=t,{isPlaying:i}=t,{channels:o}=t,{masterGainNode:a}=t,{masterMeter:c}=t,{isAudioLoaded:u}=t,l=!1;return Vs(()=>{const h=d=>{d.key==="Alt"&&n(7,l=!0)},f=d=>{d.key==="Alt"&&n(7,l=!1)};return addEventListener("keydown",h),addEventListener("keyup",f),()=>{removeEventListener("keydown",h),removeEventListener("keyup",f)}}),e.$$set=h=>{"handlePlay"in h&&n(0,s=h.handlePlay),"handleStop"in h&&n(1,r=h.handleStop),"isPlaying"in h&&n(2,i=h.isPlaying),"channels"in h&&n(3,o=h.channels),"masterGainNode"in h&&n(4,a=h.masterGainNode),"masterMeter"in h&&n(5,c=h.masterMeter),"isAudioLoaded"in h&&n(6,u=h.isAudioLoaded)},[s,r,i,o,a,c,u,l]}class Ox extends Nt{constructor(t){super(),Mt(this,t,Ex,Ix,It,{handlePlay:0,handleStop:1,isPlaying:2,channels:3,masterGainNode:4,masterMeter:5,isAudioLoaded:6})}}function Dx(e){let t,n;return t=new Ox({props:{handlePlay:e[6],handleStop:e[5],isPlaying:e[0],channels:e[3],masterGainNode:e[1],masterMeter:e[2],isAudioLoaded:e[4]}}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},p(s,[r]){const i={};r&1&&(i.isPlaying=s[0]),r&8&&(i.channels=s[3]),r&2&&(i.masterGainNode=s[1]),r&4&&(i.masterMeter=s[2]),r&16&&(i.isAudioLoaded=s[4]),t.$set(i)},i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}function Rx(e,t,n){let s=!1,r,i,o=[],a=!1,c=!0;const u=(d,p,m)=>yi.map((g,_)=>{const w=y=>y.slice(y.indexOf("_")+1);return{name:g,gainNode:d[_],meter:p[_],players:m.slice(_*2,_*2+2),isMuted:!0,instrumentNames:[w(ne[_*2]),w(ne[_*2+1])]}}),l=()=>{n(3,o[0].isMuted=!1,o),o[1].gainNode.gain.rampTo(.7,0),o[3].gainNode.gain.rampTo(.4,0),o[4].gainNode.gain.rampTo(.6,0)};return Vs(async()=>{n(1,r=await new qt(.8).toDestination()),n(2,i=new Ns({normalRange:!0,smoothing:.95})),r.connect(i);const p=await(async()=>await yi.map(T=>new qt(.8).connect(r)))(),g=await(async()=>{const T=await yi.map(v=>new Ns({normalRange:!0,smoothing:.95}));return T.forEach((v,b)=>p[b].connect(T[b])),T})(),_=await new Ir(Zg),w=ne.map(T=>_.player(T));w.forEach((T,v)=>{const b=Math.floor(v/2);T.mute=!0,T.loop=!0,T.connect(p[b]).sync().start()}),n(3,o=await u(p,g,w)),l();let y=null;y=setInterval(()=>{w.every(v=>v.loaded)&&(n(4,a=!0),console.log("All tracks loaded..."),y&&(clearInterval(y),y=null))},200)}),[s,r,i,o,a,()=>{ka.stop(),n(0,s=!1)},async()=>{c&&(await vg(),c=!1,console.log("Initial audio start...")),a&&(ka.start(),n(0,s=!0))}]}class Vx extends Nt{constructor(t){super(),Mt(this,t,Rx,Dx,It,{})}}function Px(e){let t,n;return t=new Vx({}),{c(){wt(t.$$.fragment)},l(s){bt(t.$$.fragment,s)},m(s,r){xt(t,s,r),n=!0},p:K,i(s){n||(tt(t.$$.fragment,s),n=!0)},o(s){nt(t.$$.fragment,s),n=!1},d(s){Tt(t,s)}}}class dT extends Nt{constructor(t){super(),Mt(this,t,null,Px,It,{})}}export{dT as default};
